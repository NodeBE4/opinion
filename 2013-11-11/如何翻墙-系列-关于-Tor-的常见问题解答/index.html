<!DOCTYPE html>
<html>
  <head>
  <title>“如何翻墙”系列：关于 Tor 的常见问题解答 – 觀點 – 從草根到大師 git.io/JJCxS</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="

      “如何翻墙”系列：关于 Tor 的常见问题解答  
  
    
      
    
  
  
Tor 是一个很老牌的翻墙工具，也是俺在博客中推荐的第一款翻墙工具——当时正赶上朝廷的60大寿，GFW 加强封锁，俺就写了一篇《  “如何翻墙”系列：戴“套”翻墻的方法  》，算是 Tor 的入门教程。  4年过去了，虽然新的翻墙工具不断涌现，但 Tor 的影响力和用户数仍然持续增加—— 
   很多人不仅仅是用 Tor 来翻墙，更是用 Tor 来隐匿自己的上网行踪
   。在这期间，俺也收到很多读者来信/博客留言，询问关于 Tor 的各种问题。甚至有热心读者建议俺专门写一篇博文，聊聊 Tor 的高级话题。  为了帮大伙儿更好地使用 Tor，今天再发一篇教程，解答 Tor 的各种常见问题。  
       
        
        ★Tor 是啥玩意儿？ 
  Tor 是洋文 （The Onion Router）的缩写，中文又称“洋葱网络/洋葱路由”。简单而言，这是一款专门设计用于隐匿上网身份的工具。  Tor 的官网在“  这里  ”。关于 Tor 的更详细介绍，请看维基百科的“  这里  ”。         ★哪些网友需要使用 Tor？ 
  前面说了，设计 Tor 的主要目的是为了上网隐匿身份。所以，跟其它的翻墙工具不同——它的重点功能是"隐匿性"，"翻墙"只是顺带的功能。  具有如下特点的用户，可以考虑使用 Tor。        ◇为了隐匿自己所在的国家 
  比如有些视频网站为了版权的原因，会限制某些国家的IP，那么你可以利用 Tor 来伪装成别国的网民，就可以绕过视频网站的版权限制。        ◇为了隐匿自己的公网IP 
  比如你想在网上发布敏感的政治言论，那隐匿公网 IP 是避免被跨省追捕的【 
   必要条件
   】。  （提醒一下：“隐匿公网 IP”只是必要条件，不是充分条件！要避免被跨省，需要考虑多个层面的防范，具体请看《  如何隐藏你的踪迹，避免跨省追捕  》系列博文）。  像俺这种长期抹黑朝廷的博主，Tor 是上网的必备工具。俺即使访问国内网站，也要走“基于 Tor 的多重代理”。（关于“多重代理”，后面还会提到）        ◇为了保护隐私 
  刚才已经说了 Tor 的特点，在隐私保护方面，Tor 优于其它的翻墙工具。为了说明 Tor 在隐私方面的优点，拿 Tor 跟 VPN 做一个对比。  很多网友使用 VPN 翻墙，而且长期使用固定的 VPN 提供商。万一 VPN 提供商在 VPN 服务器上记录你的上网行为，那你的 
   所有上网行踪
   就暴露无遗。  而如果使用 Tor，就可以大大降低这种风险——具体原因，下面会聊。         ★软件安装方面的问题 
       ◇Vidalia 跟 Tor 是啥关系？ 
  Tor 本身只提供命令行，没有图形界面。Vidalia 是专门为 Tor 量身打造的图形界面。  在 Vidalia 的图形化界面上，你不但可以配置各项参数，还可以监控 Tor 的流量和 Tor 的线路（后面会提到）。  补充说明：  从2014年之后，Tor 社区已经【不再】维护 Vidalia 这个软件了。所以俺后来又写了一篇：《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》        ◇如何获取 Tor 的软件包？ 
  关于这个问题，在 2009 年的入门教程《  “如何翻墙”系列：戴“套”翻墻的方法  》中已经介绍过，此处不再罗嗦。        ◇应该选择哪个安装包？ 
  先说明一下，Tor 是跨平台的。同时支持主流的：Windows、Linux、Mac OS。  在 Tor 官网有两个下载页面，分别如下：    https://www.torproject.org/download/download-easy.html.en   （这个是面向菜鸟用户的，每个操作系统只提供一个下载链接）    https://www.torproject.org/download/download.html   （这个是面向高级用户的，每个操作系提供多种软件包供你选择）   后一个链接提供的多种选择，俺稍微解释一下。   
   Tor Browser Bundle
    这个软件包捆绑了 Firefox 浏览器（ 
   对于 2.3.25 之后的版本，监听端口改为9150
   ）。  
   Expert Bundle
    这个软件包是面向高级用户，只有赤裸裸的 Tor，没有其它额外的东西（没有图形界面）。        ◇Bridge 和 Relay 有啥区别？ 
  Bridge 的中文就是“网桥”。Tor 的网桥是一种特殊的中转节点。它跟其它中转节点的差异在于：普通的中转节点，其信息会被加入到 Tor 在全球的目录服务器，所以普通的中转节点会被所有的人看到，并用来进行流量中转。  而你自己搭建的网桥，其信息不会被加入到全球的目录服务器——只会被你自己所用。        ◇Linux 用户如何获取软件包？ 
  因为 Tor 的名气大，那些主流的发行版基本上都提供 Tor 相关的软件包。如果你用的是主流的发行版，直接用系统的软件包管理工具，就可以自动安装/自动升级 Tor。        ◇Mac OS X 用户如何获取软件包？ 
  使用苹果系统的用户，可以看官网的”  这个文档  “。里面有介绍如何通过“Homebrew 包管理器”安装 Tor。         ★浏览器方面的问题 
       ◇如何配置浏览器的代理？ 
  （如果你使用的是 Tor Browser Bundle 内置的 Firefox，就无需再额外配置浏览器代理了）  早先的 Tor 客户端同时提供 HTTP 代理和 SOCKS，大概从 2013年开始，新版本的客户端不再提供 HTTP 代理了。所以原先的 
   8118
   代理端口也就废弃了。  今后大伙儿需要用 Tor 提供的 SOCKS 代理来上网，端口号如下：  
   9150
   （2.3.25版本之后的 Tor Browser Bundle 软件包）  
   9050
   （其它的软件包）   Firefox 的代理设置如下图（至于 Chrome、IE、或其它浏览器，列位看官请依样画葫芦）：        
  （顺便说一下：SOCKS 代理其实比 HTTP 代理更好，关于两者的差别，俺抽空写一篇扫盲）        ◇如何判断自己的浏览器是否在走 Tor 的线路？ 
  Tor 官网提供了一个测试界面，网址是  https://check.torproject.org/  猛击该超链接，会打开一个界面。  如果你的浏览器已经在使用 Tor 的线路，会出现一个【绿色】洋葱头，以及一行绿色的洋文提示。  如果你的浏览器没有走 Tor 的线路，会出现一个【带红色打叉】的洋葱头，同时还有一行红色的洋文警告。        ◇Tor Browser Bundle 内置的 Firefox，有啥特殊之处？ 
  这个内置的 Firefox 跟普通的 Firefox 有如下几个差异：   
   1. 版本差异
    这个内置的 Firefox 采用 Mozilla 官方提供的长期支持版本（洋文叫 ESR），而不是最新版本。  因为最新版本总是会增加很多新功能，可能会引入潜在的安全漏洞；而 ESR版本 相对而言比较稳健。  
   2. 配置差异
    这个内置的 Firefox 专门进行了一些安全方面的定制（比如禁用 JavaScript）        ◇为啥 Tor Browser Bundle 内置的浏览器无法看视频？ 
  因为这个内置的浏览器没有装 Flash 播放插件。而大多数视频网站需要 Flash 插件来播放视频。         ★隐私方面的问题 
  这一节是本文的重点，看仔细喽。        ◇Tor 客户端如何建立联网的线路？ 
  如果你比较好奇，为啥 Tor 的隐匿保护好于其它翻墙工具？那么有必要了解一下 Tor 客户端的联网机制。下面这三张图来自 Tor 的官网。因为图片中是洋文说明，俺稍微修改了一下，注上中文。        
 第1图：当 Tor 客户端启动之后，会首先连接 Tor 的目录服务器。从目录服务器中获取全球的 Tor 节点信息。        
 第2图：假设你要访问 网站1，那么 Tor 客户端会随机挑选三个节点用于中转。  为了打字方便，俺把这三个节点分别称为：  
   入口节点
   ：  如果你仅仅使用 Tor 联网，该节点直接跟你的电脑相连；如果你使用双重代理，入口节点跟你的前置代理相连。  
   中间节点
   ：  介于入口节点和出口节点之间（这个节点的威胁最小）。  
   出口节点
   ：  该节点直接跟你访问的目标网站相连（ 
   这个节点的威胁最大
   ）。   这三个节点中，只有“出口节点”会看到你的“上网行为”（图中标红色的虚线，表示 Tor 节点【 
   会看到
   】“原始流量”）。  所谓的“上网行为”包括：你访问了哪个网站，你从该网站传输的流量。  如果这个网站使用【加密的】HTTPS 协议，“出口节点”看到的“原始流量”是 HTTPS 的密文，没啥关系；反之，如果这个网站使用【明文的】HTTP 协议，那么"出口节点"会看到你从该网站发送/接受的内容（ 
   这是主要风险点
   ）。  除了“出口节点”，其它节点完全无法知道你的上网行为（图中标绿色的线，表示 Tor 节点 
   看不到
   “原始流量”）。        
 第3图：Tor 为了加强隐匿性，会动态变化中转线路。也就是说，每隔一段时间（约10分钟），就会随机挑选三个节点，重新构造一条传输线路。  因为线路动态变化，“出口节点”自然也动态变化。所以，即使“出口节点”偷窥你的上网行为，也只能看到一个短暂的片段。        ◇Tor 节点是否会偷窥到自己的隐私/上网行为？ 
  如果你弄懂了前一个问题的三张原理图，那你自然就知道， 
   只有【出口节点】会看到你的上网行为
   。        ◇如何避免 Tor 节点看到你的上网行为？ 
  前面说了，“上网行为”至少包括两部分：  1. 你访问了哪个网站  2. 你从网站传输（发送、接受）的内容/数据   对于第1点，是【 
   无解
   】滴！  不管采用哪种工具来隐匿行踪，最终，你都需要有某个“主机”帮你把数据送到你要访问的网站。所以，这个“主机”必然就知道你访问了啥网站。  对于第2点，是【 
   有解
   】滴。  主要方法就是：尽量采用 HTTPS 协议。比如像维基百科，同时支持 HTTP 和 HTTPS。那么你就应该采用 HTTPS 方式访问。这种情况下，Tor 的“出口节点”只知道你访问了维基百科，但是无法知道你访问了哪个页面。  为了养成经常使用 HTTPS 的习惯，建议大伙儿安装 EFF 官方提供的  HTTPS everywhere         ◇什么是“陷阱节点”/“蜜罐节点”？ 
  某些国家（比如咱们天朝）的政府会设置“蜜罐节点”。所谓的“蜜罐节点”，通俗的说，就是陷阱。  如果你使用的线路中，【出口节点】正好是蜜罐，那么该蜜罐就会窥探到你的上网行为——前面已经说了，【出口节点】肯定会知道：你的访问了哪个网站。  更糟糕的是——假如你访问的目标网站【没有】HTTPS 加密，充当“出口节点”的蜜罐就会知道：你浏览的页面的内容。        ◇如何避免“陷阱节点”/“蜜罐节点”？ 
  比较简单的做法，就是通过修改 Tor 的配置文件，规避这些不安全国家的节点。  对于天朝的网友，你至少需要屏蔽“大陆、香港、澳门”这三个节点。因为这三个地区都可能被六扇门设置蜜罐。  Tor 的配置文件名叫 
   torrc
   ，这是一个文本文件，用记事本就可以打开。（如果你找不到该文件，在系统盘中搜索一下 
   torrc
   这个文件名）  在该文件末尾，加入下面这行（ 
   ExcludeNodes
   表示排除这些国家/地区的节点， 
   StrictNodes
   表示强制执行）。      ExcludeNodes  {cn},{hk},{mo}
StrictNodes  1    
 关于【StrictNodes】的语法，俺补充说明一下：  如果不设置 
   StrictNodes 1
   ，Tor 客户端首先也会规避 
   ExcludeNodes
   列出的这些国家。但如果 Tor 客户端找不到可用的线路，就会去尝试位于排除列表中的节点。  如果设置了 
   StrictNodes 1
   ，即使 Tor 客户端找不到可用的线路，也不会去尝试这些国家的节点。   除了上述三个地区，还有几个国家跟天朝串通一气。如果你对安全性的要求比较高，可以把这些国家也列入 Tor 的排除节点列表。  下面给出这些流氓国家的代码，你依样画葫芦加入到 
   ExcludeNodes
   那一行，国家代码之间用逗号分隔。       
    
     
      
       代码
      
      
       国别
      
     
     
      
       {kp}
      
      
       北朝鲜
      
     
     
      
       {ir}
      
      
       伊朗
      
     
     
      
       {sy}
      
      
       叙利亚
      
     
     
      
       {pk}
      
      
       巴基斯坦
      
     
     
      
       {cu}
      
      
       古巴
      
     
     
      
       {vn}
      
      
       越南
      
     
     
      
       {ru}
      
      
       俄罗斯
      
     
     
      
       {by}
      
      
       白俄罗斯
      
     
    
    
 注：耍流氓的政权有很多，上述表格仅供参考，肯定【不全】。         ◇如何【更严格地】限制“Tor 节点”？ 
  在本文发布之后6年（2019），俺在《  近期安全动态和点评（2019年3季度）  》一文中介绍了【更严格】的 Tor 节点配置招数。对安全性要求【很高】的读者，可以去看看。  那篇提到了三个招数（3个注意事项），其中一个是【白名单】，配置语法如下：   
   EntryNodes
    限定只使用某些国家的节点作为【入口节点】。   
   ExitNodes
    限定只使用某些国家的节点作为【出口节点】。        ◇Tor 的加密流量能否被【破解】？ 
  根据斯诺登曝光的材料，NSA 目前具备的运算能力，可以解密很大一部分 Tor 流量。  因为目前（2013年）的 Tor 中继服务器，大部分还在使用 1024 位的 DHE 密钥，这类密钥虽然普通人难以破解，但是 NSA 掌握的运算能力可以在几小时内暴力破解。目前只有 10% 左右的中继服务器采用 ECDHE 密钥（基于椭圆曲线）。这类 ECDHE 密钥 NSA 比较难破解（更多介绍请看“  这篇报道  ”）。  至于天朝方面，肯定【没有】NSA 这么牛的破解能力。所以墙内的同学们，咱们暂时还不用担心这个问题 :)  另外，等到大部分中继服务器升级到 2.4 版本，ECDHE密钥 的使用就会普及。到那时候，（DHE 密钥被破解的）风险会减低。  注：  本小节提及了好几种【密钥交换算法】。如果你对这方面感兴趣，可以看如下这篇博文，介绍了相关算法的原理。  《  扫盲 HTTPS 和 SSL/TLS 协议[3]：密钥交换（密钥协商）算法及其原理  》        ◇啥是【流量关联分析】？ 
  先声明：流量关联分析有很多种。这里说的是【 
   针对 Tor
   】的流量关联分析”。  “关联分析”是数据挖掘的一种手段——先积累足够多的数据，然后通过某种算法找出数据之间的某些相关性特征。考虑到数据挖掘不是本文的主题，就不深入介绍了。  简单而言，如果某个攻击者能够监控你接入 Tor 网络的流量（入口节点之前的流量）以及你离开 Tor 网络的流量（出口节点之后的流量）。那么经过足够长时间的数据积累，攻击者就可以利用数据挖据【猜测】出：某些网络行为其实是来自某个公网 IP 的用户。   举例：      
如果你仅仅使用 Tor（没用双重代理）联网，然后经常到 A网站 发敏感言论。  假设1：  如果 GFW 对所有的 Tor 流量都做了记录（这只是假设，到底有没有，俺不晓得）  假设2：  A网站 对所有的用户留言做了记录（很多的国内网站都会记录）  假设3：  朝廷可以获取 A网站 的用户访问记录（只要是国内网站，朝廷肯定能拿到；至于国外网站，要看情况）  假设4：  朝廷针对 Tor 部署了关联分析的系统（这只是假设，到底有没有，俺不晓得）   如果上述这 N 个假设【 
    同时成立
    】，那么，经过足够长时间的积累（具体需要多长时间，取决于你发帖的频繁度），关联分析系统可以猜测出你是谁。    
       ◇如何【规避】（针对 Tor 的）流量关联分析？ 
  要规避“针对 Tor 的流量关联分析”，目前最直接有效的方法是：多重代理。因为一旦用了多重代理，Tor 的流量类型就被掩盖掉了。  比方说：如果你使用 VPN 作为 Tor 的前置代理（Tor over VPN），那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 是加密滴）ISP【看不到】你的 Tor 流量。在这种情况下，“流量关联分析”的【难度】将提高 N 个数量级。   除了“针对 Tor 的流量关联分析”，还有其它的流量分析技术。考虑到篇幅，就不深入介绍了。等俺有空，单独写一篇博文，专门聊这个话题。         ★【双重代理】方面的问题 
  如果你对“双重代理”还不太了解，请先看俺之前的博文《  如何隐藏你的踪迹，避免跨省追捕[5]：用多重代理隐匿公网IP  》。        ◇为啥要使用双重代理？ 
  俺总结了如下几个原因：   
   原因1
    因为 Tor 的影响力很大，GFW 对 Tor 进行重点封杀。全球大多数的 Tor 中继节点都被 GFW 列入“IP 黑名单”。所以天朝的网友，如果单独使用 Tor，很难联网成功。这种情况下，就需要使用双重代理。   
   原因2
    所有的软件都可能有缺陷（Tor 也不例外）。如果你仅仅使用 Tor，万一 Tor 出现安全漏洞并且被攻击者利用，那么攻击者就有可能对你进行逆向追溯（说不定能追溯出你的真实公网 IP）。  而如果使用多重代理，即使出现上述风险，攻击者也只能追踪到 Tor 的前置代理，而不会直接追踪到你本人。这样一来，风险大大降低。   
   原因3
    前面提到，全球的 Tor 网络中可能会有陷阱节点。虽然你可以利用俺刚才介绍的方法，排除危险国家/地区的节点，但并不能确保万无一失。  比如说你碰到某个极小概率事件——你使用的线路上，碰巧三个节点都是陷阱——这种情况下，你的真实公网 IP 会暴露。  但如果你用了双重代理，即使碰到这种小概率事件，只会暴露你使用的前置代理服务器的 IP，而【不会暴露】你的本人的公网 IP。   举例：      
一个月前（2013年10月），美国地下网络“丝绸之路”的站长被 FBI 逮捕。他一直使用 Tor，为啥会暴露？  其中一种说法是：他没有使用双重代理。而 FBI 利用 NSA 的技术（据传闻是流量关联分析技术），再加上 FBI 本身也设置了蜜罐节点，最终定位了“丝绸之路”站长。    
  
   原因4
    刚才介绍了针对 Tor 的“流量关联分析”。如果你使用双重代理，会降低被关联分析的风险。        ◇哪些工具可以跟 Tor 组合双重代理？ 
  大部分翻墙工具都可以跟 Tor 组合。比如：所有的 VPN，无界、自由门、赛风、世界通、等等。  另外，你也可以使用公网上的一些代理服务器（公共代理），用来跟 Tor 组合成双重代理。前提是：这些“公共代理”【必须支持】HTTPS 代理或 SOCKS 代理。  如何用 Tor 组合“公共代理”，请看《  2012年9月翻墙快报（兼谈复活 Tor 的方法）  》。        ◇为啥 GAE 翻墙工具无法跟 Tor 组合成双重代理？ 
  貌似 GAE 的翻墙工具，都只提供 HTTP 代理，没有提供【原生的】HTTPS 代理。而 Tor 客户端需要使用 HTTPS 跟中转节点进行数据传输。        ◇为啥 GoAgent【无法】跟 Tor 组合成“双重代理”？ 
  GoAgent 也是 GAE 翻墙工具的一种，请参见前一个问题的解答。         ★其它方面的问题 
       ◇为啥要使用虚拟机？ 
  虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。  具体的原理图，请看《  如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网 IP（原理介绍）  》   举例：      
前几个月，美国 FBI 为了打击儿童色情，逮捕了 Tor 匿名托管服务 Freedom Hosting 的负责人。然后 FBI 在该服务器上设置了木马。  该木马会利用 Tor 内置的 Firefox 浏览器的一个安全漏洞，来收集 Tor 用户的真实公网 IP。  （木马会向 FBI 的服务器发送一个信息，FBI 的服务器就会记录下发送端的 IP。如果没有虚拟机，这个【 
    直接联网
    】的企图就得逞啦）。    
  如果你之前没用过操作系统虚拟机，可以先看俺写的系列教程《  扫盲操作系统虚拟机  》。        ◇如何【跨机器】共享 Tor Browser 的翻墙通道？ 
  用记事本（notepad）打开 Tor 的配置文件（如何找到配置文件，本文前面提到过）。在该文件末尾新增一行。  如果是 Tor Browser 软件包，加入如下这行      SocksListenAddress 0.0.0.0:9150    
 如果是 Tor 的其它软件包，加入如下这行      SocksListenAddress 0.0.0.0:9050    
 修改完记得保存，然后记得重启 Tor。之后，Tor 的监听端口就会绑定到 
   0.0.0.0
   这个地址——意思就是说，任何地址（任何机器）都可以连接到 Tor 的监听端口。  （唠叨一下：如果要跨机器共享 Tor 的 SOCKS 端口，别忘了修改防火墙的配置，允许 Tor 监听端口的 TCP 连入）        ◇啥是 obfs / obfsproxy？ 
  这玩意儿也是 Tor 官方提供的工具，主要是用来混淆 Tor 的流量。  因为 Tor 的名气太大了，很多网络监控系统（比如天朝大名鼎鼎的 GFW）可以根据网络传输内容，判断该流量是否为 Tor 的流量。如果是 Tor 流量就进行阻断。  （请注意：“判断流量类型”【不等于】“解密内容”）。  为了应对这类威胁，Tor 官方提供了一个额外的工具，用来混淆流量，让监控系统识别不出。原理图如下：        
  虽然有 obfsproxy 这个工具，但是对于那些非常重视安全性的网友，俺依然提倡用“双重代理”——双重代理的优点刚才分析过，此处不再罗嗦。         ★结尾 
  本文写得有点仓促，涉及的问题未必覆盖到方方面面。如果你觉得本文还有哪些问题没有覆盖到，欢迎到俺博客留言。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何翻墙  》（传说中的翻墙入门教程，不定期更新）  《  戴“套”翻墻的方法  》  《  “如何翻墙”系列：扫盲 Tor Browser 7.5——关于 meek 插件的配置、优化、原理  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  扫盲操作系统虚拟机  》（系列）  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/11/tor-faq.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    <meta property="og:description" content="

      “如何翻墙”系列：关于 Tor 的常见问题解答  
  
    
      
    
  
  
Tor 是一个很老牌的翻墙工具，也是俺在博客中推荐的第一款翻墙工具——当时正赶上朝廷的60大寿，GFW 加强封锁，俺就写了一篇《  “如何翻墙”系列：戴“套”翻墻的方法  》，算是 Tor 的入门教程。  4年过去了，虽然新的翻墙工具不断涌现，但 Tor 的影响力和用户数仍然持续增加—— 
   很多人不仅仅是用 Tor 来翻墙，更是用 Tor 来隐匿自己的上网行踪
   。在这期间，俺也收到很多读者来信/博客留言，询问关于 Tor 的各种问题。甚至有热心读者建议俺专门写一篇博文，聊聊 Tor 的高级话题。  为了帮大伙儿更好地使用 Tor，今天再发一篇教程，解答 Tor 的各种常见问题。  
       
        
        ★Tor 是啥玩意儿？ 
  Tor 是洋文 （The Onion Router）的缩写，中文又称“洋葱网络/洋葱路由”。简单而言，这是一款专门设计用于隐匿上网身份的工具。  Tor 的官网在“  这里  ”。关于 Tor 的更详细介绍，请看维基百科的“  这里  ”。         ★哪些网友需要使用 Tor？ 
  前面说了，设计 Tor 的主要目的是为了上网隐匿身份。所以，跟其它的翻墙工具不同——它的重点功能是"隐匿性"，"翻墙"只是顺带的功能。  具有如下特点的用户，可以考虑使用 Tor。        ◇为了隐匿自己所在的国家 
  比如有些视频网站为了版权的原因，会限制某些国家的IP，那么你可以利用 Tor 来伪装成别国的网民，就可以绕过视频网站的版权限制。        ◇为了隐匿自己的公网IP 
  比如你想在网上发布敏感的政治言论，那隐匿公网 IP 是避免被跨省追捕的【 
   必要条件
   】。  （提醒一下：“隐匿公网 IP”只是必要条件，不是充分条件！要避免被跨省，需要考虑多个层面的防范，具体请看《  如何隐藏你的踪迹，避免跨省追捕  》系列博文）。  像俺这种长期抹黑朝廷的博主，Tor 是上网的必备工具。俺即使访问国内网站，也要走“基于 Tor 的多重代理”。（关于“多重代理”，后面还会提到）        ◇为了保护隐私 
  刚才已经说了 Tor 的特点，在隐私保护方面，Tor 优于其它的翻墙工具。为了说明 Tor 在隐私方面的优点，拿 Tor 跟 VPN 做一个对比。  很多网友使用 VPN 翻墙，而且长期使用固定的 VPN 提供商。万一 VPN 提供商在 VPN 服务器上记录你的上网行为，那你的 
   所有上网行踪
   就暴露无遗。  而如果使用 Tor，就可以大大降低这种风险——具体原因，下面会聊。         ★软件安装方面的问题 
       ◇Vidalia 跟 Tor 是啥关系？ 
  Tor 本身只提供命令行，没有图形界面。Vidalia 是专门为 Tor 量身打造的图形界面。  在 Vidalia 的图形化界面上，你不但可以配置各项参数，还可以监控 Tor 的流量和 Tor 的线路（后面会提到）。  补充说明：  从2014年之后，Tor 社区已经【不再】维护 Vidalia 这个软件了。所以俺后来又写了一篇：《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》        ◇如何获取 Tor 的软件包？ 
  关于这个问题，在 2009 年的入门教程《  “如何翻墙”系列：戴“套”翻墻的方法  》中已经介绍过，此处不再罗嗦。        ◇应该选择哪个安装包？ 
  先说明一下，Tor 是跨平台的。同时支持主流的：Windows、Linux、Mac OS。  在 Tor 官网有两个下载页面，分别如下：    https://www.torproject.org/download/download-easy.html.en   （这个是面向菜鸟用户的，每个操作系统只提供一个下载链接）    https://www.torproject.org/download/download.html   （这个是面向高级用户的，每个操作系提供多种软件包供你选择）   后一个链接提供的多种选择，俺稍微解释一下。   
   Tor Browser Bundle
    这个软件包捆绑了 Firefox 浏览器（ 
   对于 2.3.25 之后的版本，监听端口改为9150
   ）。  
   Expert Bundle
    这个软件包是面向高级用户，只有赤裸裸的 Tor，没有其它额外的东西（没有图形界面）。        ◇Bridge 和 Relay 有啥区别？ 
  Bridge 的中文就是“网桥”。Tor 的网桥是一种特殊的中转节点。它跟其它中转节点的差异在于：普通的中转节点，其信息会被加入到 Tor 在全球的目录服务器，所以普通的中转节点会被所有的人看到，并用来进行流量中转。  而你自己搭建的网桥，其信息不会被加入到全球的目录服务器——只会被你自己所用。        ◇Linux 用户如何获取软件包？ 
  因为 Tor 的名气大，那些主流的发行版基本上都提供 Tor 相关的软件包。如果你用的是主流的发行版，直接用系统的软件包管理工具，就可以自动安装/自动升级 Tor。        ◇Mac OS X 用户如何获取软件包？ 
  使用苹果系统的用户，可以看官网的”  这个文档  “。里面有介绍如何通过“Homebrew 包管理器”安装 Tor。         ★浏览器方面的问题 
       ◇如何配置浏览器的代理？ 
  （如果你使用的是 Tor Browser Bundle 内置的 Firefox，就无需再额外配置浏览器代理了）  早先的 Tor 客户端同时提供 HTTP 代理和 SOCKS，大概从 2013年开始，新版本的客户端不再提供 HTTP 代理了。所以原先的 
   8118
   代理端口也就废弃了。  今后大伙儿需要用 Tor 提供的 SOCKS 代理来上网，端口号如下：  
   9150
   （2.3.25版本之后的 Tor Browser Bundle 软件包）  
   9050
   （其它的软件包）   Firefox 的代理设置如下图（至于 Chrome、IE、或其它浏览器，列位看官请依样画葫芦）：        
  （顺便说一下：SOCKS 代理其实比 HTTP 代理更好，关于两者的差别，俺抽空写一篇扫盲）        ◇如何判断自己的浏览器是否在走 Tor 的线路？ 
  Tor 官网提供了一个测试界面，网址是  https://check.torproject.org/  猛击该超链接，会打开一个界面。  如果你的浏览器已经在使用 Tor 的线路，会出现一个【绿色】洋葱头，以及一行绿色的洋文提示。  如果你的浏览器没有走 Tor 的线路，会出现一个【带红色打叉】的洋葱头，同时还有一行红色的洋文警告。        ◇Tor Browser Bundle 内置的 Firefox，有啥特殊之处？ 
  这个内置的 Firefox 跟普通的 Firefox 有如下几个差异：   
   1. 版本差异
    这个内置的 Firefox 采用 Mozilla 官方提供的长期支持版本（洋文叫 ESR），而不是最新版本。  因为最新版本总是会增加很多新功能，可能会引入潜在的安全漏洞；而 ESR版本 相对而言比较稳健。  
   2. 配置差异
    这个内置的 Firefox 专门进行了一些安全方面的定制（比如禁用 JavaScript）        ◇为啥 Tor Browser Bundle 内置的浏览器无法看视频？ 
  因为这个内置的浏览器没有装 Flash 播放插件。而大多数视频网站需要 Flash 插件来播放视频。         ★隐私方面的问题 
  这一节是本文的重点，看仔细喽。        ◇Tor 客户端如何建立联网的线路？ 
  如果你比较好奇，为啥 Tor 的隐匿保护好于其它翻墙工具？那么有必要了解一下 Tor 客户端的联网机制。下面这三张图来自 Tor 的官网。因为图片中是洋文说明，俺稍微修改了一下，注上中文。        
 第1图：当 Tor 客户端启动之后，会首先连接 Tor 的目录服务器。从目录服务器中获取全球的 Tor 节点信息。        
 第2图：假设你要访问 网站1，那么 Tor 客户端会随机挑选三个节点用于中转。  为了打字方便，俺把这三个节点分别称为：  
   入口节点
   ：  如果你仅仅使用 Tor 联网，该节点直接跟你的电脑相连；如果你使用双重代理，入口节点跟你的前置代理相连。  
   中间节点
   ：  介于入口节点和出口节点之间（这个节点的威胁最小）。  
   出口节点
   ：  该节点直接跟你访问的目标网站相连（ 
   这个节点的威胁最大
   ）。   这三个节点中，只有“出口节点”会看到你的“上网行为”（图中标红色的虚线，表示 Tor 节点【 
   会看到
   】“原始流量”）。  所谓的“上网行为”包括：你访问了哪个网站，你从该网站传输的流量。  如果这个网站使用【加密的】HTTPS 协议，“出口节点”看到的“原始流量”是 HTTPS 的密文，没啥关系；反之，如果这个网站使用【明文的】HTTP 协议，那么"出口节点"会看到你从该网站发送/接受的内容（ 
   这是主要风险点
   ）。  除了“出口节点”，其它节点完全无法知道你的上网行为（图中标绿色的线，表示 Tor 节点 
   看不到
   “原始流量”）。        
 第3图：Tor 为了加强隐匿性，会动态变化中转线路。也就是说，每隔一段时间（约10分钟），就会随机挑选三个节点，重新构造一条传输线路。  因为线路动态变化，“出口节点”自然也动态变化。所以，即使“出口节点”偷窥你的上网行为，也只能看到一个短暂的片段。        ◇Tor 节点是否会偷窥到自己的隐私/上网行为？ 
  如果你弄懂了前一个问题的三张原理图，那你自然就知道， 
   只有【出口节点】会看到你的上网行为
   。        ◇如何避免 Tor 节点看到你的上网行为？ 
  前面说了，“上网行为”至少包括两部分：  1. 你访问了哪个网站  2. 你从网站传输（发送、接受）的内容/数据   对于第1点，是【 
   无解
   】滴！  不管采用哪种工具来隐匿行踪，最终，你都需要有某个“主机”帮你把数据送到你要访问的网站。所以，这个“主机”必然就知道你访问了啥网站。  对于第2点，是【 
   有解
   】滴。  主要方法就是：尽量采用 HTTPS 协议。比如像维基百科，同时支持 HTTP 和 HTTPS。那么你就应该采用 HTTPS 方式访问。这种情况下，Tor 的“出口节点”只知道你访问了维基百科，但是无法知道你访问了哪个页面。  为了养成经常使用 HTTPS 的习惯，建议大伙儿安装 EFF 官方提供的  HTTPS everywhere         ◇什么是“陷阱节点”/“蜜罐节点”？ 
  某些国家（比如咱们天朝）的政府会设置“蜜罐节点”。所谓的“蜜罐节点”，通俗的说，就是陷阱。  如果你使用的线路中，【出口节点】正好是蜜罐，那么该蜜罐就会窥探到你的上网行为——前面已经说了，【出口节点】肯定会知道：你的访问了哪个网站。  更糟糕的是——假如你访问的目标网站【没有】HTTPS 加密，充当“出口节点”的蜜罐就会知道：你浏览的页面的内容。        ◇如何避免“陷阱节点”/“蜜罐节点”？ 
  比较简单的做法，就是通过修改 Tor 的配置文件，规避这些不安全国家的节点。  对于天朝的网友，你至少需要屏蔽“大陆、香港、澳门”这三个节点。因为这三个地区都可能被六扇门设置蜜罐。  Tor 的配置文件名叫 
   torrc
   ，这是一个文本文件，用记事本就可以打开。（如果你找不到该文件，在系统盘中搜索一下 
   torrc
   这个文件名）  在该文件末尾，加入下面这行（ 
   ExcludeNodes
   表示排除这些国家/地区的节点， 
   StrictNodes
   表示强制执行）。      ExcludeNodes  {cn},{hk},{mo}
StrictNodes  1    
 关于【StrictNodes】的语法，俺补充说明一下：  如果不设置 
   StrictNodes 1
   ，Tor 客户端首先也会规避 
   ExcludeNodes
   列出的这些国家。但如果 Tor 客户端找不到可用的线路，就会去尝试位于排除列表中的节点。  如果设置了 
   StrictNodes 1
   ，即使 Tor 客户端找不到可用的线路，也不会去尝试这些国家的节点。   除了上述三个地区，还有几个国家跟天朝串通一气。如果你对安全性的要求比较高，可以把这些国家也列入 Tor 的排除节点列表。  下面给出这些流氓国家的代码，你依样画葫芦加入到 
   ExcludeNodes
   那一行，国家代码之间用逗号分隔。       
    
     
      
       代码
      
      
       国别
      
     
     
      
       {kp}
      
      
       北朝鲜
      
     
     
      
       {ir}
      
      
       伊朗
      
     
     
      
       {sy}
      
      
       叙利亚
      
     
     
      
       {pk}
      
      
       巴基斯坦
      
     
     
      
       {cu}
      
      
       古巴
      
     
     
      
       {vn}
      
      
       越南
      
     
     
      
       {ru}
      
      
       俄罗斯
      
     
     
      
       {by}
      
      
       白俄罗斯
      
     
    
    
 注：耍流氓的政权有很多，上述表格仅供参考，肯定【不全】。         ◇如何【更严格地】限制“Tor 节点”？ 
  在本文发布之后6年（2019），俺在《  近期安全动态和点评（2019年3季度）  》一文中介绍了【更严格】的 Tor 节点配置招数。对安全性要求【很高】的读者，可以去看看。  那篇提到了三个招数（3个注意事项），其中一个是【白名单】，配置语法如下：   
   EntryNodes
    限定只使用某些国家的节点作为【入口节点】。   
   ExitNodes
    限定只使用某些国家的节点作为【出口节点】。        ◇Tor 的加密流量能否被【破解】？ 
  根据斯诺登曝光的材料，NSA 目前具备的运算能力，可以解密很大一部分 Tor 流量。  因为目前（2013年）的 Tor 中继服务器，大部分还在使用 1024 位的 DHE 密钥，这类密钥虽然普通人难以破解，但是 NSA 掌握的运算能力可以在几小时内暴力破解。目前只有 10% 左右的中继服务器采用 ECDHE 密钥（基于椭圆曲线）。这类 ECDHE 密钥 NSA 比较难破解（更多介绍请看“  这篇报道  ”）。  至于天朝方面，肯定【没有】NSA 这么牛的破解能力。所以墙内的同学们，咱们暂时还不用担心这个问题 :)  另外，等到大部分中继服务器升级到 2.4 版本，ECDHE密钥 的使用就会普及。到那时候，（DHE 密钥被破解的）风险会减低。  注：  本小节提及了好几种【密钥交换算法】。如果你对这方面感兴趣，可以看如下这篇博文，介绍了相关算法的原理。  《  扫盲 HTTPS 和 SSL/TLS 协议[3]：密钥交换（密钥协商）算法及其原理  》        ◇啥是【流量关联分析】？ 
  先声明：流量关联分析有很多种。这里说的是【 
   针对 Tor
   】的流量关联分析”。  “关联分析”是数据挖掘的一种手段——先积累足够多的数据，然后通过某种算法找出数据之间的某些相关性特征。考虑到数据挖掘不是本文的主题，就不深入介绍了。  简单而言，如果某个攻击者能够监控你接入 Tor 网络的流量（入口节点之前的流量）以及你离开 Tor 网络的流量（出口节点之后的流量）。那么经过足够长时间的数据积累，攻击者就可以利用数据挖据【猜测】出：某些网络行为其实是来自某个公网 IP 的用户。   举例：      
如果你仅仅使用 Tor（没用双重代理）联网，然后经常到 A网站 发敏感言论。  假设1：  如果 GFW 对所有的 Tor 流量都做了记录（这只是假设，到底有没有，俺不晓得）  假设2：  A网站 对所有的用户留言做了记录（很多的国内网站都会记录）  假设3：  朝廷可以获取 A网站 的用户访问记录（只要是国内网站，朝廷肯定能拿到；至于国外网站，要看情况）  假设4：  朝廷针对 Tor 部署了关联分析的系统（这只是假设，到底有没有，俺不晓得）   如果上述这 N 个假设【 
    同时成立
    】，那么，经过足够长时间的积累（具体需要多长时间，取决于你发帖的频繁度），关联分析系统可以猜测出你是谁。    
       ◇如何【规避】（针对 Tor 的）流量关联分析？ 
  要规避“针对 Tor 的流量关联分析”，目前最直接有效的方法是：多重代理。因为一旦用了多重代理，Tor 的流量类型就被掩盖掉了。  比方说：如果你使用 VPN 作为 Tor 的前置代理（Tor over VPN），那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 是加密滴）ISP【看不到】你的 Tor 流量。在这种情况下，“流量关联分析”的【难度】将提高 N 个数量级。   除了“针对 Tor 的流量关联分析”，还有其它的流量分析技术。考虑到篇幅，就不深入介绍了。等俺有空，单独写一篇博文，专门聊这个话题。         ★【双重代理】方面的问题 
  如果你对“双重代理”还不太了解，请先看俺之前的博文《  如何隐藏你的踪迹，避免跨省追捕[5]：用多重代理隐匿公网IP  》。        ◇为啥要使用双重代理？ 
  俺总结了如下几个原因：   
   原因1
    因为 Tor 的影响力很大，GFW 对 Tor 进行重点封杀。全球大多数的 Tor 中继节点都被 GFW 列入“IP 黑名单”。所以天朝的网友，如果单独使用 Tor，很难联网成功。这种情况下，就需要使用双重代理。   
   原因2
    所有的软件都可能有缺陷（Tor 也不例外）。如果你仅仅使用 Tor，万一 Tor 出现安全漏洞并且被攻击者利用，那么攻击者就有可能对你进行逆向追溯（说不定能追溯出你的真实公网 IP）。  而如果使用多重代理，即使出现上述风险，攻击者也只能追踪到 Tor 的前置代理，而不会直接追踪到你本人。这样一来，风险大大降低。   
   原因3
    前面提到，全球的 Tor 网络中可能会有陷阱节点。虽然你可以利用俺刚才介绍的方法，排除危险国家/地区的节点，但并不能确保万无一失。  比如说你碰到某个极小概率事件——你使用的线路上，碰巧三个节点都是陷阱——这种情况下，你的真实公网 IP 会暴露。  但如果你用了双重代理，即使碰到这种小概率事件，只会暴露你使用的前置代理服务器的 IP，而【不会暴露】你的本人的公网 IP。   举例：      
一个月前（2013年10月），美国地下网络“丝绸之路”的站长被 FBI 逮捕。他一直使用 Tor，为啥会暴露？  其中一种说法是：他没有使用双重代理。而 FBI 利用 NSA 的技术（据传闻是流量关联分析技术），再加上 FBI 本身也设置了蜜罐节点，最终定位了“丝绸之路”站长。    
  
   原因4
    刚才介绍了针对 Tor 的“流量关联分析”。如果你使用双重代理，会降低被关联分析的风险。        ◇哪些工具可以跟 Tor 组合双重代理？ 
  大部分翻墙工具都可以跟 Tor 组合。比如：所有的 VPN，无界、自由门、赛风、世界通、等等。  另外，你也可以使用公网上的一些代理服务器（公共代理），用来跟 Tor 组合成双重代理。前提是：这些“公共代理”【必须支持】HTTPS 代理或 SOCKS 代理。  如何用 Tor 组合“公共代理”，请看《  2012年9月翻墙快报（兼谈复活 Tor 的方法）  》。        ◇为啥 GAE 翻墙工具无法跟 Tor 组合成双重代理？ 
  貌似 GAE 的翻墙工具，都只提供 HTTP 代理，没有提供【原生的】HTTPS 代理。而 Tor 客户端需要使用 HTTPS 跟中转节点进行数据传输。        ◇为啥 GoAgent【无法】跟 Tor 组合成“双重代理”？ 
  GoAgent 也是 GAE 翻墙工具的一种，请参见前一个问题的解答。         ★其它方面的问题 
       ◇为啥要使用虚拟机？ 
  虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。  具体的原理图，请看《  如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网 IP（原理介绍）  》   举例：      
前几个月，美国 FBI 为了打击儿童色情，逮捕了 Tor 匿名托管服务 Freedom Hosting 的负责人。然后 FBI 在该服务器上设置了木马。  该木马会利用 Tor 内置的 Firefox 浏览器的一个安全漏洞，来收集 Tor 用户的真实公网 IP。  （木马会向 FBI 的服务器发送一个信息，FBI 的服务器就会记录下发送端的 IP。如果没有虚拟机，这个【 
    直接联网
    】的企图就得逞啦）。    
  如果你之前没用过操作系统虚拟机，可以先看俺写的系列教程《  扫盲操作系统虚拟机  》。        ◇如何【跨机器】共享 Tor Browser 的翻墙通道？ 
  用记事本（notepad）打开 Tor 的配置文件（如何找到配置文件，本文前面提到过）。在该文件末尾新增一行。  如果是 Tor Browser 软件包，加入如下这行      SocksListenAddress 0.0.0.0:9150    
 如果是 Tor 的其它软件包，加入如下这行      SocksListenAddress 0.0.0.0:9050    
 修改完记得保存，然后记得重启 Tor。之后，Tor 的监听端口就会绑定到 
   0.0.0.0
   这个地址——意思就是说，任何地址（任何机器）都可以连接到 Tor 的监听端口。  （唠叨一下：如果要跨机器共享 Tor 的 SOCKS 端口，别忘了修改防火墙的配置，允许 Tor 监听端口的 TCP 连入）        ◇啥是 obfs / obfsproxy？ 
  这玩意儿也是 Tor 官方提供的工具，主要是用来混淆 Tor 的流量。  因为 Tor 的名气太大了，很多网络监控系统（比如天朝大名鼎鼎的 GFW）可以根据网络传输内容，判断该流量是否为 Tor 的流量。如果是 Tor 流量就进行阻断。  （请注意：“判断流量类型”【不等于】“解密内容”）。  为了应对这类威胁，Tor 官方提供了一个额外的工具，用来混淆流量，让监控系统识别不出。原理图如下：        
  虽然有 obfsproxy 这个工具，但是对于那些非常重视安全性的网友，俺依然提倡用“双重代理”——双重代理的优点刚才分析过，此处不再罗嗦。         ★结尾 
  本文写得有点仓促，涉及的问题未必覆盖到方方面面。如果你觉得本文还有哪些问题没有覆盖到，欢迎到俺博客留言。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何翻墙  》（传说中的翻墙入门教程，不定期更新）  《  戴“套”翻墻的方法  》  《  “如何翻墙”系列：扫盲 Tor Browser 7.5——关于 meek 插件的配置、优化、原理  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  扫盲操作系统虚拟机  》（系列）  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/11/tor-faq.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    
    <meta name="author" content="觀點" />

    
    <meta property="og:title" content="“如何翻墙”系列：关于 Tor 的常见问题解答" />
    <meta property="twitter:title" content="“如何翻墙”系列：关于 Tor 的常见问题解答" />
    

  <link rel="stylesheet" type="text/css" href="/opinion/style.css" />
  <link rel="alternate" type="application/rss+xml" title="觀點 - 從草根到大師 git.io/JJCxS" href="/opinion/feed.xml" />

  <!-- Social Share Kit CSS -->
  <link rel="stylesheet" href="/opinion/assets/css/social-share-kit.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/bootstrap.min.css" type="text/css">
  <script type="text/javascript" src="/opinion/assets/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="/opinion/assets/js/page.js"></script>

</head>

  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      

      <div class="site-info">
        <h1 class="site-name" style="display: inline-block;"><a href="/opinion/">觀點</a></h1>
        <i class="site-description" style="font-size: 12px;">從草根到大師 git.io/JJCxS</i>
      </div>

      <nav>
        <span id="search-container" >
          <a href="/opinion/tools"><i class="fa fa-bookmark twitter" title="百宝箱"></i></a>
        <a><i class="fa fa-search" title="限前100結果"></i></a><input type="text" id="search-input" placeholder="標題 作者 來源 日期 (17499)"
          style="margin: 10px 0px 0px 0px; height: 30px;width: auto" title="本站最正確的打開方式">
        </span>
        
        
        <a href="/opinion/categories" style="color: Tomato;"><i class="fa fa-tags" title="分类"></i></a>
        
        
        
        <a href="https://be4.herokuapp.com/" style="color: #003366;"><i class="fa fa-comments" title="论坛"></i></a>
        
        
        
        <a href="/opinion/about"><i class="fa fa-info-circle" title="关于"></i></a>
        
        
        <a title="电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇，del同来源旧一篇" onclick="toggle_visibility('help')"><i class="fa fa-question-circle"></i></a>
        <a id="fa-home" href="https://nodebe4.github.io" title="BE4服务列表" onclick="//toggle_visibility('site-list')"><i class="fa fa-home" aria-hidden="true"></i></a>
      </nav>

    </header>
    <div id="site-list" class="tags" style="display: block;text-align: right;border-bottom: 1px solid lightGray;"><noscript><span style="background-color: #e8e8e8;color: #d10000;font-size: 14px;">开启浏览器JavaScript以获取搜索功能和更好的浏览体验</span></noscript></div>
    <p id="help" style="font-size: 14px;display: none;text-align: right;"><span style="color:green;">电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇, del同来源旧一篇</span>; <span style="color:orange">对应触屏FAB：上下右左</span>; 轉Markdown<a href="https://euangoddard.github.io/clipboard2markdown/"><i class="fa fa-file-text-o"></i></a></p>
  </div>
</div>

<script type="text/javascript" >
  function toggle_visibility(id){
    var help = document.getElementById(id)
    if (help.style.display=='none'){
      help.style.display='block';
    }else{
      help.style.display='none';
    }
  }

  const url = "https://nodebe4.github.io/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    // var homebtn = document.getElementById("fa-home")
    // homebtn.removeAttribute("href")
    var content = document.getElementById("site-list");
    content.innerHTML = ''
    var ul = document.createElement("ul")
    ul.classList.add("label")
    content.appendChild(ul)
    var cnt = 0

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var li = document.createElement('li')
        li.classList.add("tag")
        li.id = 'site-' + cnt
        ul.appendChild(li)
        var a0 = document.createElement('a')
        li.appendChild(a0)
        a0.href = item.url[0]
        var span = document.createElement('span')
        a0.appendChild(span)
        span.innerText = item['name']
        // span.style.backgroundColor = item['background-color']
        // span.style.color='#E4CBC3'
        span.style.color = item['background-color']
        span.style['font-size'] = '14px'
        cnt += 1
        // test_alive(li.id, a0.href)
      })
    })
  })

function test_alive(id, url){
  var divstatus = document.getElementById(id)
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        if (data.responseText.includes('502')){
          // divstatus.style.color='#FBB7B7'
          // divstatus.style.color='gray'
          // divstatus.title = "服务器无响应"
          divstatus.parentNode.removeChild(divstatus)
        }else{
          // divstatus.style.color='#B6FAC8'
          divstatus.title = data.responseText
        }
      }
  });
  return divstatus
}
</script>



    <!-- Left & centered positioning -->

<div class="ssk-sticky ssk-right ssk-center ssk-sticky-hide-xs ssk-group ssk-round">
  
    <a href="https://be4news.pythonanywhere.com/archivenow/ia/https%3A%2F%2Fprogram-think.blogspot.com%2F2013%2F11%2Ftor-faq.html" class="ssk ssk-link" title="存到互联网档案馆" target="_blank"></a>
    <a href="https://www.facebook.com/sharer.php?u=https://program-think.blogspot.com/2013/11/tor-faq.html" class="ssk ssk-facebook"></a>
    <a href="https://twitter.com/intent/tweet?url=https://program-think.blogspot.com/2013/11/tor-faq.html&text=“如何翻墙”系列：关于 Tor 的常见问题解答&hashtags=觀點" class="ssk ssk-twitter"></a>
    <a href="https://reddit.com/submit?url=https://program-think.blogspot.com/2013/11/tor-faq.html&title=“如何翻墙”系列：关于 Tor 的常见问题解答" class="ssk ssk-reddit"></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://program-think.blogspot.com/2013/11/tor-faq.html&title=“如何翻墙”系列：关于 Tor 的常见问题解答" class="ssk ssk-linkedin"></a>
    <a href="mailto:{email_address}?subject=“如何翻墙”系列：关于 Tor 的常见问题解答&body=

      “如何翻墙”系列：关于 Tor 的常见问题解答  
  
    
      
    
  
  
Tor 是一个很老牌的翻墙工具，也是俺在博客中推荐的第一款翻墙工具——当时正赶上朝廷的60大寿，GFW 加强封锁，俺就写了一篇《  “如何翻墙”系列：戴“套”翻墻的方法  》，算是 Tor 的入门教程。  4年过去了，虽然新的翻墙工具不断涌现，但 Tor 的影响力和用户数仍然持续增加—— 
   很多人不仅仅是用 Tor 来翻墙，更是用 Tor 来隐匿自己的上网行踪
   。在这期间，俺也收到很多读者来信/博客留言，询问关于 Tor 的各种问题。甚至有热心读者建议俺专门写一篇博文，聊聊 Tor 的高级话题。  为了帮大伙儿更好地使用 Tor，今天再发一篇教程，解答 Tor 的各种常见问题。  
       
        
        ★Tor 是啥玩意儿？ 
  Tor 是洋文 （The Onion Router）的缩写，中文又称“洋葱网络/洋葱路由”。简单而言，这是一款专门设计用于隐匿上网身份的工具。  Tor 的官网在“  这里  ”。关于 Tor 的更详细介绍，请看维基百科的“  这里  ”。         ★哪些网友需要使用 Tor？ 
  前面说了，设计 Tor 的主要目的是为了上网隐匿身份。所以，跟其它的翻墙工具不同——它的重点功能是"隐匿性"，"翻墙"只是顺带的功能。  具有如下特点的用户，可以考虑使用 Tor。        ◇为了隐匿自己所在的国家 
  比如有些视频网站为了版权的原因，会限制某些国家的IP，那么你可以利用 Tor 来伪装成别国的网民，就可以绕过视频网站的版权限制。        ◇为了隐匿自己的公网IP 
  比如你想在网上发布敏感的政治言论，那隐匿公网 IP 是避免被跨省追捕的【 
   必要条件
   】。  （提醒一下：“隐匿公网 IP”只是必要条件，不是充分条件！要避免被跨省，需要考虑多个层面的防范，具体请看《  如何隐藏你的踪迹，避免跨省追捕  》系列博文）。  像俺这种长期抹黑朝廷的博主，Tor 是上网的必备工具。俺即使访问国内网站，也要走“基于 Tor 的多重代理”。（关于“多重代理”，后面还会提到）        ◇为了保护隐私 
  刚才已经说了 Tor 的特点，在隐私保护方面，Tor 优于其它的翻墙工具。为了说明 Tor 在隐私方面的优点，拿 Tor 跟 VPN 做一个对比。  很多网友使用 VPN 翻墙，而且长期使用固定的 VPN 提供商。万一 VPN 提供商在 VPN 服务器上记录你的上网行为，那你的 
   所有上网行踪
   就暴露无遗。  而如果使用 Tor，就可以大大降低这种风险——具体原因，下面会聊。         ★软件安装方面的问题 
       ◇Vidalia 跟 Tor 是啥关系？ 
  Tor 本身只提供命令行，没有图形界面。Vidalia 是专门为 Tor 量身打造的图形界面。  在 Vidalia 的图形化界面上，你不但可以配置各项参数，还可以监控 Tor 的流量和 Tor 的线路（后面会提到）。  补充说明：  从2014年之后，Tor 社区已经【不再】维护 Vidalia 这个软件了。所以俺后来又写了一篇：《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》        ◇如何获取 Tor 的软件包？ 
  关于这个问题，在 2009 年的入门教程《  “如何翻墙”系列：戴“套”翻墻的方法  》中已经介绍过，此处不再罗嗦。        ◇应该选择哪个安装包？ 
  先说明一下，Tor 是跨平台的。同时支持主流的：Windows、Linux、Mac OS。  在 Tor 官网有两个下载页面，分别如下：    https://www.torproject.org/download/download-easy.html.en   （这个是面向菜鸟用户的，每个操作系统只提供一个下载链接）    https://www.torproject.org/download/download.html   （这个是面向高级用户的，每个操作系提供多种软件包供你选择）   后一个链接提供的多种选择，俺稍微解释一下。   
   Tor Browser Bundle
    这个软件包捆绑了 Firefox 浏览器（ 
   对于 2.3.25 之后的版本，监听端口改为9150
   ）。  
   Expert Bundle
    这个软件包是面向高级用户，只有赤裸裸的 Tor，没有其它额外的东西（没有图形界面）。        ◇Bridge 和 Relay 有啥区别？ 
  Bridge 的中文就是“网桥”。Tor 的网桥是一种特殊的中转节点。它跟其它中转节点的差异在于：普通的中转节点，其信息会被加入到 Tor 在全球的目录服务器，所以普通的中转节点会被所有的人看到，并用来进行流量中转。  而你自己搭建的网桥，其信息不会被加入到全球的目录服务器——只会被你自己所用。        ◇Linux 用户如何获取软件包？ 
  因为 Tor 的名气大，那些主流的发行版基本上都提供 Tor 相关的软件包。如果你用的是主流的发行版，直接用系统的软件包管理工具，就可以自动安装/自动升级 Tor。        ◇Mac OS X 用户如何获取软件包？ 
  使用苹果系统的用户，可以看官网的”  这个文档  “。里面有介绍如何通过“Homebrew 包管理器”安装 Tor。         ★浏览器方面的问题 
       ◇如何配置浏览器的代理？ 
  （如果你使用的是 Tor Browser Bundle 内置的 Firefox，就无需再额外配置浏览器代理了）  早先的 Tor 客户端同时提供 HTTP 代理和 SOCKS，大概从 2013年开始，新版本的客户端不再提供 HTTP 代理了。所以原先的 
   8118
   代理端口也就废弃了。  今后大伙儿需要用 Tor 提供的 SOCKS 代理来上网，端口号如下：  
   9150
   （2.3.25版本之后的 Tor Browser Bundle 软件包）  
   9050
   （其它的软件包）   Firefox 的代理设置如下图（至于 Chrome、IE、或其它浏览器，列位看官请依样画葫芦）：        
  （顺便说一下：SOCKS 代理其实比 HTTP 代理更好，关于两者的差别，俺抽空写一篇扫盲）        ◇如何判断自己的浏览器是否在走 Tor 的线路？ 
  Tor 官网提供了一个测试界面，网址是  https://check.torproject.org/  猛击该超链接，会打开一个界面。  如果你的浏览器已经在使用 Tor 的线路，会出现一个【绿色】洋葱头，以及一行绿色的洋文提示。  如果你的浏览器没有走 Tor 的线路，会出现一个【带红色打叉】的洋葱头，同时还有一行红色的洋文警告。        ◇Tor Browser Bundle 内置的 Firefox，有啥特殊之处？ 
  这个内置的 Firefox 跟普通的 Firefox 有如下几个差异：   
   1. 版本差异
    这个内置的 Firefox 采用 Mozilla 官方提供的长期支持版本（洋文叫 ESR），而不是最新版本。  因为最新版本总是会增加很多新功能，可能会引入潜在的安全漏洞；而 ESR版本 相对而言比较稳健。  
   2. 配置差异
    这个内置的 Firefox 专门进行了一些安全方面的定制（比如禁用 JavaScript）        ◇为啥 Tor Browser Bundle 内置的浏览器无法看视频？ 
  因为这个内置的浏览器没有装 Flash 播放插件。而大多数视频网站需要 Flash 插件来播放视频。         ★隐私方面的问题 
  这一节是本文的重点，看仔细喽。        ◇Tor 客户端如何建立联网的线路？ 
  如果你比较好奇，为啥 Tor 的隐匿保护好于其它翻墙工具？那么有必要了解一下 Tor 客户端的联网机制。下面这三张图来自 Tor 的官网。因为图片中是洋文说明，俺稍微修改了一下，注上中文。        
 第1图：当 Tor 客户端启动之后，会首先连接 Tor 的目录服务器。从目录服务器中获取全球的 Tor 节点信息。        
 第2图：假设你要访问 网站1，那么 Tor 客户端会随机挑选三个节点用于中转。  为了打字方便，俺把这三个节点分别称为：  
   入口节点
   ：  如果你仅仅使用 Tor 联网，该节点直接跟你的电脑相连；如果你使用双重代理，入口节点跟你的前置代理相连。  
   中间节点
   ：  介于入口节点和出口节点之间（这个节点的威胁最小）。  
   出口节点
   ：  该节点直接跟你访问的目标网站相连（ 
   这个节点的威胁最大
   ）。   这三个节点中，只有“出口节点”会看到你的“上网行为”（图中标红色的虚线，表示 Tor 节点【 
   会看到
   】“原始流量”）。  所谓的“上网行为”包括：你访问了哪个网站，你从该网站传输的流量。  如果这个网站使用【加密的】HTTPS 协议，“出口节点”看到的“原始流量”是 HTTPS 的密文，没啥关系；反之，如果这个网站使用【明文的】HTTP 协议，那么"出口节点"会看到你从该网站发送/接受的内容（ 
   这是主要风险点
   ）。  除了“出口节点”，其它节点完全无法知道你的上网行为（图中标绿色的线，表示 Tor 节点 
   看不到
   “原始流量”）。        
 第3图：Tor 为了加强隐匿性，会动态变化中转线路。也就是说，每隔一段时间（约10分钟），就会随机挑选三个节点，重新构造一条传输线路。  因为线路动态变化，“出口节点”自然也动态变化。所以，即使“出口节点”偷窥你的上网行为，也只能看到一个短暂的片段。        ◇Tor 节点是否会偷窥到自己的隐私/上网行为？ 
  如果你弄懂了前一个问题的三张原理图，那你自然就知道， 
   只有【出口节点】会看到你的上网行为
   。        ◇如何避免 Tor 节点看到你的上网行为？ 
  前面说了，“上网行为”至少包括两部分：  1. 你访问了哪个网站  2. 你从网站传输（发送、接受）的内容/数据   对于第1点，是【 
   无解
   】滴！  不管采用哪种工具来隐匿行踪，最终，你都需要有某个“主机”帮你把数据送到你要访问的网站。所以，这个“主机”必然就知道你访问了啥网站。  对于第2点，是【 
   有解
   】滴。  主要方法就是：尽量采用 HTTPS 协议。比如像维基百科，同时支持 HTTP 和 HTTPS。那么你就应该采用 HTTPS 方式访问。这种情况下，Tor 的“出口节点”只知道你访问了维基百科，但是无法知道你访问了哪个页面。  为了养成经常使用 HTTPS 的习惯，建议大伙儿安装 EFF 官方提供的  HTTPS everywhere         ◇什么是“陷阱节点”/“蜜罐节点”？ 
  某些国家（比如咱们天朝）的政府会设置“蜜罐节点”。所谓的“蜜罐节点”，通俗的说，就是陷阱。  如果你使用的线路中，【出口节点】正好是蜜罐，那么该蜜罐就会窥探到你的上网行为——前面已经说了，【出口节点】肯定会知道：你的访问了哪个网站。  更糟糕的是——假如你访问的目标网站【没有】HTTPS 加密，充当“出口节点”的蜜罐就会知道：你浏览的页面的内容。        ◇如何避免“陷阱节点”/“蜜罐节点”？ 
  比较简单的做法，就是通过修改 Tor 的配置文件，规避这些不安全国家的节点。  对于天朝的网友，你至少需要屏蔽“大陆、香港、澳门”这三个节点。因为这三个地区都可能被六扇门设置蜜罐。  Tor 的配置文件名叫 
   torrc
   ，这是一个文本文件，用记事本就可以打开。（如果你找不到该文件，在系统盘中搜索一下 
   torrc
   这个文件名）  在该文件末尾，加入下面这行（ 
   ExcludeNodes
   表示排除这些国家/地区的节点， 
   StrictNodes
   表示强制执行）。      ExcludeNodes  {cn},{hk},{mo}
StrictNodes  1    
 关于【StrictNodes】的语法，俺补充说明一下：  如果不设置 
   StrictNodes 1
   ，Tor 客户端首先也会规避 
   ExcludeNodes
   列出的这些国家。但如果 Tor 客户端找不到可用的线路，就会去尝试位于排除列表中的节点。  如果设置了 
   StrictNodes 1
   ，即使 Tor 客户端找不到可用的线路，也不会去尝试这些国家的节点。   除了上述三个地区，还有几个国家跟天朝串通一气。如果你对安全性的要求比较高，可以把这些国家也列入 Tor 的排除节点列表。  下面给出这些流氓国家的代码，你依样画葫芦加入到 
   ExcludeNodes
   那一行，国家代码之间用逗号分隔。       
    
     
      
       代码
      
      
       国别
      
     
     
      
       {kp}
      
      
       北朝鲜
      
     
     
      
       {ir}
      
      
       伊朗
      
     
     
      
       {sy}
      
      
       叙利亚
      
     
     
      
       {pk}
      
      
       巴基斯坦
      
     
     
      
       {cu}
      
      
       古巴
      
     
     
      
       {vn}
      
      
       越南
      
     
     
      
       {ru}
      
      
       俄罗斯
      
     
     
      
       {by}
      
      
       白俄罗斯
      
     
    
    
 注：耍流氓的政权有很多，上述表格仅供参考，肯定【不全】。         ◇如何【更严格地】限制“Tor 节点”？ 
  在本文发布之后6年（2019），俺在《  近期安全动态和点评（2019年3季度）  》一文中介绍了【更严格】的 Tor 节点配置招数。对安全性要求【很高】的读者，可以去看看。  那篇提到了三个招数（3个注意事项），其中一个是【白名单】，配置语法如下：   
   EntryNodes
    限定只使用某些国家的节点作为【入口节点】。   
   ExitNodes
    限定只使用某些国家的节点作为【出口节点】。        ◇Tor 的加密流量能否被【破解】？ 
  根据斯诺登曝光的材料，NSA 目前具备的运算能力，可以解密很大一部分 Tor 流量。  因为目前（2013年）的 Tor 中继服务器，大部分还在使用 1024 位的 DHE 密钥，这类密钥虽然普通人难以破解，但是 NSA 掌握的运算能力可以在几小时内暴力破解。目前只有 10% 左右的中继服务器采用 ECDHE 密钥（基于椭圆曲线）。这类 ECDHE 密钥 NSA 比较难破解（更多介绍请看“  这篇报道  ”）。  至于天朝方面，肯定【没有】NSA 这么牛的破解能力。所以墙内的同学们，咱们暂时还不用担心这个问题 :)  另外，等到大部分中继服务器升级到 2.4 版本，ECDHE密钥 的使用就会普及。到那时候，（DHE 密钥被破解的）风险会减低。  注：  本小节提及了好几种【密钥交换算法】。如果你对这方面感兴趣，可以看如下这篇博文，介绍了相关算法的原理。  《  扫盲 HTTPS 和 SSL/TLS 协议[3]：密钥交换（密钥协商）算法及其原理  》        ◇啥是【流量关联分析】？ 
  先声明：流量关联分析有很多种。这里说的是【 
   针对 Tor
   】的流量关联分析”。  “关联分析”是数据挖掘的一种手段——先积累足够多的数据，然后通过某种算法找出数据之间的某些相关性特征。考虑到数据挖掘不是本文的主题，就不深入介绍了。  简单而言，如果某个攻击者能够监控你接入 Tor 网络的流量（入口节点之前的流量）以及你离开 Tor 网络的流量（出口节点之后的流量）。那么经过足够长时间的数据积累，攻击者就可以利用数据挖据【猜测】出：某些网络行为其实是来自某个公网 IP 的用户。   举例：      
如果你仅仅使用 Tor（没用双重代理）联网，然后经常到 A网站 发敏感言论。  假设1：  如果 GFW 对所有的 Tor 流量都做了记录（这只是假设，到底有没有，俺不晓得）  假设2：  A网站 对所有的用户留言做了记录（很多的国内网站都会记录）  假设3：  朝廷可以获取 A网站 的用户访问记录（只要是国内网站，朝廷肯定能拿到；至于国外网站，要看情况）  假设4：  朝廷针对 Tor 部署了关联分析的系统（这只是假设，到底有没有，俺不晓得）   如果上述这 N 个假设【 
    同时成立
    】，那么，经过足够长时间的积累（具体需要多长时间，取决于你发帖的频繁度），关联分析系统可以猜测出你是谁。    
       ◇如何【规避】（针对 Tor 的）流量关联分析？ 
  要规避“针对 Tor 的流量关联分析”，目前最直接有效的方法是：多重代理。因为一旦用了多重代理，Tor 的流量类型就被掩盖掉了。  比方说：如果你使用 VPN 作为 Tor 的前置代理（Tor over VPN），那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 是加密滴）ISP【看不到】你的 Tor 流量。在这种情况下，“流量关联分析”的【难度】将提高 N 个数量级。   除了“针对 Tor 的流量关联分析”，还有其它的流量分析技术。考虑到篇幅，就不深入介绍了。等俺有空，单独写一篇博文，专门聊这个话题。         ★【双重代理】方面的问题 
  如果你对“双重代理”还不太了解，请先看俺之前的博文《  如何隐藏你的踪迹，避免跨省追捕[5]：用多重代理隐匿公网IP  》。        ◇为啥要使用双重代理？ 
  俺总结了如下几个原因：   
   原因1
    因为 Tor 的影响力很大，GFW 对 Tor 进行重点封杀。全球大多数的 Tor 中继节点都被 GFW 列入“IP 黑名单”。所以天朝的网友，如果单独使用 Tor，很难联网成功。这种情况下，就需要使用双重代理。   
   原因2
    所有的软件都可能有缺陷（Tor 也不例外）。如果你仅仅使用 Tor，万一 Tor 出现安全漏洞并且被攻击者利用，那么攻击者就有可能对你进行逆向追溯（说不定能追溯出你的真实公网 IP）。  而如果使用多重代理，即使出现上述风险，攻击者也只能追踪到 Tor 的前置代理，而不会直接追踪到你本人。这样一来，风险大大降低。   
   原因3
    前面提到，全球的 Tor 网络中可能会有陷阱节点。虽然你可以利用俺刚才介绍的方法，排除危险国家/地区的节点，但并不能确保万无一失。  比如说你碰到某个极小概率事件——你使用的线路上，碰巧三个节点都是陷阱——这种情况下，你的真实公网 IP 会暴露。  但如果你用了双重代理，即使碰到这种小概率事件，只会暴露你使用的前置代理服务器的 IP，而【不会暴露】你的本人的公网 IP。   举例：      
一个月前（2013年10月），美国地下网络“丝绸之路”的站长被 FBI 逮捕。他一直使用 Tor，为啥会暴露？  其中一种说法是：他没有使用双重代理。而 FBI 利用 NSA 的技术（据传闻是流量关联分析技术），再加上 FBI 本身也设置了蜜罐节点，最终定位了“丝绸之路”站长。    
  
   原因4
    刚才介绍了针对 Tor 的“流量关联分析”。如果你使用双重代理，会降低被关联分析的风险。        ◇哪些工具可以跟 Tor 组合双重代理？ 
  大部分翻墙工具都可以跟 Tor 组合。比如：所有的 VPN，无界、自由门、赛风、世界通、等等。  另外，你也可以使用公网上的一些代理服务器（公共代理），用来跟 Tor 组合成双重代理。前提是：这些“公共代理”【必须支持】HTTPS 代理或 SOCKS 代理。  如何用 Tor 组合“公共代理”，请看《  2012年9月翻墙快报（兼谈复活 Tor 的方法）  》。        ◇为啥 GAE 翻墙工具无法跟 Tor 组合成双重代理？ 
  貌似 GAE 的翻墙工具，都只提供 HTTP 代理，没有提供【原生的】HTTPS 代理。而 Tor 客户端需要使用 HTTPS 跟中转节点进行数据传输。        ◇为啥 GoAgent【无法】跟 Tor 组合成“双重代理”？ 
  GoAgent 也是 GAE 翻墙工具的一种，请参见前一个问题的解答。         ★其它方面的问题 
       ◇为啥要使用虚拟机？ 
  虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。  具体的原理图，请看《  如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网 IP（原理介绍）  》   举例：      
前几个月，美国 FBI 为了打击儿童色情，逮捕了 Tor 匿名托管服务 Freedom Hosting 的负责人。然后 FBI 在该服务器上设置了木马。  该木马会利用 Tor 内置的 Firefox 浏览器的一个安全漏洞，来收集 Tor 用户的真实公网 IP。  （木马会向 FBI 的服务器发送一个信息，FBI 的服务器就会记录下发送端的 IP。如果没有虚拟机，这个【 
    直接联网
    】的企图就得逞啦）。    
  如果你之前没用过操作系统虚拟机，可以先看俺写的系列教程《  扫盲操作系统虚拟机  》。        ◇如何【跨机器】共享 Tor Browser 的翻墙通道？ 
  用记事本（notepad）打开 Tor 的配置文件（如何找到配置文件，本文前面提到过）。在该文件末尾新增一行。  如果是 Tor Browser 软件包，加入如下这行      SocksListenAddress 0.0.0.0:9150    
 如果是 Tor 的其它软件包，加入如下这行      SocksListenAddress 0.0.0.0:9050    
 修改完记得保存，然后记得重启 Tor。之后，Tor 的监听端口就会绑定到 
   0.0.0.0
   这个地址——意思就是说，任何地址（任何机器）都可以连接到 Tor 的监听端口。  （唠叨一下：如果要跨机器共享 Tor 的 SOCKS 端口，别忘了修改防火墙的配置，允许 Tor 监听端口的 TCP 连入）        ◇啥是 obfs / obfsproxy？ 
  这玩意儿也是 Tor 官方提供的工具，主要是用来混淆 Tor 的流量。  因为 Tor 的名气太大了，很多网络监控系统（比如天朝大名鼎鼎的 GFW）可以根据网络传输内容，判断该流量是否为 Tor 的流量。如果是 Tor 流量就进行阻断。  （请注意：“判断流量类型”【不等于】“解密内容”）。  为了应对这类威胁，Tor 官方提供了一个额外的工具，用来混淆流量，让监控系统识别不出。原理图如下：        
  虽然有 obfsproxy 这个工具，但是对于那些非常重视安全性的网友，俺依然提倡用“双重代理”——双重代理的优点刚才分析过，此处不再罗嗦。         ★结尾 
  本文写得有点仓促，涉及的问题未必覆盖到方方面面。如果你觉得本文还有哪些问题没有覆盖到，欢迎到俺博客留言。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何翻墙  》（传说中的翻墙入门教程，不定期更新）  《  戴“套”翻墻的方法  》  《  “如何翻墙”系列：扫盲 Tor Browser 7.5——关于 meek 插件的配置、优化、原理  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  扫盲操作系统虚拟机  》（系列）  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/11/tor-faq.html 
    
    
  
  
    
         
    
    
    
 
    
  

" class="ssk ssk-email"></a>
    <a href="http://pinterest.com/pin/create/link/?url=https://program-think.blogspot.com/2013/11/tor-faq.html" class="ssk ssk-pinterest"></a>
    <a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://program-think.blogspot.com/2013/11/tor-faq.html&title=“如何翻墙”系列：关于 Tor 的常见问题解答&caption=

      “如何翻墙”系列：关于 Tor 的常见问题解答  
  
    
      
    
  
  
Tor 是一个很老牌的翻墙工具，也是俺在博客中推荐的第一款翻墙工具——当时正赶上朝廷的60大寿，GFW 加强封锁，俺就写了一篇《  “如何翻墙”系列：戴“套”翻墻的方法  》，算是 Tor 的入门教程。  4年过去了，虽然新的翻墙工具不断涌现，但 Tor 的影响力和用户数仍然持续增加—— 
   很多人不仅仅是用 Tor 来翻墙，更是用 Tor 来隐匿自己的上网行踪
   。在这期间，俺也收到很多读者来信/博客留言，询问关于 Tor 的各种问题。甚至有热心读者建议俺专门写一篇博文，聊聊 Tor 的高级话题。  为了帮大伙儿更好地使用 Tor，今天再发一篇教程，解答 Tor 的各种常见问题。  
       
        
        ★Tor 是啥玩意儿？ 
  Tor 是洋文 （The Onion Router）的缩写，中文又称“洋葱网络/洋葱路由”。简单而言，这是一款专门设计用于隐匿上网身份的工具。  Tor 的官网在“  这里  ”。关于 Tor 的更详细介绍，请看维基百科的“  这里  ”。         ★哪些网友需要使用 Tor？ 
  前面说了，设计 Tor 的主要目的是为了上网隐匿身份。所以，跟其它的翻墙工具不同——它的重点功能是"隐匿性"，"翻墙"只是顺带的功能。  具有如下特点的用户，可以考虑使用 Tor。        ◇为了隐匿自己所在的国家 
  比如有些视频网站为了版权的原因，会限制某些国家的IP，那么你可以利用 Tor 来伪装成别国的网民，就可以绕过视频网站的版权限制。        ◇为了隐匿自己的公网IP 
  比如你想在网上发布敏感的政治言论，那隐匿公网 IP 是避免被跨省追捕的【 
   必要条件
   】。  （提醒一下：“隐匿公网 IP”只是必要条件，不是充分条件！要避免被跨省，需要考虑多个层面的防范，具体请看《  如何隐藏你的踪迹，避免跨省追捕  》系列博文）。  像俺这种长期抹黑朝廷的博主，Tor 是上网的必备工具。俺即使访问国内网站，也要走“基于 Tor 的多重代理”。（关于“多重代理”，后面还会提到）        ◇为了保护隐私 
  刚才已经说了 Tor 的特点，在隐私保护方面，Tor 优于其它的翻墙工具。为了说明 Tor 在隐私方面的优点，拿 Tor 跟 VPN 做一个对比。  很多网友使用 VPN 翻墙，而且长期使用固定的 VPN 提供商。万一 VPN 提供商在 VPN 服务器上记录你的上网行为，那你的 
   所有上网行踪
   就暴露无遗。  而如果使用 Tor，就可以大大降低这种风险——具体原因，下面会聊。         ★软件安装方面的问题 
       ◇Vidalia 跟 Tor 是啥关系？ 
  Tor 本身只提供命令行，没有图形界面。Vidalia 是专门为 Tor 量身打造的图形界面。  在 Vidalia 的图形化界面上，你不但可以配置各项参数，还可以监控 Tor 的流量和 Tor 的线路（后面会提到）。  补充说明：  从2014年之后，Tor 社区已经【不再】维护 Vidalia 这个软件了。所以俺后来又写了一篇：《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》        ◇如何获取 Tor 的软件包？ 
  关于这个问题，在 2009 年的入门教程《  “如何翻墙”系列：戴“套”翻墻的方法  》中已经介绍过，此处不再罗嗦。        ◇应该选择哪个安装包？ 
  先说明一下，Tor 是跨平台的。同时支持主流的：Windows、Linux、Mac OS。  在 Tor 官网有两个下载页面，分别如下：    https://www.torproject.org/download/download-easy.html.en   （这个是面向菜鸟用户的，每个操作系统只提供一个下载链接）    https://www.torproject.org/download/download.html   （这个是面向高级用户的，每个操作系提供多种软件包供你选择）   后一个链接提供的多种选择，俺稍微解释一下。   
   Tor Browser Bundle
    这个软件包捆绑了 Firefox 浏览器（ 
   对于 2.3.25 之后的版本，监听端口改为9150
   ）。  
   Expert Bundle
    这个软件包是面向高级用户，只有赤裸裸的 Tor，没有其它额外的东西（没有图形界面）。        ◇Bridge 和 Relay 有啥区别？ 
  Bridge 的中文就是“网桥”。Tor 的网桥是一种特殊的中转节点。它跟其它中转节点的差异在于：普通的中转节点，其信息会被加入到 Tor 在全球的目录服务器，所以普通的中转节点会被所有的人看到，并用来进行流量中转。  而你自己搭建的网桥，其信息不会被加入到全球的目录服务器——只会被你自己所用。        ◇Linux 用户如何获取软件包？ 
  因为 Tor 的名气大，那些主流的发行版基本上都提供 Tor 相关的软件包。如果你用的是主流的发行版，直接用系统的软件包管理工具，就可以自动安装/自动升级 Tor。        ◇Mac OS X 用户如何获取软件包？ 
  使用苹果系统的用户，可以看官网的”  这个文档  “。里面有介绍如何通过“Homebrew 包管理器”安装 Tor。         ★浏览器方面的问题 
       ◇如何配置浏览器的代理？ 
  （如果你使用的是 Tor Browser Bundle 内置的 Firefox，就无需再额外配置浏览器代理了）  早先的 Tor 客户端同时提供 HTTP 代理和 SOCKS，大概从 2013年开始，新版本的客户端不再提供 HTTP 代理了。所以原先的 
   8118
   代理端口也就废弃了。  今后大伙儿需要用 Tor 提供的 SOCKS 代理来上网，端口号如下：  
   9150
   （2.3.25版本之后的 Tor Browser Bundle 软件包）  
   9050
   （其它的软件包）   Firefox 的代理设置如下图（至于 Chrome、IE、或其它浏览器，列位看官请依样画葫芦）：        
  （顺便说一下：SOCKS 代理其实比 HTTP 代理更好，关于两者的差别，俺抽空写一篇扫盲）        ◇如何判断自己的浏览器是否在走 Tor 的线路？ 
  Tor 官网提供了一个测试界面，网址是  https://check.torproject.org/  猛击该超链接，会打开一个界面。  如果你的浏览器已经在使用 Tor 的线路，会出现一个【绿色】洋葱头，以及一行绿色的洋文提示。  如果你的浏览器没有走 Tor 的线路，会出现一个【带红色打叉】的洋葱头，同时还有一行红色的洋文警告。        ◇Tor Browser Bundle 内置的 Firefox，有啥特殊之处？ 
  这个内置的 Firefox 跟普通的 Firefox 有如下几个差异：   
   1. 版本差异
    这个内置的 Firefox 采用 Mozilla 官方提供的长期支持版本（洋文叫 ESR），而不是最新版本。  因为最新版本总是会增加很多新功能，可能会引入潜在的安全漏洞；而 ESR版本 相对而言比较稳健。  
   2. 配置差异
    这个内置的 Firefox 专门进行了一些安全方面的定制（比如禁用 JavaScript）        ◇为啥 Tor Browser Bundle 内置的浏览器无法看视频？ 
  因为这个内置的浏览器没有装 Flash 播放插件。而大多数视频网站需要 Flash 插件来播放视频。         ★隐私方面的问题 
  这一节是本文的重点，看仔细喽。        ◇Tor 客户端如何建立联网的线路？ 
  如果你比较好奇，为啥 Tor 的隐匿保护好于其它翻墙工具？那么有必要了解一下 Tor 客户端的联网机制。下面这三张图来自 Tor 的官网。因为图片中是洋文说明，俺稍微修改了一下，注上中文。        
 第1图：当 Tor 客户端启动之后，会首先连接 Tor 的目录服务器。从目录服务器中获取全球的 Tor 节点信息。        
 第2图：假设你要访问 网站1，那么 Tor 客户端会随机挑选三个节点用于中转。  为了打字方便，俺把这三个节点分别称为：  
   入口节点
   ：  如果你仅仅使用 Tor 联网，该节点直接跟你的电脑相连；如果你使用双重代理，入口节点跟你的前置代理相连。  
   中间节点
   ：  介于入口节点和出口节点之间（这个节点的威胁最小）。  
   出口节点
   ：  该节点直接跟你访问的目标网站相连（ 
   这个节点的威胁最大
   ）。   这三个节点中，只有“出口节点”会看到你的“上网行为”（图中标红色的虚线，表示 Tor 节点【 
   会看到
   】“原始流量”）。  所谓的“上网行为”包括：你访问了哪个网站，你从该网站传输的流量。  如果这个网站使用【加密的】HTTPS 协议，“出口节点”看到的“原始流量”是 HTTPS 的密文，没啥关系；反之，如果这个网站使用【明文的】HTTP 协议，那么"出口节点"会看到你从该网站发送/接受的内容（ 
   这是主要风险点
   ）。  除了“出口节点”，其它节点完全无法知道你的上网行为（图中标绿色的线，表示 Tor 节点 
   看不到
   “原始流量”）。        
 第3图：Tor 为了加强隐匿性，会动态变化中转线路。也就是说，每隔一段时间（约10分钟），就会随机挑选三个节点，重新构造一条传输线路。  因为线路动态变化，“出口节点”自然也动态变化。所以，即使“出口节点”偷窥你的上网行为，也只能看到一个短暂的片段。        ◇Tor 节点是否会偷窥到自己的隐私/上网行为？ 
  如果你弄懂了前一个问题的三张原理图，那你自然就知道， 
   只有【出口节点】会看到你的上网行为
   。        ◇如何避免 Tor 节点看到你的上网行为？ 
  前面说了，“上网行为”至少包括两部分：  1. 你访问了哪个网站  2. 你从网站传输（发送、接受）的内容/数据   对于第1点，是【 
   无解
   】滴！  不管采用哪种工具来隐匿行踪，最终，你都需要有某个“主机”帮你把数据送到你要访问的网站。所以，这个“主机”必然就知道你访问了啥网站。  对于第2点，是【 
   有解
   】滴。  主要方法就是：尽量采用 HTTPS 协议。比如像维基百科，同时支持 HTTP 和 HTTPS。那么你就应该采用 HTTPS 方式访问。这种情况下，Tor 的“出口节点”只知道你访问了维基百科，但是无法知道你访问了哪个页面。  为了养成经常使用 HTTPS 的习惯，建议大伙儿安装 EFF 官方提供的  HTTPS everywhere         ◇什么是“陷阱节点”/“蜜罐节点”？ 
  某些国家（比如咱们天朝）的政府会设置“蜜罐节点”。所谓的“蜜罐节点”，通俗的说，就是陷阱。  如果你使用的线路中，【出口节点】正好是蜜罐，那么该蜜罐就会窥探到你的上网行为——前面已经说了，【出口节点】肯定会知道：你的访问了哪个网站。  更糟糕的是——假如你访问的目标网站【没有】HTTPS 加密，充当“出口节点”的蜜罐就会知道：你浏览的页面的内容。        ◇如何避免“陷阱节点”/“蜜罐节点”？ 
  比较简单的做法，就是通过修改 Tor 的配置文件，规避这些不安全国家的节点。  对于天朝的网友，你至少需要屏蔽“大陆、香港、澳门”这三个节点。因为这三个地区都可能被六扇门设置蜜罐。  Tor 的配置文件名叫 
   torrc
   ，这是一个文本文件，用记事本就可以打开。（如果你找不到该文件，在系统盘中搜索一下 
   torrc
   这个文件名）  在该文件末尾，加入下面这行（ 
   ExcludeNodes
   表示排除这些国家/地区的节点， 
   StrictNodes
   表示强制执行）。      ExcludeNodes  {cn},{hk},{mo}
StrictNodes  1    
 关于【StrictNodes】的语法，俺补充说明一下：  如果不设置 
   StrictNodes 1
   ，Tor 客户端首先也会规避 
   ExcludeNodes
   列出的这些国家。但如果 Tor 客户端找不到可用的线路，就会去尝试位于排除列表中的节点。  如果设置了 
   StrictNodes 1
   ，即使 Tor 客户端找不到可用的线路，也不会去尝试这些国家的节点。   除了上述三个地区，还有几个国家跟天朝串通一气。如果你对安全性的要求比较高，可以把这些国家也列入 Tor 的排除节点列表。  下面给出这些流氓国家的代码，你依样画葫芦加入到 
   ExcludeNodes
   那一行，国家代码之间用逗号分隔。       
    
     
      
       代码
      
      
       国别
      
     
     
      
       {kp}
      
      
       北朝鲜
      
     
     
      
       {ir}
      
      
       伊朗
      
     
     
      
       {sy}
      
      
       叙利亚
      
     
     
      
       {pk}
      
      
       巴基斯坦
      
     
     
      
       {cu}
      
      
       古巴
      
     
     
      
       {vn}
      
      
       越南
      
     
     
      
       {ru}
      
      
       俄罗斯
      
     
     
      
       {by}
      
      
       白俄罗斯
      
     
    
    
 注：耍流氓的政权有很多，上述表格仅供参考，肯定【不全】。         ◇如何【更严格地】限制“Tor 节点”？ 
  在本文发布之后6年（2019），俺在《  近期安全动态和点评（2019年3季度）  》一文中介绍了【更严格】的 Tor 节点配置招数。对安全性要求【很高】的读者，可以去看看。  那篇提到了三个招数（3个注意事项），其中一个是【白名单】，配置语法如下：   
   EntryNodes
    限定只使用某些国家的节点作为【入口节点】。   
   ExitNodes
    限定只使用某些国家的节点作为【出口节点】。        ◇Tor 的加密流量能否被【破解】？ 
  根据斯诺登曝光的材料，NSA 目前具备的运算能力，可以解密很大一部分 Tor 流量。  因为目前（2013年）的 Tor 中继服务器，大部分还在使用 1024 位的 DHE 密钥，这类密钥虽然普通人难以破解，但是 NSA 掌握的运算能力可以在几小时内暴力破解。目前只有 10% 左右的中继服务器采用 ECDHE 密钥（基于椭圆曲线）。这类 ECDHE 密钥 NSA 比较难破解（更多介绍请看“  这篇报道  ”）。  至于天朝方面，肯定【没有】NSA 这么牛的破解能力。所以墙内的同学们，咱们暂时还不用担心这个问题 :)  另外，等到大部分中继服务器升级到 2.4 版本，ECDHE密钥 的使用就会普及。到那时候，（DHE 密钥被破解的）风险会减低。  注：  本小节提及了好几种【密钥交换算法】。如果你对这方面感兴趣，可以看如下这篇博文，介绍了相关算法的原理。  《  扫盲 HTTPS 和 SSL/TLS 协议[3]：密钥交换（密钥协商）算法及其原理  》        ◇啥是【流量关联分析】？ 
  先声明：流量关联分析有很多种。这里说的是【 
   针对 Tor
   】的流量关联分析”。  “关联分析”是数据挖掘的一种手段——先积累足够多的数据，然后通过某种算法找出数据之间的某些相关性特征。考虑到数据挖掘不是本文的主题，就不深入介绍了。  简单而言，如果某个攻击者能够监控你接入 Tor 网络的流量（入口节点之前的流量）以及你离开 Tor 网络的流量（出口节点之后的流量）。那么经过足够长时间的数据积累，攻击者就可以利用数据挖据【猜测】出：某些网络行为其实是来自某个公网 IP 的用户。   举例：      
如果你仅仅使用 Tor（没用双重代理）联网，然后经常到 A网站 发敏感言论。  假设1：  如果 GFW 对所有的 Tor 流量都做了记录（这只是假设，到底有没有，俺不晓得）  假设2：  A网站 对所有的用户留言做了记录（很多的国内网站都会记录）  假设3：  朝廷可以获取 A网站 的用户访问记录（只要是国内网站，朝廷肯定能拿到；至于国外网站，要看情况）  假设4：  朝廷针对 Tor 部署了关联分析的系统（这只是假设，到底有没有，俺不晓得）   如果上述这 N 个假设【 
    同时成立
    】，那么，经过足够长时间的积累（具体需要多长时间，取决于你发帖的频繁度），关联分析系统可以猜测出你是谁。    
       ◇如何【规避】（针对 Tor 的）流量关联分析？ 
  要规避“针对 Tor 的流量关联分析”，目前最直接有效的方法是：多重代理。因为一旦用了多重代理，Tor 的流量类型就被掩盖掉了。  比方说：如果你使用 VPN 作为 Tor 的前置代理（Tor over VPN），那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 是加密滴）ISP【看不到】你的 Tor 流量。在这种情况下，“流量关联分析”的【难度】将提高 N 个数量级。   除了“针对 Tor 的流量关联分析”，还有其它的流量分析技术。考虑到篇幅，就不深入介绍了。等俺有空，单独写一篇博文，专门聊这个话题。         ★【双重代理】方面的问题 
  如果你对“双重代理”还不太了解，请先看俺之前的博文《  如何隐藏你的踪迹，避免跨省追捕[5]：用多重代理隐匿公网IP  》。        ◇为啥要使用双重代理？ 
  俺总结了如下几个原因：   
   原因1
    因为 Tor 的影响力很大，GFW 对 Tor 进行重点封杀。全球大多数的 Tor 中继节点都被 GFW 列入“IP 黑名单”。所以天朝的网友，如果单独使用 Tor，很难联网成功。这种情况下，就需要使用双重代理。   
   原因2
    所有的软件都可能有缺陷（Tor 也不例外）。如果你仅仅使用 Tor，万一 Tor 出现安全漏洞并且被攻击者利用，那么攻击者就有可能对你进行逆向追溯（说不定能追溯出你的真实公网 IP）。  而如果使用多重代理，即使出现上述风险，攻击者也只能追踪到 Tor 的前置代理，而不会直接追踪到你本人。这样一来，风险大大降低。   
   原因3
    前面提到，全球的 Tor 网络中可能会有陷阱节点。虽然你可以利用俺刚才介绍的方法，排除危险国家/地区的节点，但并不能确保万无一失。  比如说你碰到某个极小概率事件——你使用的线路上，碰巧三个节点都是陷阱——这种情况下，你的真实公网 IP 会暴露。  但如果你用了双重代理，即使碰到这种小概率事件，只会暴露你使用的前置代理服务器的 IP，而【不会暴露】你的本人的公网 IP。   举例：      
一个月前（2013年10月），美国地下网络“丝绸之路”的站长被 FBI 逮捕。他一直使用 Tor，为啥会暴露？  其中一种说法是：他没有使用双重代理。而 FBI 利用 NSA 的技术（据传闻是流量关联分析技术），再加上 FBI 本身也设置了蜜罐节点，最终定位了“丝绸之路”站长。    
  
   原因4
    刚才介绍了针对 Tor 的“流量关联分析”。如果你使用双重代理，会降低被关联分析的风险。        ◇哪些工具可以跟 Tor 组合双重代理？ 
  大部分翻墙工具都可以跟 Tor 组合。比如：所有的 VPN，无界、自由门、赛风、世界通、等等。  另外，你也可以使用公网上的一些代理服务器（公共代理），用来跟 Tor 组合成双重代理。前提是：这些“公共代理”【必须支持】HTTPS 代理或 SOCKS 代理。  如何用 Tor 组合“公共代理”，请看《  2012年9月翻墙快报（兼谈复活 Tor 的方法）  》。        ◇为啥 GAE 翻墙工具无法跟 Tor 组合成双重代理？ 
  貌似 GAE 的翻墙工具，都只提供 HTTP 代理，没有提供【原生的】HTTPS 代理。而 Tor 客户端需要使用 HTTPS 跟中转节点进行数据传输。        ◇为啥 GoAgent【无法】跟 Tor 组合成“双重代理”？ 
  GoAgent 也是 GAE 翻墙工具的一种，请参见前一个问题的解答。         ★其它方面的问题 
       ◇为啥要使用虚拟机？ 
  虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。  具体的原理图，请看《  如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网 IP（原理介绍）  》   举例：      
前几个月，美国 FBI 为了打击儿童色情，逮捕了 Tor 匿名托管服务 Freedom Hosting 的负责人。然后 FBI 在该服务器上设置了木马。  该木马会利用 Tor 内置的 Firefox 浏览器的一个安全漏洞，来收集 Tor 用户的真实公网 IP。  （木马会向 FBI 的服务器发送一个信息，FBI 的服务器就会记录下发送端的 IP。如果没有虚拟机，这个【 
    直接联网
    】的企图就得逞啦）。    
  如果你之前没用过操作系统虚拟机，可以先看俺写的系列教程《  扫盲操作系统虚拟机  》。        ◇如何【跨机器】共享 Tor Browser 的翻墙通道？ 
  用记事本（notepad）打开 Tor 的配置文件（如何找到配置文件，本文前面提到过）。在该文件末尾新增一行。  如果是 Tor Browser 软件包，加入如下这行      SocksListenAddress 0.0.0.0:9150    
 如果是 Tor 的其它软件包，加入如下这行      SocksListenAddress 0.0.0.0:9050    
 修改完记得保存，然后记得重启 Tor。之后，Tor 的监听端口就会绑定到 
   0.0.0.0
   这个地址——意思就是说，任何地址（任何机器）都可以连接到 Tor 的监听端口。  （唠叨一下：如果要跨机器共享 Tor 的 SOCKS 端口，别忘了修改防火墙的配置，允许 Tor 监听端口的 TCP 连入）        ◇啥是 obfs / obfsproxy？ 
  这玩意儿也是 Tor 官方提供的工具，主要是用来混淆 Tor 的流量。  因为 Tor 的名气太大了，很多网络监控系统（比如天朝大名鼎鼎的 GFW）可以根据网络传输内容，判断该流量是否为 Tor 的流量。如果是 Tor 流量就进行阻断。  （请注意：“判断流量类型”【不等于】“解密内容”）。  为了应对这类威胁，Tor 官方提供了一个额外的工具，用来混淆流量，让监控系统识别不出。原理图如下：        
  虽然有 obfsproxy 这个工具，但是对于那些非常重视安全性的网友，俺依然提倡用“双重代理”——双重代理的优点刚才分析过，此处不再罗嗦。         ★结尾 
  本文写得有点仓促，涉及的问题未必覆盖到方方面面。如果你觉得本文还有哪些问题没有覆盖到，欢迎到俺博客留言。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何翻墙  》（传说中的翻墙入门教程，不定期更新）  《  戴“套”翻墻的方法  》  《  “如何翻墙”系列：扫盲 Tor Browser 7.5——关于 meek 插件的配置、优化、原理  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  扫盲操作系统虚拟机  》（系列）  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/11/tor-faq.html 
    
    
  
  
    
         
    
    
    
 
    
  

&tags=觀點" class="ssk ssk-tumblr"></a>
    <a href="https://buffer.com/add?text=“如何翻墙”系列：关于 Tor 的常见问题解答&url=https://program-think.blogspot.com/2013/11/tor-faq.html" class="ssk ssk-buffer"></a>
</div>


    <div id="main" role="main" class="container">
      
  <!-- Html Elements for Search -->
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>

  <script src="/opinion/assets/js/simple-jekyll-search.min.js"></script>

  <!-- Configuration -->
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/opinion/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a><time>{date}</time><a class="tag">{category}</a></li>',
    noResultsText: '没找到',
    limit: 100,
    fuzzy: false,
    exclude: ['Welcome']
  })

  </script>

      







  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    


  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    



<article class="post">
  <h1>“如何翻墙”系列：关于 Tor 的常见问题解答</h1>
  <!-- Look the author details up from the site config. -->
  

  <div>
    <span class="date">
      2013-11-11
    </span>

    <!-- Output author details if some exist. -->
    
      
    


    <ul class="tag">
      <li>
        <a href="https://nodebe4.github.io/opinion/categories/#编程随想">
          编程随想
        </a>
      </li>
    </ul>

    
        <span>
            <!-- Personal Info. -->
            <a href="https://program-think.blogspot.com/2013/11/tor-faq.html" style="font-size:14px;">原文</a>
        </span>
    

    <span style="float: right;" title="编程随想的其它文章">
      <a style="font-size: 14px;" rel="nofollow" href="#sametag" class="tags">#编程随想 的其它文章</a>
    </span>

  </div>

  <div class="entry">
    
    
    
    <div class="post hentry uncustomized-post-template">
<a name="5755326249098358838">
 </a>   <h1 class="post-title entry-title" id="tor---"> <a href="https://program-think.blogspot.com/2013/11/tor-faq.html"> “如何翻墙”系列：关于 Tor 的常见问题解答 </a> </h1>
  <div class="post-header">
    <div class="post-header-line-1">
      <div class="post-inner-index"></div>
    </div>
  </div>
  <div class="post-body entry-content">
Tor 是一个很老牌的翻墙工具，也是俺在博客中推荐的第一款翻墙工具——当时正赶上朝廷的60大寿，GFW 加强封锁，俺就写了一篇《 <a href="https://program-think.blogspot.com/2009/09/break-through-gfw-with-tor.html"> “如何翻墙”系列：戴“套”翻墻的方法 </a> 》，算是 Tor 的入门教程。 <br /> 4年过去了，虽然新的翻墙工具不断涌现，但 Tor 的影响力和用户数仍然持续增加—— <b>
   很多人不仅仅是用 Tor 来翻墙，更是用 Tor 来隐匿自己的上网行踪
  </b> 。在这期间，俺也收到很多读者来信/博客留言，询问关于 Tor 的各种问题。甚至有热心读者建议俺专门写一篇博文，聊聊 Tor 的高级话题。 <br /> 为了帮大伙儿更好地使用 Tor，今天再发一篇教程，解答 Tor 的各种常见问题。 <br /> <a name="more">
  </a>     <!--program-think-->
 <br />     <center> <img alt="不见图 请翻墙" src="https://lh4.googleusercontent.com/UEJSz_vaNCCnJZ0vFEbAM0P2etlEwSFOOC-dDI9_55uIKQElo0ewEUREdbLpGvULyr_ran6G0B8oVh2rJIy4NBaOnL9znEaDeNKh15geLSNe4CVCPlbxhSRY2oYz" /> </center>
 <br /> <br />     <h2 id="tor--"> ★Tor 是啥玩意儿？ </h2>
 <br /> Tor 是洋文 （The Onion Router）的缩写，中文又称“洋葱网络/洋葱路由”。简单而言，这是一款专门设计用于隐匿上网身份的工具。 <br /> Tor 的官网在“ <a href="https://www.torproject.org/" rel="nofollow" target="_blank"> 这里 </a> ”。关于 Tor 的更详细介绍，请看维基百科的“ <a href="https://zh.wikipedia.org/wiki/Tor" rel="nofollow" target="_blank"> 这里 </a> ”。 <br /> <br /> <br />     <h2 id="tor-"> ★哪些网友需要使用 Tor？ </h2>
 <br /> 前面说了，设计 Tor 的主要目的是为了上网隐匿身份。所以，跟其它的翻墙工具不同——它的重点功能是"隐匿性"，"翻墙"只是顺带的功能。 <br /> 具有如下特点的用户，可以考虑使用 Tor。 <br /> <br />     <h3 id="section"> ◇为了隐匿自己所在的国家 </h3>
 <br /> 比如有些视频网站为了版权的原因，会限制某些国家的IP，那么你可以利用 Tor 来伪装成别国的网民，就可以绕过视频网站的版权限制。 <br /> <br />     <h3 id="ip-"> ◇为了隐匿自己的公网IP </h3>
 <br /> 比如你想在网上发布敏感的政治言论，那隐匿公网 IP 是避免被跨省追捕的【 <b>
   必要条件
  </b> 】。 <br /> （提醒一下：“隐匿公网 IP”只是必要条件，不是充分条件！要避免被跨省，需要考虑多个层面的防范，具体请看《 <a href="https://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html"> 如何隐藏你的踪迹，避免跨省追捕 </a> 》系列博文）。 <br /> 像俺这种长期抹黑朝廷的博主，Tor 是上网的必备工具。俺即使访问国内网站，也要走“基于 Tor 的多重代理”。（关于“多重代理”，后面还会提到） <br /> <br />     <h3 id="section-1"> ◇为了保护隐私 </h3>
 <br /> 刚才已经说了 Tor 的特点，在隐私保护方面，Tor 优于其它的翻墙工具。为了说明 Tor 在隐私方面的优点，拿 Tor 跟 VPN 做一个对比。 <br /> 很多网友使用 VPN 翻墙，而且长期使用固定的 VPN 提供商。万一 VPN 提供商在 VPN 服务器上记录你的上网行为，那你的 <b>
   所有上网行踪
  </b> 就暴露无遗。 <br /> 而如果使用 Tor，就可以大大降低这种风险——具体原因，下面会聊。 <br /> <br /> <br />     <h2 id="section-2"> ★软件安装方面的问题 </h2>
 <br />     <h3 id="vidalia--tor--"> ◇Vidalia 跟 Tor 是啥关系？ </h3>
 <br /> Tor 本身只提供命令行，没有图形界面。Vidalia 是专门为 Tor 量身打造的图形界面。 <br /> 在 Vidalia 的图形化界面上，你不但可以配置各项参数，还可以监控 Tor 的流量和 Tor 的线路（后面会提到）。 <br /> 补充说明： <br /> 从2014年之后，Tor 社区已经【不再】维护 Vidalia 这个软件了。所以俺后来又写了一篇：《 <a href="https://program-think.blogspot.com/2015/03/Tor-Arm.html"> 扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia） </a> 》 <br /> <br />     <h3 id="tor---1"> ◇如何获取 Tor 的软件包？ </h3>
 <br /> 关于这个问题，在 2009 年的入门教程《 <a href="https://program-think.blogspot.com/2009/09/break-through-gfw-with-tor.html"> “如何翻墙”系列：戴“套”翻墻的方法 </a> 》中已经介绍过，此处不再罗嗦。 <br /> <br />     <h3 id="section-3"> ◇应该选择哪个安装包？ </h3>
 <br /> 先说明一下，Tor 是跨平台的。同时支持主流的：Windows、Linux、Mac OS。 <br /> 在 Tor 官网有两个下载页面，分别如下： <br /> <br /> <a href="https://www.torproject.org/download/download-easy.html.en" rel="nofollow" target="_blank"> https://www.torproject.org/download/download-easy.html.en </a> <br /> （这个是面向菜鸟用户的，每个操作系统只提供一个下载链接） <br /> <br /> <a href="https://www.torproject.org/download/download.html" rel="nofollow" target="_blank"> https://www.torproject.org/download/download.html </a> <br /> （这个是面向高级用户的，每个操作系提供多种软件包供你选择） <br /> <br /> 后一个链接提供的多种选择，俺稍微解释一下。 <br /> <br /> <b>
   Tor Browser Bundle
  </b> <br /> 这个软件包捆绑了 Firefox 浏览器（ <b>
   对于 2.3.25 之后的版本，监听端口改为9150
  </b> ）。 <br /> <b>
   Expert Bundle
  </b> <br /> 这个软件包是面向高级用户，只有赤裸裸的 Tor，没有其它额外的东西（没有图形界面）。 <br /> <br />     <h3 id="bridge--relay--"> ◇Bridge 和 Relay 有啥区别？ </h3>
 <br /> Bridge 的中文就是“网桥”。Tor 的网桥是一种特殊的中转节点。它跟其它中转节点的差异在于：普通的中转节点，其信息会被加入到 Tor 在全球的目录服务器，所以普通的中转节点会被所有的人看到，并用来进行流量中转。 <br /> 而你自己搭建的网桥，其信息不会被加入到全球的目录服务器——只会被你自己所用。 <br /> <br />     <h3 id="linux--"> ◇Linux 用户如何获取软件包？ </h3>
 <br /> 因为 Tor 的名气大，那些主流的发行版基本上都提供 Tor 相关的软件包。如果你用的是主流的发行版，直接用系统的软件包管理工具，就可以自动安装/自动升级 Tor。 <br /> <br />     <h3 id="mac-os-x--"> ◇Mac OS X 用户如何获取软件包？ </h3>
 <br /> 使用苹果系统的用户，可以看官网的” <a href="https://www.torproject.org/docs/tor-doc-osx.html.en" rel="nofollow" target="_blank"> 这个文档 </a> “。里面有介绍如何通过“Homebrew 包管理器”安装 Tor。 <br /> <br /> <br />     <h2 id="section-4"> ★浏览器方面的问题 </h2>
 <br />     <h3 id="section-5"> ◇如何配置浏览器的代理？ </h3>
 <br /> （如果你使用的是 Tor Browser Bundle 内置的 Firefox，就无需再额外配置浏览器代理了） <br /> 早先的 Tor 客户端同时提供 HTTP 代理和 SOCKS，大概从 2013年开始，新版本的客户端不再提供 HTTP 代理了。所以原先的 <code class="language-plaintext highlighter-rouge">
   8118
  </code> 代理端口也就废弃了。 <br /> 今后大伙儿需要用 Tor 提供的 SOCKS 代理来上网，端口号如下： <br /> <code class="language-plaintext highlighter-rouge">
   9150
  </code> （2.3.25版本之后的 Tor Browser Bundle 软件包） <br /> <code class="language-plaintext highlighter-rouge">
   9050
  </code> （其它的软件包） <br /> <br /> Firefox 的代理设置如下图（至于 Chrome、IE、或其它浏览器，列位看官请依样画葫芦）： <br />     <center> <img alt="不见图 请翻墙" src="https://lh6.googleusercontent.com/a7N4tjDCF1j0nxZxNNtrhfHFXZGaqwiTvSEyboG4T1KauK1STBymmnXOz_Zonar_qAXlfvt5heWj92wuD0RWORWiWk7OVMS4SbidexZyXDCK3vM_youSRWE6d6cp" /> </center>
 <br /> （顺便说一下：SOCKS 代理其实比 HTTP 代理更好，关于两者的差别，俺抽空写一篇扫盲） <br /> <br />     <h3 id="tor---2"> ◇如何判断自己的浏览器是否在走 Tor 的线路？ </h3>
 <br /> Tor 官网提供了一个测试界面，网址是 <a href="https://check.torproject.org/" rel="nofollow" target="_blank"> https://check.torproject.org/ </a> 猛击该超链接，会打开一个界面。 <br /> 如果你的浏览器已经在使用 Tor 的线路，会出现一个【绿色】洋葱头，以及一行绿色的洋文提示。 <br /> 如果你的浏览器没有走 Tor 的线路，会出现一个【带红色打叉】的洋葱头，同时还有一行红色的洋文警告。 <br /> <br />     <h3 id="tor-browser-bundle--firefox-"> ◇Tor Browser Bundle 内置的 Firefox，有啥特殊之处？ </h3>
 <br /> 这个内置的 Firefox 跟普通的 Firefox 有如下几个差异： <br /> <br /> <b>
   1. 版本差异
  </b> <br /> 这个内置的 Firefox 采用 Mozilla 官方提供的长期支持版本（洋文叫 ESR），而不是最新版本。 <br /> 因为最新版本总是会增加很多新功能，可能会引入潜在的安全漏洞；而 ESR版本 相对而言比较稳健。 <br /> <b>
   2. 配置差异
  </b> <br /> 这个内置的 Firefox 专门进行了一些安全方面的定制（比如禁用 JavaScript） <br /> <br />     <h3 id="tor-browser-bundle--"> ◇为啥 Tor Browser Bundle 内置的浏览器无法看视频？ </h3>
 <br /> 因为这个内置的浏览器没有装 Flash 播放插件。而大多数视频网站需要 Flash 插件来播放视频。 <br /> <br /> <br />     <h2 id="section-6"> ★隐私方面的问题 </h2>
 <br /> 这一节是本文的重点，看仔细喽。 <br /> <br />     <h3 id="tor---3"> ◇Tor 客户端如何建立联网的线路？ </h3>
 <br /> 如果你比较好奇，为啥 Tor 的隐匿保护好于其它翻墙工具？那么有必要了解一下 Tor 客户端的联网机制。下面这三张图来自 Tor 的官网。因为图片中是洋文说明，俺稍微修改了一下，注上中文。 <br />     <center> <img alt="不见图 请翻墙" src="https://lh6.googleusercontent.com/Ks6hWgROrKDPnWzksn9JEKINTeSvZM_65AI4495WDHnt3Uj0KnxuAjHzGazakRVqDGxNw9wlMkBsauz2RZSFRiT72z713pwiJbPgkkyb9OV_CKvb18KRsvtdK3GU" /> </center>
 第1图：当 Tor 客户端启动之后，会首先连接 Tor 的目录服务器。从目录服务器中获取全球的 Tor 节点信息。 <br />     <center> <img alt="不见图 请翻墙" src="https://lh5.googleusercontent.com/LU47n4d_vDEIK6gPwfWT-KV74J_PVk2XeEGBbyFV-dsexr95VeePbhOR86lMKGUX8nvZ3-BJw9oDIX3gMeWTaxOVfJut65GZQvjrFdrk70A1h6g7LAXb4gkheEDv" /> </center>
 第2图：假设你要访问 网站1，那么 Tor 客户端会随机挑选三个节点用于中转。 <br /> 为了打字方便，俺把这三个节点分别称为： <br /> <b>
   入口节点
  </b> ： <br /> 如果你仅仅使用 Tor 联网，该节点直接跟你的电脑相连；如果你使用双重代理，入口节点跟你的前置代理相连。 <br /> <b>
   中间节点
  </b> ： <br /> 介于入口节点和出口节点之间（这个节点的威胁最小）。 <br /> <b>
   出口节点
  </b> ： <br /> 该节点直接跟你访问的目标网站相连（ <b>
   这个节点的威胁最大
  </b> ）。 <br /> <br /> 这三个节点中，只有“出口节点”会看到你的“上网行为”（图中标红色的虚线，表示 Tor 节点【 <b>
   会看到
  </b> 】“原始流量”）。 <br /> 所谓的“上网行为”包括：你访问了哪个网站，你从该网站传输的流量。 <br /> 如果这个网站使用【加密的】HTTPS 协议，“出口节点”看到的“原始流量”是 HTTPS 的密文，没啥关系；反之，如果这个网站使用【明文的】HTTP 协议，那么"出口节点"会看到你从该网站发送/接受的内容（ <b>
   这是主要风险点
  </b> ）。 <br /> 除了“出口节点”，其它节点完全无法知道你的上网行为（图中标绿色的线，表示 Tor 节点 <b>
   看不到
  </b> “原始流量”）。 <br />     <center> <img alt="不见图 请翻墙" src="https://lh6.googleusercontent.com/iJSFAAFtMrpAlef80Vbjk86hdjzLlhbpCwo2wc1zHjPc4WQEhbFfwKSD5ezb0SyUn87TdZ-OTjaf1MXWJ0lpfRNBjKMRWtVDvWB6z3UY_9s0Ap5KxxRLYkW0NvR6" /> </center>
 第3图：Tor 为了加强隐匿性，会动态变化中转线路。也就是说，每隔一段时间（约10分钟），就会随机挑选三个节点，重新构造一条传输线路。 <br /> 因为线路动态变化，“出口节点”自然也动态变化。所以，即使“出口节点”偷窥你的上网行为，也只能看到一个短暂的片段。 <br /> <br />     <h3 id="tor---4"> ◇Tor 节点是否会偷窥到自己的隐私/上网行为？ </h3>
 <br /> 如果你弄懂了前一个问题的三张原理图，那你自然就知道， <b>
   只有【出口节点】会看到你的上网行为
  </b> 。 <br /> <br />     <h3 id="tor---5"> ◇如何避免 Tor 节点看到你的上网行为？ </h3>
 <br /> 前面说了，“上网行为”至少包括两部分： <br /> 1. 你访问了哪个网站 <br /> 2. 你从网站传输（发送、接受）的内容/数据 <br /> <br /> 对于第1点，是【 <b>
   无解
  </b> 】滴！ <br /> 不管采用哪种工具来隐匿行踪，最终，你都需要有某个“主机”帮你把数据送到你要访问的网站。所以，这个“主机”必然就知道你访问了啥网站。 <br /> 对于第2点，是【 <b>
   有解
  </b> 】滴。 <br /> 主要方法就是：尽量采用 HTTPS 协议。比如像维基百科，同时支持 HTTP 和 HTTPS。那么你就应该采用 HTTPS 方式访问。这种情况下，Tor 的“出口节点”只知道你访问了维基百科，但是无法知道你访问了哪个页面。 <br /> 为了养成经常使用 HTTPS 的习惯，建议大伙儿安装 EFF 官方提供的 <a href="https://www.eff.org/https-everywhere" rel="nofollow" target="_blank"> HTTPS everywhere </a> <br /> <br />     <h3 id="section-7"> ◇什么是“陷阱节点”/“蜜罐节点”？ </h3>
 <br /> 某些国家（比如咱们天朝）的政府会设置“蜜罐节点”。所谓的“蜜罐节点”，通俗的说，就是陷阱。 <br /> 如果你使用的线路中，【出口节点】正好是蜜罐，那么该蜜罐就会窥探到你的上网行为——前面已经说了，【出口节点】肯定会知道：你的访问了哪个网站。 <br /> 更糟糕的是——假如你访问的目标网站【没有】HTTPS 加密，充当“出口节点”的蜜罐就会知道：你浏览的页面的内容。 <br /> <br />     <h3 id="section-8"> ◇如何避免“陷阱节点”/“蜜罐节点”？ </h3>
 <br /> 比较简单的做法，就是通过修改 Tor 的配置文件，规避这些不安全国家的节点。 <br /> 对于天朝的网友，你至少需要屏蔽“大陆、香港、澳门”这三个节点。因为这三个地区都可能被六扇门设置蜜罐。 <br /> Tor 的配置文件名叫 <code class="language-plaintext highlighter-rouge">
   torrc
  </code> ，这是一个文本文件，用记事本就可以打开。（如果你找不到该文件，在系统盘中搜索一下 <code class="language-plaintext highlighter-rouge">
   torrc
  </code> 这个文件名） <br /> 在该文件末尾，加入下面这行（ <code class="language-plaintext highlighter-rouge">
   ExcludeNodes
  </code> 表示排除这些国家/地区的节点， <code class="language-plaintext highlighter-rouge">
   StrictNodes
  </code> 表示强制执行）。 <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ExcludeNodes  {cn},{hk},{mo}
StrictNodes  1</code></pre></div>    </div>
 关于【StrictNodes】的语法，俺补充说明一下： <br /> 如果不设置 <code class="language-plaintext highlighter-rouge">
   StrictNodes 1
  </code> ，Tor 客户端首先也会规避 <code class="language-plaintext highlighter-rouge">
   ExcludeNodes
  </code> 列出的这些国家。但如果 Tor 客户端找不到可用的线路，就会去尝试位于排除列表中的节点。 <br /> 如果设置了 <code class="language-plaintext highlighter-rouge">
   StrictNodes 1
  </code> ，即使 Tor 客户端找不到可用的线路，也不会去尝试这些国家的节点。 <br /> <br /> 除了上述三个地区，还有几个国家跟天朝串通一气。如果你对安全性的要求比较高，可以把这些国家也列入 Tor 的排除节点列表。 <br /> 下面给出这些流氓国家的代码，你依样画葫芦加入到 <code class="language-plaintext highlighter-rouge">
   ExcludeNodes
  </code> 那一行，国家代码之间用逗号分隔。 <br />     <center> <table border="1" cellpadding="3" cellspacing="0">
    <tbody>
     <tr style="background:lightgrey;">
      <th>
       代码
      </th>
      <th>
       国别
      </th>
     </tr>
     <tr>
      <td>
       {kp}
      </td>
      <td>
       北朝鲜
      </td>
     </tr>
     <tr>
      <td>
       {ir}
      </td>
      <td>
       伊朗
      </td>
     </tr>
     <tr>
      <td>
       {sy}
      </td>
      <td>
       叙利亚
      </td>
     </tr>
     <tr>
      <td>
       {pk}
      </td>
      <td>
       巴基斯坦
      </td>
     </tr>
     <tr>
      <td>
       {cu}
      </td>
      <td>
       古巴
      </td>
     </tr>
     <tr>
      <td>
       {vn}
      </td>
      <td>
       越南
      </td>
     </tr>
     <tr>
      <td>
       {ru}
      </td>
      <td>
       俄罗斯
      </td>
     </tr>
     <tr>
      <td>
       {by}
      </td>
      <td>
       白俄罗斯
      </td>
     </tr>
    </tbody>
   </table> </center>
 注：耍流氓的政权有很多，上述表格仅供参考，肯定【不全】。 <br /> <br /> <br />     <h3 id="tor---6"> ◇如何【更严格地】限制“Tor 节点”？ </h3>
 <br /> 在本文发布之后6年（2019），俺在《 <a href="https://program-think.blogspot.com/2019/09/Security-News.html"> 近期安全动态和点评（2019年3季度） </a> 》一文中介绍了【更严格】的 Tor 节点配置招数。对安全性要求【很高】的读者，可以去看看。 <br /> 那篇提到了三个招数（3个注意事项），其中一个是【白名单】，配置语法如下： <br /> <br /> <code class="language-plaintext highlighter-rouge">
   EntryNodes
  </code> <br /> 限定只使用某些国家的节点作为【入口节点】。 <br /> <br /> <code class="language-plaintext highlighter-rouge">
   ExitNodes
  </code> <br /> 限定只使用某些国家的节点作为【出口节点】。 <br /> <br />     <h3 id="tor---7"> ◇Tor 的加密流量能否被【破解】？ </h3>
 <br /> 根据斯诺登曝光的材料，NSA 目前具备的运算能力，可以解密很大一部分 Tor 流量。 <br /> 因为目前（2013年）的 Tor 中继服务器，大部分还在使用 1024 位的 DHE 密钥，这类密钥虽然普通人难以破解，但是 NSA 掌握的运算能力可以在几小时内暴力破解。目前只有 10% 左右的中继服务器采用 ECDHE 密钥（基于椭圆曲线）。这类 ECDHE 密钥 NSA 比较难破解（更多介绍请看“ <a href="https://blog.erratasec.com/2013/09/tor-is-still-dhe-1024-nsa-crackable.html" rel="nofollow" target="_blank"> 这篇报道 </a> ”）。 <br /> 至于天朝方面，肯定【没有】NSA 这么牛的破解能力。所以墙内的同学们，咱们暂时还不用担心这个问题 :) <br /> 另外，等到大部分中继服务器升级到 2.4 版本，ECDHE密钥 的使用就会普及。到那时候，（DHE 密钥被破解的）风险会减低。 <br /> 注： <br /> 本小节提及了好几种【密钥交换算法】。如果你对这方面感兴趣，可以看如下这篇博文，介绍了相关算法的原理。 <br /> 《 <a href="https://program-think.blogspot.com/2016/09/https-ssl-tls-3.html"> 扫盲 HTTPS 和 SSL/TLS 协议[3]：密钥交换（密钥协商）算法及其原理 </a> 》 <br /> <br />     <h3 id="section-9"> ◇啥是【流量关联分析】？ </h3>
 <br /> 先声明：流量关联分析有很多种。这里说的是【 <b>
   针对 Tor
  </b> 】的流量关联分析”。 <br /> “关联分析”是数据挖掘的一种手段——先积累足够多的数据，然后通过某种算法找出数据之间的某些相关性特征。考虑到数据挖掘不是本文的主题，就不深入介绍了。 <br /> 简单而言，如果某个攻击者能够监控你接入 Tor 网络的流量（入口节点之前的流量）以及你离开 Tor 网络的流量（出口节点之后的流量）。那么经过足够长时间的数据积累，攻击者就可以利用数据挖据【猜测】出：某些网络行为其实是来自某个公网 IP 的用户。 <br /> <br /> 举例： <br />     <blockquote>
如果你仅仅使用 Tor（没用双重代理）联网，然后经常到 A网站 发敏感言论。 <br /> 假设1： <br /> 如果 GFW 对所有的 Tor 流量都做了记录（这只是假设，到底有没有，俺不晓得） <br /> 假设2： <br /> A网站 对所有的用户留言做了记录（很多的国内网站都会记录） <br /> 假设3： <br /> 朝廷可以获取 A网站 的用户访问记录（只要是国内网站，朝廷肯定能拿到；至于国外网站，要看情况） <br /> 假设4： <br /> 朝廷针对 Tor 部署了关联分析的系统（这只是假设，到底有没有，俺不晓得） <br /> <br /> 如果上述这 N 个假设【 <b>
    同时成立
   </b> 】，那么，经过足够长时间的积累（具体需要多长时间，取决于你发帖的频繁度），关联分析系统可以猜测出你是谁。    </blockquote>
 <br />     <h3 id="tor---8"> ◇如何【规避】（针对 Tor 的）流量关联分析？ </h3>
 <br /> 要规避“针对 Tor 的流量关联分析”，目前最直接有效的方法是：多重代理。因为一旦用了多重代理，Tor 的流量类型就被掩盖掉了。 <br /> 比方说：如果你使用 VPN 作为 Tor 的前置代理（Tor over VPN），那么你的 ISP 监控你的流量，看到的是 VPN 流量——（因为 VPN 是加密滴）ISP【看不到】你的 Tor 流量。在这种情况下，“流量关联分析”的【难度】将提高 N 个数量级。 <br /> <br /> 除了“针对 Tor 的流量关联分析”，还有其它的流量分析技术。考虑到篇幅，就不深入介绍了。等俺有空，单独写一篇博文，专门聊这个话题。 <br /> <br /> <br />     <h2 id="section-10"> ★【双重代理】方面的问题 </h2>
 <br /> 如果你对“双重代理”还不太了解，请先看俺之前的博文《 <a href="https://program-think.blogspot.com/2012/03/howto-cover-your-tracks-5.html"> 如何隐藏你的踪迹，避免跨省追捕[5]：用多重代理隐匿公网IP </a> 》。 <br /> <br />     <h3 id="section-11"> ◇为啥要使用双重代理？ </h3>
 <br /> 俺总结了如下几个原因： <br /> <br /> <b>
   原因1
  </b> <br /> 因为 Tor 的影响力很大，GFW 对 Tor 进行重点封杀。全球大多数的 Tor 中继节点都被 GFW 列入“IP 黑名单”。所以天朝的网友，如果单独使用 Tor，很难联网成功。这种情况下，就需要使用双重代理。 <br /> <br /> <b>
   原因2
  </b> <br /> 所有的软件都可能有缺陷（Tor 也不例外）。如果你仅仅使用 Tor，万一 Tor 出现安全漏洞并且被攻击者利用，那么攻击者就有可能对你进行逆向追溯（说不定能追溯出你的真实公网 IP）。 <br /> 而如果使用多重代理，即使出现上述风险，攻击者也只能追踪到 Tor 的前置代理，而不会直接追踪到你本人。这样一来，风险大大降低。 <br /> <br /> <b>
   原因3
  </b> <br /> 前面提到，全球的 Tor 网络中可能会有陷阱节点。虽然你可以利用俺刚才介绍的方法，排除危险国家/地区的节点，但并不能确保万无一失。 <br /> 比如说你碰到某个极小概率事件——你使用的线路上，碰巧三个节点都是陷阱——这种情况下，你的真实公网 IP 会暴露。 <br /> 但如果你用了双重代理，即使碰到这种小概率事件，只会暴露你使用的前置代理服务器的 IP，而【不会暴露】你的本人的公网 IP。 <br /> <br /> 举例： <br />     <blockquote>
一个月前（2013年10月），美国地下网络“丝绸之路”的站长被 FBI 逮捕。他一直使用 Tor，为啥会暴露？ <br /> 其中一种说法是：他没有使用双重代理。而 FBI 利用 NSA 的技术（据传闻是流量关联分析技术），再加上 FBI 本身也设置了蜜罐节点，最终定位了“丝绸之路”站长。    </blockquote>
 <br /> <b>
   原因4
  </b> <br /> 刚才介绍了针对 Tor 的“流量关联分析”。如果你使用双重代理，会降低被关联分析的风险。 <br /> <br />     <h3 id="tor---9"> ◇哪些工具可以跟 Tor 组合双重代理？ </h3>
 <br /> 大部分翻墙工具都可以跟 Tor 组合。比如：所有的 VPN，无界、自由门、赛风、世界通、等等。 <br /> 另外，你也可以使用公网上的一些代理服务器（公共代理），用来跟 Tor 组合成双重代理。前提是：这些“公共代理”【必须支持】HTTPS 代理或 SOCKS 代理。 <br /> 如何用 Tor 组合“公共代理”，请看《 <a href="https://program-think.blogspot.com/2012/09/gfw-news.html"> 2012年9月翻墙快报（兼谈复活 Tor 的方法） </a> 》。 <br /> <br />     <h3 id="gae--tor--"> ◇为啥 GAE 翻墙工具无法跟 Tor 组合成双重代理？ </h3>
 <br /> 貌似 GAE 的翻墙工具，都只提供 HTTP 代理，没有提供【原生的】HTTPS 代理。而 Tor 客户端需要使用 HTTPS 跟中转节点进行数据传输。 <br /> <br />     <h3 id="goagent-tor--"> ◇为啥 GoAgent【无法】跟 Tor 组合成“双重代理”？ </h3>
 <br /> GoAgent 也是 GAE 翻墙工具的一种，请参见前一个问题的解答。 <br /> <br /> <br />     <h2 id="section-12"> ★其它方面的问题 </h2>
 <br />     <h3 id="section-13"> ◇为啥要使用虚拟机？ </h3>
 <br /> 虚拟机是为了进行网络隔离，确保你本机的软件总是经过代理联网，而不会直接联网——直接联网可能会导致你的公网IP暴露。 <br /> 具体的原理图，请看《 <a href="https://program-think.blogspot.sk/2013/01/howto-cover-your-tracks-6.html"> 如何隐藏你的踪迹，避免跨省追捕[6]：用虚拟机隐匿公网 IP（原理介绍） </a> 》 <br /> <br /> 举例： <br />     <blockquote>
前几个月，美国 FBI 为了打击儿童色情，逮捕了 Tor 匿名托管服务 Freedom Hosting 的负责人。然后 FBI 在该服务器上设置了木马。 <br /> 该木马会利用 Tor 内置的 Firefox 浏览器的一个安全漏洞，来收集 Tor 用户的真实公网 IP。 <br /> （木马会向 FBI 的服务器发送一个信息，FBI 的服务器就会记录下发送端的 IP。如果没有虚拟机，这个【 <b>
    直接联网
   </b> 】的企图就得逞啦）。    </blockquote>
 <br /> 如果你之前没用过操作系统虚拟机，可以先看俺写的系列教程《 <a href="https://program-think.blogspot.com/2012/10/system-vm-0.html"> 扫盲操作系统虚拟机 </a> 》。 <br /> <br />     <h3 id="tor-browser--"> ◇如何【跨机器】共享 Tor Browser 的翻墙通道？ </h3>
 <br /> 用记事本（notepad）打开 Tor 的配置文件（如何找到配置文件，本文前面提到过）。在该文件末尾新增一行。 <br /> 如果是 Tor Browser 软件包，加入如下这行 <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SocksListenAddress 0.0.0.0:9150</code></pre></div>    </div>
 如果是 Tor 的其它软件包，加入如下这行 <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SocksListenAddress 0.0.0.0:9050</code></pre></div>    </div>
 修改完记得保存，然后记得重启 Tor。之后，Tor 的监听端口就会绑定到 <code class="language-plaintext highlighter-rouge">
   0.0.0.0
  </code> 这个地址——意思就是说，任何地址（任何机器）都可以连接到 Tor 的监听端口。 <br /> （唠叨一下：如果要跨机器共享 Tor 的 SOCKS 端口，别忘了修改防火墙的配置，允许 Tor 监听端口的 TCP 连入） <br /> <br />     <h3 id="obfs--obfsproxy-"> ◇啥是 obfs / obfsproxy？ </h3>
 <br /> 这玩意儿也是 Tor 官方提供的工具，主要是用来混淆 Tor 的流量。 <br /> 因为 Tor 的名气太大了，很多网络监控系统（比如天朝大名鼎鼎的 GFW）可以根据网络传输内容，判断该流量是否为 Tor 的流量。如果是 Tor 流量就进行阻断。 <br /> （请注意：“判断流量类型”【不等于】“解密内容”）。 <br /> 为了应对这类威胁，Tor 官方提供了一个额外的工具，用来混淆流量，让监控系统识别不出。原理图如下： <br />     <center> <img alt="不见图 请翻墙" src="https://lh4.googleusercontent.com/1M-p-hMprj7T3Ba_XXVu2pfoBN4_2ujk8zPhfdunFjTjHbjtMqG44rAddHko4yIpSK2YVblmfzK9LpfgLpNaPrLFdsmpoJhGoHnH4kiBF3r5fqgA13Ap2dL9ezg5" /> </center>
 <br /> 虽然有 obfsproxy 这个工具，但是对于那些非常重视安全性的网友，俺依然提倡用“双重代理”——双重代理的优点刚才分析过，此处不再罗嗦。 <br /> <br /> <br />     <h2 id="section-14"> ★结尾 </h2>
 <br /> 本文写得有点仓促，涉及的问题未必覆盖到方方面面。如果你觉得本文还有哪些问题没有覆盖到，欢迎到俺博客留言。 <br /> <br /> <br /> <b>
   俺博客上，和本文相关的帖子（需翻墙）
  </b> ： <br /> 《 <a href="https://program-think.blogspot.com/2009/05/how-to-break-through-gfw.html"> 如何翻墙 </a> 》（传说中的翻墙入门教程，不定期更新） <br /> 《 <a href="https://program-think.blogspot.com/2009/09/break-through-gfw-with-tor.html"> 戴“套”翻墻的方法 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2018/04/gfw-tor-browser-7.5-meek.html"> “如何翻墙”系列：扫盲 Tor Browser 7.5——关于 meek 插件的配置、优化、原理 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2015/03/Tor-Arm.html"> 扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia） </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html"> 如何隐藏你的踪迹，避免跨省追捕 </a> 》（系列） <br /> 《 <a href="https://program-think.blogspot.com/2012/10/system-vm-0.html"> 扫盲操作系统虚拟机 </a> 》（系列） <br /> 《 <a href="https://program-think.blogspot.com/2013/01/cross-host-use-gfw-tool.html"> 多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法 </a> 》     <div class="post-copyright">
<b>
    版权声明
   </b> <br /> 本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者 <a href="mailto:program.think@gmail.com"> 编程随想 </a> 和本文原始地址： <br /> <a href="https://program-think.blogspot.com/2013/11/tor-faq.html" id="OriginalPostUrl"> https://program-think.blogspot.com/2013/11/tor-faq.html </a>
    </div>
    <div style="clear: both;"></div>
  </div>
  <div class="post-footer" style="margin-bottom:50px;">
    <div class="post-footer-line post-footer-line-1" style="display:none;">
<span class="post-author vcard"> </span> <span class="reaction-buttons"> </span> <span class="star-ratings"> </span> <span class="post-icons"> </span> <span class="post-backlinks post-comment-link"> </span>
    </div>
    <div class="post-footer-line post-footer-line-2 post-toolbar"></div>
    <div class="post-footer-line post-footer-line-3">
<span class="post-location"> </span>
    </div>
  </div>
</div>


  </div>

  <hr style="border-top:1px solid #28323C;"/>

<font size=2px>
  文章版权归原作者所有。
</font>

<div style="text-align:center"><img width="1px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站" style="text-align:center"/></div>

  <div id="sametag">
    <h4 style="display: inline-block;">#编程随想 的其它文章</h4>
    <span>--<a href="https://nodebe4.github.io/opinion/2021-05-09/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-%E6%94%BF%E6%B2%BB-IT-%E7%A7%91%E6%99%AE-%E5%8E%86%E5%8F%B2-%E7%AD%89-97%E6%9C%AC/">最新</a>-</span>
    <span>-<a href="https://nodebe4.github.io/opinion/2009-01-15/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%BC%A0%E5%8F%8A%E6%9C%AC%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E7%AE%80%E4%BB%8B/">最早</a>--</span>
    
      <li>
        <time>2013-11-19</time>
        <a href="https://nodebe4.github.io/opinion/2013-11-19/%E4%B8%89%E4%B8%AD%E5%85%A8%E4%BC%9A%E8%A7%A3%E8%AF%BB-%E5%90%8D%E4%B8%BA%E6%94%B9%E9%9D%A9-%E5%AE%9E%E4%B8%BA%E9%9B%86%E6%9D%83-%E5%A4%A9%E6%9C%9D%E6%88%96%E9%87%8D%E5%9B%9E%E4%B8%AA%E4%BA%BA%E7%8B%AC%E8%A3%81/">
          三中全会解读：名为改革，实为集权，天朝或重回个人独裁
        </a>
      </li>
    
    
      <li>
        <time>2013-11-13</time>
        <a href="https://nodebe4.github.io/opinion/2013-11-13/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E5%85%B3%E4%BA%8E%E5%A4%A9%E6%9C%9D%E7%9A%84%E6%96%87%E5%8C%96%E5%92%8C%E6%B0%91%E6%97%8F%E7%9A%84%E5%8A%A3%E6%A0%B9%E6%80%A7/">
          每周转载：关于天朝的文化和民族的劣根性
        </a>
      </li>
    
    
      <li>
        <time>2013-11-04</time>
        <a href="https://nodebe4.github.io/opinion/2013-11-04/%E8%8B%A5%E6%94%BF%E6%B2%BB%E5%88%B6%E5%BA%A6%E4%B8%8D%E5%85%AC%E5%B9%B3-%E5%88%99%E7%BB%8F%E6%B5%8E%E6%94%B9%E9%9D%A9%E6%97%A0%E6%84%8F%E4%B9%89-%E8%B0%88%E8%B0%88%E5%A4%A9%E6%9C%9D%E8%BF%99%E4%B8%AA%E5%A4%A7%E8%B5%8C%E5%9C%BA/">
          若政治制度不公平，则经济改革无意义——谈谈天朝这个大赌场
        </a>
      </li>
    
    
      <li>
        <time>2013-10-31</time>
        <a href="https://nodebe4.github.io/opinion/2013-10-31/%E6%89%AB%E7%9B%B2-Linux-%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%8F%91%E8%A1%8C%E7%89%88/">
          扫盲 Linux：如何选择发行版
        </a>
      </li>
    
  </div>


  <hr>
  <div class="pagination">
    
      <span class="prev" >
          <a href="https://nodebe4.github.io/opinion/2013-11-11/%E8%A6%81%E5%81%9A-%E5%85%A8%E7%90%83%E5%8C%96%E5%9F%8E%E5%B8%82-%E5%8C%97%E4%BA%AC%E7%BC%BA%E7%82%B9%E4%BB%80%E4%B9%88/">
            前一篇：要做“全球化城市”，北京缺点什么？
          </a>
      </span>
    
    
      <span class="next" >
          <a href="https://nodebe4.github.io/opinion/2013-11-12/%E6%AD%BB%E5%88%91%E5%88%B6%E5%BA%A6%E6%94%B9%E9%9D%A9%E5%8A%A8%E5%8A%9B-%E5%9C%A8%E5%9B%BD%E9%99%85%E5%8E%8B%E5%8A%9B%E4%B8%8E%E6%B0%91%E6%84%8F%E8%A6%81%E6%B1%82%E4%B9%8B%E9%97%B4/">
            後一篇：死刑制度改革动力：在国际压力与民意要求之间
          </a>
      </span>
    

    <script>
    /* post pagination keyboard shortcuts */
    document.body.onkeyup = function(e){
      if (e.keyCode == '37') { window.location = 'https://nodebe4.github.io/opinion/2013-11-11/%E8%A6%81%E5%81%9A-%E5%85%A8%E7%90%83%E5%8C%96%E5%9F%8E%E5%B8%82-%E5%8C%97%E4%BA%AC%E7%BC%BA%E7%82%B9%E4%BB%80%E4%B9%88/'; } // left arrow key
      if (e.keyCode == '39') { window.location = 'https://nodebe4.github.io/opinion/2013-11-12/%E6%AD%BB%E5%88%91%E5%88%B6%E5%BA%A6%E6%94%B9%E9%9D%A9%E5%8A%A8%E5%8A%9B-%E5%9C%A8%E5%9B%BD%E9%99%85%E5%8E%8B%E5%8A%9B%E4%B8%8E%E6%B0%91%E6%84%8F%E8%A6%81%E6%B1%82%E4%B9%8B%E9%97%B4/'; } // right arrow key
      if (e.keyCode == '45') { window.location = 'https://nodebe4.github.io/opinion/2013-11-13/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E5%85%B3%E4%BA%8E%E5%A4%A9%E6%9C%9D%E7%9A%84%E6%96%87%E5%8C%96%E5%92%8C%E6%B0%91%E6%97%8F%E7%9A%84%E5%8A%A3%E6%A0%B9%E6%80%A7/'; } // insert key
      if (e.keyCode == '46') { window.location = 'https://nodebe4.github.io/opinion/2013-11-04/%E8%8B%A5%E6%94%BF%E6%B2%BB%E5%88%B6%E5%BA%A6%E4%B8%8D%E5%85%AC%E5%B9%B3-%E5%88%99%E7%BB%8F%E6%B5%8E%E6%94%B9%E9%9D%A9%E6%97%A0%E6%84%8F%E4%B9%89-%E8%B0%88%E8%B0%88%E5%A4%A9%E6%9C%9D%E8%BF%99%E4%B8%AA%E5%A4%A7%E8%B5%8C%E5%9C%BA/'; } // delete key
    };
    </script>
    <link rel="stylesheet" type="text/css" href="/opinion/assets/css/fab.css" />

<div class="fab-wrapper">
  <div class="fab-wheel">
    
    
    
    <a class="fab-action fab-action-1" title="上一篇(热键 &#8594;)" href="https://nodebe4.github.io/opinion/2013-11-11/%E8%A6%81%E5%81%9A-%E5%85%A8%E7%90%83%E5%8C%96%E5%9F%8E%E5%B8%82-%E5%8C%97%E4%BA%AC%E7%BC%BA%E7%82%B9%E4%BB%80%E4%B9%88/">
      <i>后</i>
    </a>
    
    
    <a class="fab-action fab-action-2" title="下一篇(热键 &#8592;)" href="https://nodebe4.github.io/opinion/2013-11-12/%E6%AD%BB%E5%88%91%E5%88%B6%E5%BA%A6%E6%94%B9%E9%9D%A9%E5%8A%A8%E5%8A%9B-%E5%9C%A8%E5%9B%BD%E9%99%85%E5%8E%8B%E5%8A%9B%E4%B8%8E%E6%B0%91%E6%84%8F%E8%A6%81%E6%B1%82%E4%B9%8B%E9%97%B4/">
      <i>前</i>
    </a>
    
    
    <a class="fab-action fab-action-3" title="<编程随想>上一篇(热键 ins)" href="https://nodebe4.github.io/opinion/2013-11-13/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E5%85%B3%E4%BA%8E%E5%A4%A9%E6%9C%9D%E7%9A%84%E6%96%87%E5%8C%96%E5%92%8C%E6%B0%91%E6%97%8F%E7%9A%84%E5%8A%A3%E6%A0%B9%E6%80%A7/">
      <i>左</i>
    </a>
    
    
    <a class="fab-action fab-action-4" title="<编程随想>下一篇(热键 del)" href="https://nodebe4.github.io/opinion/2013-11-04/%E8%8B%A5%E6%94%BF%E6%B2%BB%E5%88%B6%E5%BA%A6%E4%B8%8D%E5%85%AC%E5%B9%B3-%E5%88%99%E7%BB%8F%E6%B5%8E%E6%94%B9%E9%9D%A9%E6%97%A0%E6%84%8F%E4%B9%89-%E8%B0%88%E8%B0%88%E5%A4%A9%E6%9C%9D%E8%BF%99%E4%B8%AA%E5%A4%A7%E8%B5%8C%E5%9C%BA/">
      <i>右</i>
    </a>
    
  </div>
</div>


  </div>


  

</article>

    </div>

    <div style="z-index:2;">
<script src="/opinion/assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  cornerOffset: 20, // px
  id: 'back-to-top',
  backgroundColor: '#ddd',
  textColor: 'red'
})</script>
</div>


    <div class="wrapper-footer" id="footer">
      <div class="container">
        <footer class="footer">
          <img width="200px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站"/>
<font size=2px>二维码分享本站</font>

<!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:beauti4@protonmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/NodeBE4/opinion" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  
  <li><a href="/opinion/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

    
</ul>





<p><span style="color:blue">内容每小时更新一次.</span> Powered by <a href="https://github.com/AWEEKJ/kiko-now">Kiko Now</a> & <a href="https://github.com/gitalk/gitalk">Gitalk</a> & <a href="https://github.com/duty-machine/news">duty-machine</a>, 站务 <a href="https://be4.herokuapp.com">NodeBE4</a>（<span style="color:red">被墙</span>）</p>





        </footer>
      </div>
    </div>

    



  </body>
</html>
