<!DOCTYPE html>
<html>
  <head>
  <title>CNNIC 证书的危害及各种清除方法 – 觀點 – 從草根到大師 git.io/JJCxS</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="

      CNNIC 证书的危害及各种清除方法  
  
    
      
    
  
  
前几天已经写了2个帖子（分别是  扫盲数字证书的基本知识  ，  CNNIC 干过的那些破事  ）作铺垫，终于开始来说正题——关于 CNNIC 的 CA 证书。  
       
        ★CNNIC到底干了啥事？ 
  从  前面的帖子  ，大伙应该都看出来，CNNIC 这个老流氓可是坏事做尽啊。最近这段时间，CNNIC 不甘寂寞，又在 CA 领域，搞了点小动作。今天先来说一下，这个老流氓又坑蒙拐骗了哪些主？        ◇Mozilla.org 
  可能某些IT圈外的同学会问，Mozilla是嘛玩意？简单地说，“Mozilla 和 Firefox 的关系”就好比“微软和 Windows 的关系”。因此，Firefox 自带哪些 CA 根证书，是由 Mozilla 组织决定滴。  话说2009年初那会儿，CNNIC 里面的某个员工（liu_yan@cinic.cn）到 Mozilla 网站提交了一个申请：要求将 CNNIC 加入 Mozilla 的 CA 列表。此申请经过几个月的讨论。到了2009年底，审批获得通过。至此，CNNIC 正式成为 Mozilla 的 CA 之一（请看“  Mozilla官方的CA列表  ”）。懂洋文的同学，请自行到“  这里  ”看详细的申请过程。  因此，从 Firefox 的3.6版本开始，其内置的诸多根证书中，将会包含 CNNIC 这个老流氓提供的根证书。        ◇微软（Microsoft） 
  说实在的，俺不清楚老流氓 CNNIC 是如何忽悠微软，让微软把它也加入到 Windows 内置的 CA 列表中的。不过这已经不重要了。现在，老流氓已经把它脏兮兮的触角，伸到了微软那儿。列位看官如若不信，可以去看“  微软的 CA 列表  ”。  今后，如果你安装了微软新的操作系统，多半其已经包含了 CNNIC 的根证书；即便你一直使用老版本的 Windows，也可能在自动升级了某个 Windows 补丁之后，把 CNNIC 的根证书带到你的电脑中。        ◇Entrust.net 
  除了 Mozilla 和微软，还有一个组织也被 CNNIC 牵连了，那就是 Entrust ——国外一家比较老牌的 CA。正是由于该 CA 比较老牌，因此 Windows 系统（至少包括 Win2000 之后的版本）中以及 Firefox 中，都已经内置了它的根证书。  老流氓大概是花了些银子，于是该CA提供的根证书就信任了 CNNIC 制作的某个 SSL 证书（不明白证书间是如何信任的，请回顾一下  俺扫盲帖  中提到的“证书信任链”）。  到了2010年下半年，Entrust 大概也意识到 CNNIC 的名声太臭，就解除了跟 CNNIC 的信任关系。所以，如今【新的】Entrust 证书，已经不再信任 CNNIC 的 SSL 证书了。如果你的浏览器是新版本或者 Windows 系统更新过新的补丁，其内置的 Entrust 证书应该是安全的，不用清理了。如果你吃不准 Windows 系统或浏览器内置的 Entrust 证书是否安全，请根据本文后续章节“★如何确认门户已经清理干净”介绍的方法判断。         ★这事儿对咱有啥影响？ 
  那电脑中有了 CNNIC 的证书，会出现啥鸟事捏？俺大概说一下。        ◇“中间人攻击”的风险 
  所谓的“中间人攻击”，洋文叫做“Man-In-The-Middle attack”，按首字母缩写成 MITM。  在证书导致的各种风险里面，“中间人攻击”的风险，是【最大】的（没有之一），也是最经常被提及滴。  俺在  前面的帖子  已经讲了 CA 证书对于 HTTPS 协议的重要性（可以防止攻击者伪造虚假网站）。既然老流氓 CNNIC 已经成为合法的 CA，那它就能堂而皇之地制作并发布 CA 证书。然后捏，再配合 GFW 进行【域名污染】。那 GFW 就可以轻松搞定任何网站的 HTTPS 加密传输。  （如果你不清楚“域名污染”是咋回事儿，可以看俺的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》）  可能有些小朋友心里会犯嘀咕：GFW 会有这么坏吗？俺想篡改鲁迅他老人家的一句话来回答： 
   俺向来是不惮以最坏的恶意，来推测党国
   。GFW 和 CNNIC 作为党国的2条走狗，一起进行中间人攻击（一个负责在 DNS 上做手脚、另一个负责伪造 CA 证书），简直是“天生一对、黄金搭档”啊！        ◇ActiveX 控件的风险 
  另外一个大伙儿不太关注的风险，是关于 ActiveX 控件的问题。前几年，很多恶意软件（包括流氓软件、木马）都是通过 IE 控件的技术，安装到大伙儿的电脑上。后来微软加强了对 ActiveX 控件的验证：在 IE 的默认设置下，对于【没有】数字签名的 ActiveX 控件，默认是拒绝安装滴；而对于有数字签名的控件，则会给出提示。  因此，老流氓 CNNIC 可以很轻松地给自己的 ActiveX 控件制作数字证书。然后把控件放到网上。某些粗心的电脑用户看到IE跳出的安装控件提示，多半没细看，直接就点了“确定”按钮。         ★如何清理门户？ 
  其实网上关于如何去掉证书的操作指南，多如牛毛，所以俺就简单说一下，懒得再抓图了。  有些浏览器（IE、Chrome、Safari）使用的是操作系统的证书体系。这种情况下，你需要把 CNNIC 证书从操作系统的证书体系中去掉；还有些浏览器（比如：Firefox、Opera）是自己带了一套证书体系。你要进入该浏览器的配置界面，把不要的证书去除即可。  下面分不同的浏览器，不同的操作系统，分别介绍：        ◇清理 Windows 的证书（适用IE、Chrome、Safari） 
  对于使用 Windows 下的 IE 或 Chrome 或 Safari 浏览器，则需要执行如下步骤：  1. 运行 Windows 的证书管理器（到命令行执行 
   certmgr.msc
   ）。  2. 选中“受信任的根证书颁发机构”=&gt;“证书”。  3. 查看右边的证书列表。如果里面已经有 CNNIC 的证书，直接跳到第7步。  4. 先翻墙到“  这个页面  ”下载现成的 CNNIC 证书。要把证书从 7z 压缩包中解压出来（ 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此下载页面已【失效】）。  5. 鼠标在“受信任的根证书颁发机构”=&gt;“证书”上点右键。在右键菜单中点“所有任务”=&gt;“导入”。  6. 出现一个导入向导，根据先导一步步的提示，把上述 CNNIC 证书导入到证书列表中。  7. 选中 CNNIC 证书，点右键。在右键菜单中点“属性”。  8. 在跳出的属性对话框中，选中“停用这个证书的所有目的”，然后确定。  9. 最后，为了保险起见，再把这三个证书，导入到“不信任的证书”中（方法和上述类似）。   （注：上述操作仅对当前用户生效。如果你的 Windows 系统中有多个常用的用户帐号，要对每一个用户进行上述设置）        ◇清理苹果 Mac OS X 的证书（适用于 Safari、Chrome） 
  对于使用 Mac OS X 下的 Safari 或 Chrome 浏览器，则需要执行如下步骤：  请到“实用工具”=&gt;“钥匙串访问”=&gt;“系统根证书”=&gt;“证书”，找到 CNNIC 的证书并双击，改为“永不信任”。   （注：如果你的界面是洋文，其操作方式也八九不离十。俺就不再啰嗦了）        ◇清理 Linux 的证书（适用于 Chrome、Safari） 
  对于 Debian 或 Ubuntu 系统，以管理员权限进行如下操作：  
   方法1
    运行命令： 
   dpkg-reconfigure ca-certificates
   会出现一个图形界面，把 CNNIC 证书【不勾选】，并确认。  
   方法2
    编辑 
   /etc/ca-certificates.conf
   文件，把 CNNIC 证书对应的行删除或注释掉。然后用命令 
   update-ca-certificates
   使之生效。   （注：对于其它 Linux 发行版本，也有类似操作，俺就不再啰嗦了）        ◇清理 Firefox 的证书 
  不论是在哪个操作系统下，只要你用的是 Firefox 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“选项” ，打开选项对话框  2. 切换到“高级”部分，选中“加密”标签页，点“查看证书”按钮。  3. 在证书对话框中，切换到“证书机构”。  4. 里面的证书列表是按字母排序的。把 CNNIC 打头的都删除。   （ 
   注：如果某个证书是 Firefox 自带的，则删除之后，下次再打开该对话框，此证书还在。不过不要紧，它的所有“信任设置”，都已经被清空了。
   ）        ◇清理 Opera 的证书 
  不论是在哪个操作系统下，只要你用的是 Opera 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“首选项” ，打开首选项对话框  2. 切换到“高级”标签页，在左边选择“安全性”这项。  3. 点“管理证书”按钮，出来一个证书的对话框。切换到“证书颁发机构”标签页。  4. 找到 CNNIC 的证书并选中，点“查看”按钮，在证书属性对话框中，把“允许连接到使用此证书的网站”的打勾去掉  （注：俺是基于 Opera 10.10 进行操作。新版本的界面可能略有差异）         ★如何确认门户已经清理干净？ 
    【补充说明】  本文发出之后，过了5年，包括微软、Google、苹果在内的几大操作系统和浏览器厂商开始把 CNNIC 的根证书从默认的信任列表中清除。从那之后，连 CNNIC 自己的官网也不得不使用国外的证书。所以，本小节的下述内容就作废了（俺标注了  删除线  ）。     为了保险起见，在完成上述的清除工作之后，你需要用浏览器访问一下老流氓的一个网站，地址是  
     https
     ://www.cnnic.cn  （记得用 
    HTTPS
    协议哦）  如果你的浏览器报告该网站的证书有问题，那恭喜你，你的门户清理干净了 :-)  如果该网站的页面顺利打开，那你就要重新检查一下，看上述操作是否出了差错。          ★可能的副作用 
  有些国内网站已经开始使用 CNNIC 的证书，目前已经知道的有163邮箱（真鄙视网易）。但是甭担心。去除证书后，浏览器在访问上述网站时，会给出一个证书的安全警告。你只需添加一个安全例外即可。         ★引申阅读 
  另外列举一些相关的资料给大伙儿参考：  《  最最最严重安全警告  》  （此文是 AutoProxy 的作者 WCM 亲自写的。09年就已经在网上广为流传）   《  CNNIC 我不信任你——从受信任的根证书里赶走 CNNIC  》  （这篇文章也被多处转贴）   《  noCNNIC  》  （已经有热心网友在 Google Code 平台上搞了一个自动清除工具。 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此项目已【失效】）    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  数字证书及 CA 的扫盲介绍  》  《  CNNIC 干过的那些破事儿  》  《  老流氓 CNNIC 的接班人——聊聊“沃通/WoSign”的那些破事儿  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  扫盲 HTTPS 和 SSL/TLS 协议  》（系列）     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    <meta property="og:description" content="

      CNNIC 证书的危害及各种清除方法  
  
    
      
    
  
  
前几天已经写了2个帖子（分别是  扫盲数字证书的基本知识  ，  CNNIC 干过的那些破事  ）作铺垫，终于开始来说正题——关于 CNNIC 的 CA 证书。  
       
        ★CNNIC到底干了啥事？ 
  从  前面的帖子  ，大伙应该都看出来，CNNIC 这个老流氓可是坏事做尽啊。最近这段时间，CNNIC 不甘寂寞，又在 CA 领域，搞了点小动作。今天先来说一下，这个老流氓又坑蒙拐骗了哪些主？        ◇Mozilla.org 
  可能某些IT圈外的同学会问，Mozilla是嘛玩意？简单地说，“Mozilla 和 Firefox 的关系”就好比“微软和 Windows 的关系”。因此，Firefox 自带哪些 CA 根证书，是由 Mozilla 组织决定滴。  话说2009年初那会儿，CNNIC 里面的某个员工（liu_yan@cinic.cn）到 Mozilla 网站提交了一个申请：要求将 CNNIC 加入 Mozilla 的 CA 列表。此申请经过几个月的讨论。到了2009年底，审批获得通过。至此，CNNIC 正式成为 Mozilla 的 CA 之一（请看“  Mozilla官方的CA列表  ”）。懂洋文的同学，请自行到“  这里  ”看详细的申请过程。  因此，从 Firefox 的3.6版本开始，其内置的诸多根证书中，将会包含 CNNIC 这个老流氓提供的根证书。        ◇微软（Microsoft） 
  说实在的，俺不清楚老流氓 CNNIC 是如何忽悠微软，让微软把它也加入到 Windows 内置的 CA 列表中的。不过这已经不重要了。现在，老流氓已经把它脏兮兮的触角，伸到了微软那儿。列位看官如若不信，可以去看“  微软的 CA 列表  ”。  今后，如果你安装了微软新的操作系统，多半其已经包含了 CNNIC 的根证书；即便你一直使用老版本的 Windows，也可能在自动升级了某个 Windows 补丁之后，把 CNNIC 的根证书带到你的电脑中。        ◇Entrust.net 
  除了 Mozilla 和微软，还有一个组织也被 CNNIC 牵连了，那就是 Entrust ——国外一家比较老牌的 CA。正是由于该 CA 比较老牌，因此 Windows 系统（至少包括 Win2000 之后的版本）中以及 Firefox 中，都已经内置了它的根证书。  老流氓大概是花了些银子，于是该CA提供的根证书就信任了 CNNIC 制作的某个 SSL 证书（不明白证书间是如何信任的，请回顾一下  俺扫盲帖  中提到的“证书信任链”）。  到了2010年下半年，Entrust 大概也意识到 CNNIC 的名声太臭，就解除了跟 CNNIC 的信任关系。所以，如今【新的】Entrust 证书，已经不再信任 CNNIC 的 SSL 证书了。如果你的浏览器是新版本或者 Windows 系统更新过新的补丁，其内置的 Entrust 证书应该是安全的，不用清理了。如果你吃不准 Windows 系统或浏览器内置的 Entrust 证书是否安全，请根据本文后续章节“★如何确认门户已经清理干净”介绍的方法判断。         ★这事儿对咱有啥影响？ 
  那电脑中有了 CNNIC 的证书，会出现啥鸟事捏？俺大概说一下。        ◇“中间人攻击”的风险 
  所谓的“中间人攻击”，洋文叫做“Man-In-The-Middle attack”，按首字母缩写成 MITM。  在证书导致的各种风险里面，“中间人攻击”的风险，是【最大】的（没有之一），也是最经常被提及滴。  俺在  前面的帖子  已经讲了 CA 证书对于 HTTPS 协议的重要性（可以防止攻击者伪造虚假网站）。既然老流氓 CNNIC 已经成为合法的 CA，那它就能堂而皇之地制作并发布 CA 证书。然后捏，再配合 GFW 进行【域名污染】。那 GFW 就可以轻松搞定任何网站的 HTTPS 加密传输。  （如果你不清楚“域名污染”是咋回事儿，可以看俺的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》）  可能有些小朋友心里会犯嘀咕：GFW 会有这么坏吗？俺想篡改鲁迅他老人家的一句话来回答： 
   俺向来是不惮以最坏的恶意，来推测党国
   。GFW 和 CNNIC 作为党国的2条走狗，一起进行中间人攻击（一个负责在 DNS 上做手脚、另一个负责伪造 CA 证书），简直是“天生一对、黄金搭档”啊！        ◇ActiveX 控件的风险 
  另外一个大伙儿不太关注的风险，是关于 ActiveX 控件的问题。前几年，很多恶意软件（包括流氓软件、木马）都是通过 IE 控件的技术，安装到大伙儿的电脑上。后来微软加强了对 ActiveX 控件的验证：在 IE 的默认设置下，对于【没有】数字签名的 ActiveX 控件，默认是拒绝安装滴；而对于有数字签名的控件，则会给出提示。  因此，老流氓 CNNIC 可以很轻松地给自己的 ActiveX 控件制作数字证书。然后把控件放到网上。某些粗心的电脑用户看到IE跳出的安装控件提示，多半没细看，直接就点了“确定”按钮。         ★如何清理门户？ 
  其实网上关于如何去掉证书的操作指南，多如牛毛，所以俺就简单说一下，懒得再抓图了。  有些浏览器（IE、Chrome、Safari）使用的是操作系统的证书体系。这种情况下，你需要把 CNNIC 证书从操作系统的证书体系中去掉；还有些浏览器（比如：Firefox、Opera）是自己带了一套证书体系。你要进入该浏览器的配置界面，把不要的证书去除即可。  下面分不同的浏览器，不同的操作系统，分别介绍：        ◇清理 Windows 的证书（适用IE、Chrome、Safari） 
  对于使用 Windows 下的 IE 或 Chrome 或 Safari 浏览器，则需要执行如下步骤：  1. 运行 Windows 的证书管理器（到命令行执行 
   certmgr.msc
   ）。  2. 选中“受信任的根证书颁发机构”=&gt;“证书”。  3. 查看右边的证书列表。如果里面已经有 CNNIC 的证书，直接跳到第7步。  4. 先翻墙到“  这个页面  ”下载现成的 CNNIC 证书。要把证书从 7z 压缩包中解压出来（ 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此下载页面已【失效】）。  5. 鼠标在“受信任的根证书颁发机构”=&gt;“证书”上点右键。在右键菜单中点“所有任务”=&gt;“导入”。  6. 出现一个导入向导，根据先导一步步的提示，把上述 CNNIC 证书导入到证书列表中。  7. 选中 CNNIC 证书，点右键。在右键菜单中点“属性”。  8. 在跳出的属性对话框中，选中“停用这个证书的所有目的”，然后确定。  9. 最后，为了保险起见，再把这三个证书，导入到“不信任的证书”中（方法和上述类似）。   （注：上述操作仅对当前用户生效。如果你的 Windows 系统中有多个常用的用户帐号，要对每一个用户进行上述设置）        ◇清理苹果 Mac OS X 的证书（适用于 Safari、Chrome） 
  对于使用 Mac OS X 下的 Safari 或 Chrome 浏览器，则需要执行如下步骤：  请到“实用工具”=&gt;“钥匙串访问”=&gt;“系统根证书”=&gt;“证书”，找到 CNNIC 的证书并双击，改为“永不信任”。   （注：如果你的界面是洋文，其操作方式也八九不离十。俺就不再啰嗦了）        ◇清理 Linux 的证书（适用于 Chrome、Safari） 
  对于 Debian 或 Ubuntu 系统，以管理员权限进行如下操作：  
   方法1
    运行命令： 
   dpkg-reconfigure ca-certificates
   会出现一个图形界面，把 CNNIC 证书【不勾选】，并确认。  
   方法2
    编辑 
   /etc/ca-certificates.conf
   文件，把 CNNIC 证书对应的行删除或注释掉。然后用命令 
   update-ca-certificates
   使之生效。   （注：对于其它 Linux 发行版本，也有类似操作，俺就不再啰嗦了）        ◇清理 Firefox 的证书 
  不论是在哪个操作系统下，只要你用的是 Firefox 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“选项” ，打开选项对话框  2. 切换到“高级”部分，选中“加密”标签页，点“查看证书”按钮。  3. 在证书对话框中，切换到“证书机构”。  4. 里面的证书列表是按字母排序的。把 CNNIC 打头的都删除。   （ 
   注：如果某个证书是 Firefox 自带的，则删除之后，下次再打开该对话框，此证书还在。不过不要紧，它的所有“信任设置”，都已经被清空了。
   ）        ◇清理 Opera 的证书 
  不论是在哪个操作系统下，只要你用的是 Opera 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“首选项” ，打开首选项对话框  2. 切换到“高级”标签页，在左边选择“安全性”这项。  3. 点“管理证书”按钮，出来一个证书的对话框。切换到“证书颁发机构”标签页。  4. 找到 CNNIC 的证书并选中，点“查看”按钮，在证书属性对话框中，把“允许连接到使用此证书的网站”的打勾去掉  （注：俺是基于 Opera 10.10 进行操作。新版本的界面可能略有差异）         ★如何确认门户已经清理干净？ 
    【补充说明】  本文发出之后，过了5年，包括微软、Google、苹果在内的几大操作系统和浏览器厂商开始把 CNNIC 的根证书从默认的信任列表中清除。从那之后，连 CNNIC 自己的官网也不得不使用国外的证书。所以，本小节的下述内容就作废了（俺标注了  删除线  ）。     为了保险起见，在完成上述的清除工作之后，你需要用浏览器访问一下老流氓的一个网站，地址是  
     https
     ://www.cnnic.cn  （记得用 
    HTTPS
    协议哦）  如果你的浏览器报告该网站的证书有问题，那恭喜你，你的门户清理干净了 :-)  如果该网站的页面顺利打开，那你就要重新检查一下，看上述操作是否出了差错。          ★可能的副作用 
  有些国内网站已经开始使用 CNNIC 的证书，目前已经知道的有163邮箱（真鄙视网易）。但是甭担心。去除证书后，浏览器在访问上述网站时，会给出一个证书的安全警告。你只需添加一个安全例外即可。         ★引申阅读 
  另外列举一些相关的资料给大伙儿参考：  《  最最最严重安全警告  》  （此文是 AutoProxy 的作者 WCM 亲自写的。09年就已经在网上广为流传）   《  CNNIC 我不信任你——从受信任的根证书里赶走 CNNIC  》  （这篇文章也被多处转贴）   《  noCNNIC  》  （已经有热心网友在 Google Code 平台上搞了一个自动清除工具。 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此项目已【失效】）    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  数字证书及 CA 的扫盲介绍  》  《  CNNIC 干过的那些破事儿  》  《  老流氓 CNNIC 的接班人——聊聊“沃通/WoSign”的那些破事儿  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  扫盲 HTTPS 和 SSL/TLS 协议  》（系列）     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    
    <meta name="author" content="觀點" />

    
    <meta property="og:title" content="CNNIC 证书的危害及各种清除方法" />
    <meta property="twitter:title" content="CNNIC 证书的危害及各种清除方法" />
    

  <link rel="stylesheet" type="text/css" href="/opinion/style.css" />
  <link rel="alternate" type="application/rss+xml" title="觀點 - 從草根到大師 git.io/JJCxS" href="/opinion/feed.xml" />

  <!-- Social Share Kit CSS -->
  <link rel="stylesheet" href="/opinion/assets/css/social-share-kit.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/bootstrap.min.css" type="text/css">
  <script type="text/javascript" src="/opinion/assets/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="/opinion/assets/js/page.js"></script>

</head>

  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      

      <div class="site-info">
        <h1 class="site-name" style="display: inline-block;"><a href="/opinion/">觀點</a></h1>
        <i class="site-description" style="font-size: 12px;">從草根到大師 git.io/JJCxS</i>
      </div>

      <nav>
        <span id="search-container" >
          <a href="/opinion/tools"><i class="fa fa-bookmark twitter" title="百宝箱"></i></a>
        <a><i class="fa fa-search" title="限前100結果"></i></a><input type="text" id="search-input" placeholder="標題 作者 來源 日期 (17489)"
          style="margin: 10px 0px 0px 0px; height: 30px;width: auto" title="本站最正確的打開方式">
        </span>
        
        
        <a href="/opinion/categories" style="color: Tomato;"><i class="fa fa-tags" title="分类"></i></a>
        
        
        
        <a href="https://be4.herokuapp.com/" style="color: #003366;"><i class="fa fa-comments" title="论坛"></i></a>
        
        
        
        <a href="/opinion/about"><i class="fa fa-info-circle" title="关于"></i></a>
        
        
        <a title="电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇，del同来源旧一篇" onclick="toggle_visibility('help')"><i class="fa fa-question-circle"></i></a>
        <a id="fa-home" href="https://nodebe4.github.io" title="BE4服务列表" onclick="//toggle_visibility('site-list')"><i class="fa fa-home" aria-hidden="true"></i></a>
      </nav>

    </header>
    <div id="site-list" class="tags" style="display: block;text-align: right;border-bottom: 1px solid lightGray;"><noscript><span style="background-color: #e8e8e8;color: #d10000;font-size: 14px;">开启浏览器JavaScript以获取搜索功能和更好的浏览体验</span></noscript></div>
    <p id="help" style="font-size: 14px;display: none;text-align: right;"><span style="color:green;">电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇, del同来源旧一篇</span>; <span style="color:orange">对应触屏FAB：上下右左</span>; 轉Markdown<a href="https://euangoddard.github.io/clipboard2markdown/"><i class="fa fa-file-text-o"></i></a></p>
  </div>
</div>

<script type="text/javascript" >
  function toggle_visibility(id){
    var help = document.getElementById(id)
    if (help.style.display=='none'){
      help.style.display='block';
    }else{
      help.style.display='none';
    }
  }

  const url = "https://nodebe4.github.io/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    // var homebtn = document.getElementById("fa-home")
    // homebtn.removeAttribute("href")
    var content = document.getElementById("site-list");
    content.innerHTML = ''
    var ul = document.createElement("ul")
    ul.classList.add("label")
    content.appendChild(ul)
    var cnt = 0

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var li = document.createElement('li')
        li.classList.add("tag")
        li.id = 'site-' + cnt
        ul.appendChild(li)
        var a0 = document.createElement('a')
        li.appendChild(a0)
        a0.href = item.url[0]
        var span = document.createElement('span')
        a0.appendChild(span)
        span.innerText = item['name']
        // span.style.backgroundColor = item['background-color']
        // span.style.color='#E4CBC3'
        span.style.color = item['background-color']
        span.style['font-size'] = '14px'
        cnt += 1
        // test_alive(li.id, a0.href)
      })
    })
  })

function test_alive(id, url){
  var divstatus = document.getElementById(id)
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        if (data.responseText.includes('502')){
          // divstatus.style.color='#FBB7B7'
          // divstatus.style.color='gray'
          // divstatus.title = "服务器无响应"
          divstatus.parentNode.removeChild(divstatus)
        }else{
          // divstatus.style.color='#B6FAC8'
          divstatus.title = data.responseText
        }
      }
  });
  return divstatus
}
</script>



    <!-- Left & centered positioning -->

<div class="ssk-sticky ssk-right ssk-center ssk-sticky-hide-xs ssk-group ssk-round">
  
    <a href="https://be4news.pythonanywhere.com/archivenow/ia/https%3A%2F%2Fprogram-think.blogspot.com%2F2010%2F02%2Fremove-cnnic-cert.html" class="ssk ssk-link" title="存到互联网档案馆" target="_blank"></a>
    <a href="https://www.facebook.com/sharer.php?u=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html" class="ssk ssk-facebook"></a>
    <a href="https://twitter.com/intent/tweet?url=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html&text=CNNIC 证书的危害及各种清除方法&hashtags=觀點" class="ssk ssk-twitter"></a>
    <a href="https://reddit.com/submit?url=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html&title=CNNIC 证书的危害及各种清除方法" class="ssk ssk-reddit"></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html&title=CNNIC 证书的危害及各种清除方法" class="ssk ssk-linkedin"></a>
    <a href="mailto:{email_address}?subject=CNNIC 证书的危害及各种清除方法&body=

      CNNIC 证书的危害及各种清除方法  
  
    
      
    
  
  
前几天已经写了2个帖子（分别是  扫盲数字证书的基本知识  ，  CNNIC 干过的那些破事  ）作铺垫，终于开始来说正题——关于 CNNIC 的 CA 证书。  
       
        ★CNNIC到底干了啥事？ 
  从  前面的帖子  ，大伙应该都看出来，CNNIC 这个老流氓可是坏事做尽啊。最近这段时间，CNNIC 不甘寂寞，又在 CA 领域，搞了点小动作。今天先来说一下，这个老流氓又坑蒙拐骗了哪些主？        ◇Mozilla.org 
  可能某些IT圈外的同学会问，Mozilla是嘛玩意？简单地说，“Mozilla 和 Firefox 的关系”就好比“微软和 Windows 的关系”。因此，Firefox 自带哪些 CA 根证书，是由 Mozilla 组织决定滴。  话说2009年初那会儿，CNNIC 里面的某个员工（liu_yan@cinic.cn）到 Mozilla 网站提交了一个申请：要求将 CNNIC 加入 Mozilla 的 CA 列表。此申请经过几个月的讨论。到了2009年底，审批获得通过。至此，CNNIC 正式成为 Mozilla 的 CA 之一（请看“  Mozilla官方的CA列表  ”）。懂洋文的同学，请自行到“  这里  ”看详细的申请过程。  因此，从 Firefox 的3.6版本开始，其内置的诸多根证书中，将会包含 CNNIC 这个老流氓提供的根证书。        ◇微软（Microsoft） 
  说实在的，俺不清楚老流氓 CNNIC 是如何忽悠微软，让微软把它也加入到 Windows 内置的 CA 列表中的。不过这已经不重要了。现在，老流氓已经把它脏兮兮的触角，伸到了微软那儿。列位看官如若不信，可以去看“  微软的 CA 列表  ”。  今后，如果你安装了微软新的操作系统，多半其已经包含了 CNNIC 的根证书；即便你一直使用老版本的 Windows，也可能在自动升级了某个 Windows 补丁之后，把 CNNIC 的根证书带到你的电脑中。        ◇Entrust.net 
  除了 Mozilla 和微软，还有一个组织也被 CNNIC 牵连了，那就是 Entrust ——国外一家比较老牌的 CA。正是由于该 CA 比较老牌，因此 Windows 系统（至少包括 Win2000 之后的版本）中以及 Firefox 中，都已经内置了它的根证书。  老流氓大概是花了些银子，于是该CA提供的根证书就信任了 CNNIC 制作的某个 SSL 证书（不明白证书间是如何信任的，请回顾一下  俺扫盲帖  中提到的“证书信任链”）。  到了2010年下半年，Entrust 大概也意识到 CNNIC 的名声太臭，就解除了跟 CNNIC 的信任关系。所以，如今【新的】Entrust 证书，已经不再信任 CNNIC 的 SSL 证书了。如果你的浏览器是新版本或者 Windows 系统更新过新的补丁，其内置的 Entrust 证书应该是安全的，不用清理了。如果你吃不准 Windows 系统或浏览器内置的 Entrust 证书是否安全，请根据本文后续章节“★如何确认门户已经清理干净”介绍的方法判断。         ★这事儿对咱有啥影响？ 
  那电脑中有了 CNNIC 的证书，会出现啥鸟事捏？俺大概说一下。        ◇“中间人攻击”的风险 
  所谓的“中间人攻击”，洋文叫做“Man-In-The-Middle attack”，按首字母缩写成 MITM。  在证书导致的各种风险里面，“中间人攻击”的风险，是【最大】的（没有之一），也是最经常被提及滴。  俺在  前面的帖子  已经讲了 CA 证书对于 HTTPS 协议的重要性（可以防止攻击者伪造虚假网站）。既然老流氓 CNNIC 已经成为合法的 CA，那它就能堂而皇之地制作并发布 CA 证书。然后捏，再配合 GFW 进行【域名污染】。那 GFW 就可以轻松搞定任何网站的 HTTPS 加密传输。  （如果你不清楚“域名污染”是咋回事儿，可以看俺的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》）  可能有些小朋友心里会犯嘀咕：GFW 会有这么坏吗？俺想篡改鲁迅他老人家的一句话来回答： 
   俺向来是不惮以最坏的恶意，来推测党国
   。GFW 和 CNNIC 作为党国的2条走狗，一起进行中间人攻击（一个负责在 DNS 上做手脚、另一个负责伪造 CA 证书），简直是“天生一对、黄金搭档”啊！        ◇ActiveX 控件的风险 
  另外一个大伙儿不太关注的风险，是关于 ActiveX 控件的问题。前几年，很多恶意软件（包括流氓软件、木马）都是通过 IE 控件的技术，安装到大伙儿的电脑上。后来微软加强了对 ActiveX 控件的验证：在 IE 的默认设置下，对于【没有】数字签名的 ActiveX 控件，默认是拒绝安装滴；而对于有数字签名的控件，则会给出提示。  因此，老流氓 CNNIC 可以很轻松地给自己的 ActiveX 控件制作数字证书。然后把控件放到网上。某些粗心的电脑用户看到IE跳出的安装控件提示，多半没细看，直接就点了“确定”按钮。         ★如何清理门户？ 
  其实网上关于如何去掉证书的操作指南，多如牛毛，所以俺就简单说一下，懒得再抓图了。  有些浏览器（IE、Chrome、Safari）使用的是操作系统的证书体系。这种情况下，你需要把 CNNIC 证书从操作系统的证书体系中去掉；还有些浏览器（比如：Firefox、Opera）是自己带了一套证书体系。你要进入该浏览器的配置界面，把不要的证书去除即可。  下面分不同的浏览器，不同的操作系统，分别介绍：        ◇清理 Windows 的证书（适用IE、Chrome、Safari） 
  对于使用 Windows 下的 IE 或 Chrome 或 Safari 浏览器，则需要执行如下步骤：  1. 运行 Windows 的证书管理器（到命令行执行 
   certmgr.msc
   ）。  2. 选中“受信任的根证书颁发机构”=&gt;“证书”。  3. 查看右边的证书列表。如果里面已经有 CNNIC 的证书，直接跳到第7步。  4. 先翻墙到“  这个页面  ”下载现成的 CNNIC 证书。要把证书从 7z 压缩包中解压出来（ 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此下载页面已【失效】）。  5. 鼠标在“受信任的根证书颁发机构”=&gt;“证书”上点右键。在右键菜单中点“所有任务”=&gt;“导入”。  6. 出现一个导入向导，根据先导一步步的提示，把上述 CNNIC 证书导入到证书列表中。  7. 选中 CNNIC 证书，点右键。在右键菜单中点“属性”。  8. 在跳出的属性对话框中，选中“停用这个证书的所有目的”，然后确定。  9. 最后，为了保险起见，再把这三个证书，导入到“不信任的证书”中（方法和上述类似）。   （注：上述操作仅对当前用户生效。如果你的 Windows 系统中有多个常用的用户帐号，要对每一个用户进行上述设置）        ◇清理苹果 Mac OS X 的证书（适用于 Safari、Chrome） 
  对于使用 Mac OS X 下的 Safari 或 Chrome 浏览器，则需要执行如下步骤：  请到“实用工具”=&gt;“钥匙串访问”=&gt;“系统根证书”=&gt;“证书”，找到 CNNIC 的证书并双击，改为“永不信任”。   （注：如果你的界面是洋文，其操作方式也八九不离十。俺就不再啰嗦了）        ◇清理 Linux 的证书（适用于 Chrome、Safari） 
  对于 Debian 或 Ubuntu 系统，以管理员权限进行如下操作：  
   方法1
    运行命令： 
   dpkg-reconfigure ca-certificates
   会出现一个图形界面，把 CNNIC 证书【不勾选】，并确认。  
   方法2
    编辑 
   /etc/ca-certificates.conf
   文件，把 CNNIC 证书对应的行删除或注释掉。然后用命令 
   update-ca-certificates
   使之生效。   （注：对于其它 Linux 发行版本，也有类似操作，俺就不再啰嗦了）        ◇清理 Firefox 的证书 
  不论是在哪个操作系统下，只要你用的是 Firefox 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“选项” ，打开选项对话框  2. 切换到“高级”部分，选中“加密”标签页，点“查看证书”按钮。  3. 在证书对话框中，切换到“证书机构”。  4. 里面的证书列表是按字母排序的。把 CNNIC 打头的都删除。   （ 
   注：如果某个证书是 Firefox 自带的，则删除之后，下次再打开该对话框，此证书还在。不过不要紧，它的所有“信任设置”，都已经被清空了。
   ）        ◇清理 Opera 的证书 
  不论是在哪个操作系统下，只要你用的是 Opera 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“首选项” ，打开首选项对话框  2. 切换到“高级”标签页，在左边选择“安全性”这项。  3. 点“管理证书”按钮，出来一个证书的对话框。切换到“证书颁发机构”标签页。  4. 找到 CNNIC 的证书并选中，点“查看”按钮，在证书属性对话框中，把“允许连接到使用此证书的网站”的打勾去掉  （注：俺是基于 Opera 10.10 进行操作。新版本的界面可能略有差异）         ★如何确认门户已经清理干净？ 
    【补充说明】  本文发出之后，过了5年，包括微软、Google、苹果在内的几大操作系统和浏览器厂商开始把 CNNIC 的根证书从默认的信任列表中清除。从那之后，连 CNNIC 自己的官网也不得不使用国外的证书。所以，本小节的下述内容就作废了（俺标注了  删除线  ）。     为了保险起见，在完成上述的清除工作之后，你需要用浏览器访问一下老流氓的一个网站，地址是  
     https
     ://www.cnnic.cn  （记得用 
    HTTPS
    协议哦）  如果你的浏览器报告该网站的证书有问题，那恭喜你，你的门户清理干净了 :-)  如果该网站的页面顺利打开，那你就要重新检查一下，看上述操作是否出了差错。          ★可能的副作用 
  有些国内网站已经开始使用 CNNIC 的证书，目前已经知道的有163邮箱（真鄙视网易）。但是甭担心。去除证书后，浏览器在访问上述网站时，会给出一个证书的安全警告。你只需添加一个安全例外即可。         ★引申阅读 
  另外列举一些相关的资料给大伙儿参考：  《  最最最严重安全警告  》  （此文是 AutoProxy 的作者 WCM 亲自写的。09年就已经在网上广为流传）   《  CNNIC 我不信任你——从受信任的根证书里赶走 CNNIC  》  （这篇文章也被多处转贴）   《  noCNNIC  》  （已经有热心网友在 Google Code 平台上搞了一个自动清除工具。 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此项目已【失效】）    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  数字证书及 CA 的扫盲介绍  》  《  CNNIC 干过的那些破事儿  》  《  老流氓 CNNIC 的接班人——聊聊“沃通/WoSign”的那些破事儿  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  扫盲 HTTPS 和 SSL/TLS 协议  》（系列）     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html 
    
    
  
  
    
         
    
    
    
 
    
  

" class="ssk ssk-email"></a>
    <a href="http://pinterest.com/pin/create/link/?url=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html" class="ssk ssk-pinterest"></a>
    <a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html&title=CNNIC 证书的危害及各种清除方法&caption=

      CNNIC 证书的危害及各种清除方法  
  
    
      
    
  
  
前几天已经写了2个帖子（分别是  扫盲数字证书的基本知识  ，  CNNIC 干过的那些破事  ）作铺垫，终于开始来说正题——关于 CNNIC 的 CA 证书。  
       
        ★CNNIC到底干了啥事？ 
  从  前面的帖子  ，大伙应该都看出来，CNNIC 这个老流氓可是坏事做尽啊。最近这段时间，CNNIC 不甘寂寞，又在 CA 领域，搞了点小动作。今天先来说一下，这个老流氓又坑蒙拐骗了哪些主？        ◇Mozilla.org 
  可能某些IT圈外的同学会问，Mozilla是嘛玩意？简单地说，“Mozilla 和 Firefox 的关系”就好比“微软和 Windows 的关系”。因此，Firefox 自带哪些 CA 根证书，是由 Mozilla 组织决定滴。  话说2009年初那会儿，CNNIC 里面的某个员工（liu_yan@cinic.cn）到 Mozilla 网站提交了一个申请：要求将 CNNIC 加入 Mozilla 的 CA 列表。此申请经过几个月的讨论。到了2009年底，审批获得通过。至此，CNNIC 正式成为 Mozilla 的 CA 之一（请看“  Mozilla官方的CA列表  ”）。懂洋文的同学，请自行到“  这里  ”看详细的申请过程。  因此，从 Firefox 的3.6版本开始，其内置的诸多根证书中，将会包含 CNNIC 这个老流氓提供的根证书。        ◇微软（Microsoft） 
  说实在的，俺不清楚老流氓 CNNIC 是如何忽悠微软，让微软把它也加入到 Windows 内置的 CA 列表中的。不过这已经不重要了。现在，老流氓已经把它脏兮兮的触角，伸到了微软那儿。列位看官如若不信，可以去看“  微软的 CA 列表  ”。  今后，如果你安装了微软新的操作系统，多半其已经包含了 CNNIC 的根证书；即便你一直使用老版本的 Windows，也可能在自动升级了某个 Windows 补丁之后，把 CNNIC 的根证书带到你的电脑中。        ◇Entrust.net 
  除了 Mozilla 和微软，还有一个组织也被 CNNIC 牵连了，那就是 Entrust ——国外一家比较老牌的 CA。正是由于该 CA 比较老牌，因此 Windows 系统（至少包括 Win2000 之后的版本）中以及 Firefox 中，都已经内置了它的根证书。  老流氓大概是花了些银子，于是该CA提供的根证书就信任了 CNNIC 制作的某个 SSL 证书（不明白证书间是如何信任的，请回顾一下  俺扫盲帖  中提到的“证书信任链”）。  到了2010年下半年，Entrust 大概也意识到 CNNIC 的名声太臭，就解除了跟 CNNIC 的信任关系。所以，如今【新的】Entrust 证书，已经不再信任 CNNIC 的 SSL 证书了。如果你的浏览器是新版本或者 Windows 系统更新过新的补丁，其内置的 Entrust 证书应该是安全的，不用清理了。如果你吃不准 Windows 系统或浏览器内置的 Entrust 证书是否安全，请根据本文后续章节“★如何确认门户已经清理干净”介绍的方法判断。         ★这事儿对咱有啥影响？ 
  那电脑中有了 CNNIC 的证书，会出现啥鸟事捏？俺大概说一下。        ◇“中间人攻击”的风险 
  所谓的“中间人攻击”，洋文叫做“Man-In-The-Middle attack”，按首字母缩写成 MITM。  在证书导致的各种风险里面，“中间人攻击”的风险，是【最大】的（没有之一），也是最经常被提及滴。  俺在  前面的帖子  已经讲了 CA 证书对于 HTTPS 协议的重要性（可以防止攻击者伪造虚假网站）。既然老流氓 CNNIC 已经成为合法的 CA，那它就能堂而皇之地制作并发布 CA 证书。然后捏，再配合 GFW 进行【域名污染】。那 GFW 就可以轻松搞定任何网站的 HTTPS 加密传输。  （如果你不清楚“域名污染”是咋回事儿，可以看俺的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》）  可能有些小朋友心里会犯嘀咕：GFW 会有这么坏吗？俺想篡改鲁迅他老人家的一句话来回答： 
   俺向来是不惮以最坏的恶意，来推测党国
   。GFW 和 CNNIC 作为党国的2条走狗，一起进行中间人攻击（一个负责在 DNS 上做手脚、另一个负责伪造 CA 证书），简直是“天生一对、黄金搭档”啊！        ◇ActiveX 控件的风险 
  另外一个大伙儿不太关注的风险，是关于 ActiveX 控件的问题。前几年，很多恶意软件（包括流氓软件、木马）都是通过 IE 控件的技术，安装到大伙儿的电脑上。后来微软加强了对 ActiveX 控件的验证：在 IE 的默认设置下，对于【没有】数字签名的 ActiveX 控件，默认是拒绝安装滴；而对于有数字签名的控件，则会给出提示。  因此，老流氓 CNNIC 可以很轻松地给自己的 ActiveX 控件制作数字证书。然后把控件放到网上。某些粗心的电脑用户看到IE跳出的安装控件提示，多半没细看，直接就点了“确定”按钮。         ★如何清理门户？ 
  其实网上关于如何去掉证书的操作指南，多如牛毛，所以俺就简单说一下，懒得再抓图了。  有些浏览器（IE、Chrome、Safari）使用的是操作系统的证书体系。这种情况下，你需要把 CNNIC 证书从操作系统的证书体系中去掉；还有些浏览器（比如：Firefox、Opera）是自己带了一套证书体系。你要进入该浏览器的配置界面，把不要的证书去除即可。  下面分不同的浏览器，不同的操作系统，分别介绍：        ◇清理 Windows 的证书（适用IE、Chrome、Safari） 
  对于使用 Windows 下的 IE 或 Chrome 或 Safari 浏览器，则需要执行如下步骤：  1. 运行 Windows 的证书管理器（到命令行执行 
   certmgr.msc
   ）。  2. 选中“受信任的根证书颁发机构”=&gt;“证书”。  3. 查看右边的证书列表。如果里面已经有 CNNIC 的证书，直接跳到第7步。  4. 先翻墙到“  这个页面  ”下载现成的 CNNIC 证书。要把证书从 7z 压缩包中解压出来（ 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此下载页面已【失效】）。  5. 鼠标在“受信任的根证书颁发机构”=&gt;“证书”上点右键。在右键菜单中点“所有任务”=&gt;“导入”。  6. 出现一个导入向导，根据先导一步步的提示，把上述 CNNIC 证书导入到证书列表中。  7. 选中 CNNIC 证书，点右键。在右键菜单中点“属性”。  8. 在跳出的属性对话框中，选中“停用这个证书的所有目的”，然后确定。  9. 最后，为了保险起见，再把这三个证书，导入到“不信任的证书”中（方法和上述类似）。   （注：上述操作仅对当前用户生效。如果你的 Windows 系统中有多个常用的用户帐号，要对每一个用户进行上述设置）        ◇清理苹果 Mac OS X 的证书（适用于 Safari、Chrome） 
  对于使用 Mac OS X 下的 Safari 或 Chrome 浏览器，则需要执行如下步骤：  请到“实用工具”=&gt;“钥匙串访问”=&gt;“系统根证书”=&gt;“证书”，找到 CNNIC 的证书并双击，改为“永不信任”。   （注：如果你的界面是洋文，其操作方式也八九不离十。俺就不再啰嗦了）        ◇清理 Linux 的证书（适用于 Chrome、Safari） 
  对于 Debian 或 Ubuntu 系统，以管理员权限进行如下操作：  
   方法1
    运行命令： 
   dpkg-reconfigure ca-certificates
   会出现一个图形界面，把 CNNIC 证书【不勾选】，并确认。  
   方法2
    编辑 
   /etc/ca-certificates.conf
   文件，把 CNNIC 证书对应的行删除或注释掉。然后用命令 
   update-ca-certificates
   使之生效。   （注：对于其它 Linux 发行版本，也有类似操作，俺就不再啰嗦了）        ◇清理 Firefox 的证书 
  不论是在哪个操作系统下，只要你用的是 Firefox 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“选项” ，打开选项对话框  2. 切换到“高级”部分，选中“加密”标签页，点“查看证书”按钮。  3. 在证书对话框中，切换到“证书机构”。  4. 里面的证书列表是按字母排序的。把 CNNIC 打头的都删除。   （ 
   注：如果某个证书是 Firefox 自带的，则删除之后，下次再打开该对话框，此证书还在。不过不要紧，它的所有“信任设置”，都已经被清空了。
   ）        ◇清理 Opera 的证书 
  不论是在哪个操作系统下，只要你用的是 Opera 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤：  1. 从菜单“工具”=&gt;“首选项” ，打开首选项对话框  2. 切换到“高级”标签页，在左边选择“安全性”这项。  3. 点“管理证书”按钮，出来一个证书的对话框。切换到“证书颁发机构”标签页。  4. 找到 CNNIC 的证书并选中，点“查看”按钮，在证书属性对话框中，把“允许连接到使用此证书的网站”的打勾去掉  （注：俺是基于 Opera 10.10 进行操作。新版本的界面可能略有差异）         ★如何确认门户已经清理干净？ 
    【补充说明】  本文发出之后，过了5年，包括微软、Google、苹果在内的几大操作系统和浏览器厂商开始把 CNNIC 的根证书从默认的信任列表中清除。从那之后，连 CNNIC 自己的官网也不得不使用国外的证书。所以，本小节的下述内容就作废了（俺标注了  删除线  ）。     为了保险起见，在完成上述的清除工作之后，你需要用浏览器访问一下老流氓的一个网站，地址是  
     https
     ://www.cnnic.cn  （记得用 
    HTTPS
    协议哦）  如果你的浏览器报告该网站的证书有问题，那恭喜你，你的门户清理干净了 :-)  如果该网站的页面顺利打开，那你就要重新检查一下，看上述操作是否出了差错。          ★可能的副作用 
  有些国内网站已经开始使用 CNNIC 的证书，目前已经知道的有163邮箱（真鄙视网易）。但是甭担心。去除证书后，浏览器在访问上述网站时，会给出一个证书的安全警告。你只需添加一个安全例外即可。         ★引申阅读 
  另外列举一些相关的资料给大伙儿参考：  《  最最最严重安全警告  》  （此文是 AutoProxy 的作者 WCM 亲自写的。09年就已经在网上广为流传）   《  CNNIC 我不信任你——从受信任的根证书里赶走 CNNIC  》  （这篇文章也被多处转贴）   《  noCNNIC  》  （已经有热心网友在 Google Code 平台上搞了一个自动清除工具。 
   补充说明
   ：“Google Code 网站”已在2016年1月关闭，此项目已【失效】）    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  数字证书及 CA 的扫盲介绍  》  《  CNNIC 干过的那些破事儿  》  《  老流氓 CNNIC 的接班人——聊聊“沃通/WoSign”的那些破事儿  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  扫盲 HTTPS 和 SSL/TLS 协议  》（系列）     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html 
    
    
  
  
    
         
    
    
    
 
    
  

&tags=觀點" class="ssk ssk-tumblr"></a>
    <a href="https://buffer.com/add?text=CNNIC 证书的危害及各种清除方法&url=https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html" class="ssk ssk-buffer"></a>
</div>


    <div id="main" role="main" class="container">
      
  <!-- Html Elements for Search -->
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>

  <script src="/opinion/assets/js/simple-jekyll-search.min.js"></script>

  <!-- Configuration -->
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/opinion/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a><time>{date}</time><a class="tag">{category}</a></li>',
    noResultsText: '没找到',
    limit: 100,
    fuzzy: false,
    exclude: ['Welcome']
  })

  </script>

      







  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    


  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    



<article class="post">
  <h1>CNNIC 证书的危害及各种清除方法</h1>
  <!-- Look the author details up from the site config. -->
  

  <div>
    <span class="date">
      2010-02-16
    </span>

    <!-- Output author details if some exist. -->
    
      
    


    <ul class="tag">
      <li>
        <a href="https://nodebe4.github.io/opinion/categories/#编程随想">
          编程随想
        </a>
      </li>
    </ul>

    
        <span>
            <!-- Personal Info. -->
            <a href="https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html" style="font-size:14px;">原文</a>
        </span>
    

    <span style="float: right;" title="编程随想的其它文章">
      <a style="font-size: 14px;" rel="nofollow" href="#sametag" class="tags">#编程随想 的其它文章</a>
    </span>

  </div>

  <div class="entry">
    
    
    
    <div class="post hentry uncustomized-post-template">
<a name="9015246261998111859">
 </a>   <h1 class="post-title entry-title" id="cnnic---"> <a href="https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html"> CNNIC 证书的危害及各种清除方法 </a> </h1>
  <div class="post-header">
    <div class="post-header-line-1">
      <div class="post-inner-index"></div>
    </div>
  </div>
  <div class="post-body entry-content">
前几天已经写了2个帖子（分别是 <a href="https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html"> 扫盲数字证书的基本知识 </a> ， <a href="https://program-think.blogspot.com/2010/02/about-cnnic.html"> CNNIC 干过的那些破事 </a> ）作铺垫，终于开始来说正题——关于 CNNIC 的 CA 证书。 <br /> <a name="more">
  </a>     <!--program-think-->
 <br /> <br />     <h2 id="cnnic-"> ★CNNIC到底干了啥事？ </h2>
 <br /> 从 <a href="https://program-think.blogspot.com/2010/02/about-cnnic.html"> 前面的帖子 </a> ，大伙应该都看出来，CNNIC 这个老流氓可是坏事做尽啊。最近这段时间，CNNIC 不甘寂寞，又在 CA 领域，搞了点小动作。今天先来说一下，这个老流氓又坑蒙拐骗了哪些主？ <br /> <br />     <h3 id="mozillaorg-"> ◇Mozilla.org </h3>
 <br /> 可能某些IT圈外的同学会问，Mozilla是嘛玩意？简单地说，“Mozilla 和 Firefox 的关系”就好比“微软和 Windows 的关系”。因此，Firefox 自带哪些 CA 根证书，是由 Mozilla 组织决定滴。 <br /> 话说2009年初那会儿，CNNIC 里面的某个员工（liu_yan@cinic.cn）到 Mozilla 网站提交了一个申请：要求将 CNNIC 加入 Mozilla 的 CA 列表。此申请经过几个月的讨论。到了2009年底，审批获得通过。至此，CNNIC 正式成为 Mozilla 的 CA 之一（请看“ <a href="https://www.mozilla.org/projects/security/certs/included/" rel="nofollow" target="_blank"> Mozilla官方的CA列表 </a> ”）。懂洋文的同学，请自行到“ <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=476766" rel="nofollow" target="_blank"> 这里 </a> ”看详细的申请过程。 <br /> 因此，从 Firefox 的3.6版本开始，其内置的诸多根证书中，将会包含 CNNIC 这个老流氓提供的根证书。 <br /> <br />     <h3 id="microsoft-"> ◇微软（Microsoft） </h3>
 <br /> 说实在的，俺不清楚老流氓 CNNIC 是如何忽悠微软，让微软把它也加入到 Windows 内置的 CA 列表中的。不过这已经不重要了。现在，老流氓已经把它脏兮兮的触角，伸到了微软那儿。列位看官如若不信，可以去看“ <a href="http://download.microsoft.com/download/1/4/f/14f7067b-69d3-473a-ba5e-70d04aea5929/windows%20root%20certificate%20program%20members%20november%202009.pdf" rel="nofollow" target="_blank"> 微软的 CA 列表 </a> ”。 <br /> 今后，如果你安装了微软新的操作系统，多半其已经包含了 CNNIC 的根证书；即便你一直使用老版本的 Windows，也可能在自动升级了某个 Windows 补丁之后，把 CNNIC 的根证书带到你的电脑中。 <br /> <br />     <h3 id="entrustnet-"> ◇Entrust.net </h3>
 <br /> 除了 Mozilla 和微软，还有一个组织也被 CNNIC 牵连了，那就是 Entrust ——国外一家比较老牌的 CA。正是由于该 CA 比较老牌，因此 Windows 系统（至少包括 Win2000 之后的版本）中以及 Firefox 中，都已经内置了它的根证书。 <br /> 老流氓大概是花了些银子，于是该CA提供的根证书就信任了 CNNIC 制作的某个 SSL 证书（不明白证书间是如何信任的，请回顾一下 <a href="https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html"> 俺扫盲帖 </a> 中提到的“证书信任链”）。 <br /> 到了2010年下半年，Entrust 大概也意识到 CNNIC 的名声太臭，就解除了跟 CNNIC 的信任关系。所以，如今【新的】Entrust 证书，已经不再信任 CNNIC 的 SSL 证书了。如果你的浏览器是新版本或者 Windows 系统更新过新的补丁，其内置的 Entrust 证书应该是安全的，不用清理了。如果你吃不准 Windows 系统或浏览器内置的 Entrust 证书是否安全，请根据本文后续章节“★如何确认门户已经清理干净”介绍的方法判断。 <br /> <br /> <br />     <h2 id="section"> ★这事儿对咱有啥影响？ </h2>
 <br /> 那电脑中有了 CNNIC 的证书，会出现啥鸟事捏？俺大概说一下。 <br /> <br />     <h3 id="section-1"> ◇“中间人攻击”的风险 </h3>
 <br /> 所谓的“中间人攻击”，洋文叫做“Man-In-The-Middle attack”，按首字母缩写成 MITM。 <br /> 在证书导致的各种风险里面，“中间人攻击”的风险，是【最大】的（没有之一），也是最经常被提及滴。 <br /> 俺在 <a href="https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html"> 前面的帖子 </a> 已经讲了 CA 证书对于 HTTPS 协议的重要性（可以防止攻击者伪造虚假网站）。既然老流氓 CNNIC 已经成为合法的 CA，那它就能堂而皇之地制作并发布 CA 证书。然后捏，再配合 GFW 进行【域名污染】。那 GFW 就可以轻松搞定任何网站的 HTTPS 加密传输。 <br /> （如果你不清楚“域名污染”是咋回事儿，可以看俺的扫盲教程——《 <a href="https://program-think.blogspot.com/2014/01/dns.html"> 扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染” </a> 》） <br /> 可能有些小朋友心里会犯嘀咕：GFW 会有这么坏吗？俺想篡改鲁迅他老人家的一句话来回答： <b>
   俺向来是不惮以最坏的恶意，来推测党国
  </b> 。GFW 和 CNNIC 作为党国的2条走狗，一起进行中间人攻击（一个负责在 DNS 上做手脚、另一个负责伪造 CA 证书），简直是“天生一对、黄金搭档”啊！ <br /> <br />     <h3 id="activex--"> ◇ActiveX 控件的风险 </h3>
 <br /> 另外一个大伙儿不太关注的风险，是关于 ActiveX 控件的问题。前几年，很多恶意软件（包括流氓软件、木马）都是通过 IE 控件的技术，安装到大伙儿的电脑上。后来微软加强了对 ActiveX 控件的验证：在 IE 的默认设置下，对于【没有】数字签名的 ActiveX 控件，默认是拒绝安装滴；而对于有数字签名的控件，则会给出提示。 <br /> 因此，老流氓 CNNIC 可以很轻松地给自己的 ActiveX 控件制作数字证书。然后把控件放到网上。某些粗心的电脑用户看到IE跳出的安装控件提示，多半没细看，直接就点了“确定”按钮。 <br /> <br /> <br />     <h2 id="section-2"> ★如何清理门户？ </h2>
 <br /> 其实网上关于如何去掉证书的操作指南，多如牛毛，所以俺就简单说一下，懒得再抓图了。 <br /> 有些浏览器（IE、Chrome、Safari）使用的是操作系统的证书体系。这种情况下，你需要把 CNNIC 证书从操作系统的证书体系中去掉；还有些浏览器（比如：Firefox、Opera）是自己带了一套证书体系。你要进入该浏览器的配置界面，把不要的证书去除即可。 <br /> 下面分不同的浏览器，不同的操作系统，分别介绍： <br /> <br />     <h3 id="windows-iechromesafari-"> ◇清理 Windows 的证书（适用IE、Chrome、Safari） </h3>
 <br /> 对于使用 Windows 下的 IE 或 Chrome 或 Safari 浏览器，则需要执行如下步骤： <br /> 1. 运行 Windows 的证书管理器（到命令行执行 <code class="language-plaintext highlighter-rouge">
   certmgr.msc
  </code> ）。 <br /> 2. 选中“受信任的根证书颁发机构”=&gt;“证书”。 <br /> 3. 查看右边的证书列表。如果里面已经有 CNNIC 的证书，直接跳到第7步。 <br /> 4. 先翻墙到“ <a href="https://code.google.com/p/program-think/downloads/detail?name=cnnic.7z" rel="nofollow" target="_blank"> 这个页面 </a> ”下载现成的 CNNIC 证书。要把证书从 7z 压缩包中解压出来（ <b>
   补充说明
  </b> ：“Google Code 网站”已在2016年1月关闭，此下载页面已【失效】）。 <br /> 5. 鼠标在“受信任的根证书颁发机构”=&gt;“证书”上点右键。在右键菜单中点“所有任务”=&gt;“导入”。 <br /> 6. 出现一个导入向导，根据先导一步步的提示，把上述 CNNIC 证书导入到证书列表中。 <br /> 7. 选中 CNNIC 证书，点右键。在右键菜单中点“属性”。 <br /> 8. 在跳出的属性对话框中，选中“停用这个证书的所有目的”，然后确定。 <br /> 9. 最后，为了保险起见，再把这三个证书，导入到“不信任的证书”中（方法和上述类似）。 <br /> <br /> （注：上述操作仅对当前用户生效。如果你的 Windows 系统中有多个常用的用户帐号，要对每一个用户进行上述设置） <br /> <br />     <h3 id="mac-os-x--safarichrome-"> ◇清理苹果 Mac OS X 的证书（适用于 Safari、Chrome） </h3>
 <br /> 对于使用 Mac OS X 下的 Safari 或 Chrome 浏览器，则需要执行如下步骤： <br /> 请到“实用工具”=&gt;“钥匙串访问”=&gt;“系统根证书”=&gt;“证书”，找到 CNNIC 的证书并双击，改为“永不信任”。 <br /> <br /> （注：如果你的界面是洋文，其操作方式也八九不离十。俺就不再啰嗦了） <br /> <br />     <h3 id="linux--chromesafari-"> ◇清理 Linux 的证书（适用于 Chrome、Safari） </h3>
 <br /> 对于 Debian 或 Ubuntu 系统，以管理员权限进行如下操作： <br /> <b>
   方法1
  </b> <br /> 运行命令： <code class="language-plaintext highlighter-rouge">
   dpkg-reconfigure ca-certificates
  </code> 会出现一个图形界面，把 CNNIC 证书【不勾选】，并确认。 <br /> <b>
   方法2
  </b> <br /> 编辑 <code class="language-plaintext highlighter-rouge">
   /etc/ca-certificates.conf
  </code> 文件，把 CNNIC 证书对应的行删除或注释掉。然后用命令 <code class="language-plaintext highlighter-rouge">
   update-ca-certificates
  </code> 使之生效。 <br /> <br /> （注：对于其它 Linux 发行版本，也有类似操作，俺就不再啰嗦了） <br /> <br />     <h3 id="firefox--"> ◇清理 Firefox 的证书 </h3>
 <br /> 不论是在哪个操作系统下，只要你用的是 Firefox 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤： <br /> 1. 从菜单“工具”=&gt;“选项” ，打开选项对话框 <br /> 2. 切换到“高级”部分，选中“加密”标签页，点“查看证书”按钮。 <br /> 3. 在证书对话框中，切换到“证书机构”。 <br /> 4. 里面的证书列表是按字母排序的。把 CNNIC 打头的都删除。 <br /> <br /> （ <b>
   注：如果某个证书是 Firefox 自带的，则删除之后，下次再打开该对话框，此证书还在。不过不要紧，它的所有“信任设置”，都已经被清空了。
  </b> ） <br /> <br />     <h3 id="opera--"> ◇清理 Opera 的证书 </h3>
 <br /> 不论是在哪个操作系统下，只要你用的是 Opera 浏览器（它的证书体系独立于操作系统的），则需要执行如下步骤： <br /> 1. 从菜单“工具”=&gt;“首选项” ，打开首选项对话框 <br /> 2. 切换到“高级”标签页，在左边选择“安全性”这项。 <br /> 3. 点“管理证书”按钮，出来一个证书的对话框。切换到“证书颁发机构”标签页。 <br /> 4. 找到 CNNIC 的证书并选中，点“查看”按钮，在证书属性对话框中，把“允许连接到使用此证书的网站”的打勾去掉 <br /> （注：俺是基于 Opera 10.10 进行操作。新版本的界面可能略有差异） <br /> <br /> <br />     <h2 id="section-3"> ★如何确认门户已经清理干净？ </h2>
 <br /> <span style="font-weight:bold;font-size:125%;"> <br /> 【补充说明】 <br /> 本文发出之后，过了5年，包括微软、Google、苹果在内的几大操作系统和浏览器厂商开始把 CNNIC 的根证书从默认的信任列表中清除。从那之后，连 CNNIC 自己的官网也不得不使用国外的证书。所以，本小节的下述内容就作废了（俺标注了 <del> 删除线 </del> ）。 </span> <br /> <br /> <del> 为了保险起见，在完成上述的清除工作之后，你需要用浏览器访问一下老流氓的一个网站，地址是 <a href="https://www.cnnic.cn" rel="nofollow" target="_blank"> <b>
     https
    </b> ://www.cnnic.cn </a> （记得用 <b>
    HTTPS
   </b> 协议哦） <br /> 如果你的浏览器报告该网站的证书有问题，那恭喜你，你的门户清理干净了 :-) <br /> 如果该网站的页面顺利打开，那你就要重新检查一下，看上述操作是否出了差错。 </del> <br /> <br /> <br />     <h2 id="section-4"> ★可能的副作用 </h2>
 <br /> 有些国内网站已经开始使用 CNNIC 的证书，目前已经知道的有163邮箱（真鄙视网易）。但是甭担心。去除证书后，浏览器在访问上述网站时，会给出一个证书的安全警告。你只需添加一个安全例外即可。 <br /> <br /> <br />     <h2 id="section-5"> ★引申阅读 </h2>
 <br /> 另外列举一些相关的资料给大伙儿参考： <br /> 《 <a href="http://autoproxy.org/en/node/66" rel="nofollow" target="_blank"> 最最最严重安全警告 </a> 》 <br /> （此文是 AutoProxy 的作者 WCM 亲自写的。09年就已经在网上广为流传） <br /> <br /> 《 <a href="http://felixcat.net/2010/01/throw-out-cnnic/" rel="nofollow" target="_blank"> CNNIC 我不信任你——从受信任的根证书里赶走 CNNIC </a> 》 <br /> （这篇文章也被多处转贴） <br /> <br /> 《 <a href="https://code.google.com/p/nocnnic/" rel="nofollow" target="_blank"> noCNNIC </a> 》 <br /> （已经有热心网友在 Google Code 平台上搞了一个自动清除工具。 <b>
   补充说明
  </b> ：“Google Code 网站”已在2016年1月关闭，此项目已【失效】） <br /> <br /> <br /> <b>
   俺博客上，和本文相关的帖子（需翻墙）
  </b> ： <br /> 《 <a href="https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html"> 数字证书及 CA 的扫盲介绍 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2010/02/about-cnnic.html"> CNNIC 干过的那些破事儿 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2016/09/About-WoSign.html"> 老流氓 CNNIC 的接班人——聊聊“沃通/WoSign”的那些破事儿 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2014/01/dns.html"> 扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染” </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2014/11/https-ssl-tls-0.html"> 扫盲 HTTPS 和 SSL/TLS 协议 </a> 》（系列）     <div class="post-copyright">
<b>
    版权声明
   </b> <br /> 本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者 <a href="mailto:program.think@gmail.com"> 编程随想 </a> 和本文原始地址： <br /> <a href="https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html" id="OriginalPostUrl"> https://program-think.blogspot.com/2010/02/remove-cnnic-cert.html </a>
    </div>
    <div style="clear: both;"></div>
  </div>
  <div class="post-footer" style="margin-bottom:50px;">
    <div class="post-footer-line post-footer-line-1" style="display:none;">
<span class="post-author vcard"> </span> <span class="reaction-buttons"> </span> <span class="star-ratings"> </span> <span class="post-icons"> </span> <span class="post-backlinks post-comment-link"> </span>
    </div>
    <div class="post-footer-line post-footer-line-2 post-toolbar"></div>
    <div class="post-footer-line post-footer-line-3">
<span class="post-location"> </span>
    </div>
  </div>
</div>


  </div>

  <hr style="border-top:1px solid #28323C;"/>

<font size=2px>
  文章版权归原作者所有。
</font>

<div style="text-align:center"><img width="1px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站" style="text-align:center"/></div>

  <div id="sametag">
    <h4 style="display: inline-block;">#编程随想 的其它文章</h4>
    <span>--<a href="https://nodebe4.github.io/opinion/2021-05-09/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-%E6%94%BF%E6%B2%BB-IT-%E7%A7%91%E6%99%AE-%E5%8E%86%E5%8F%B2-%E7%AD%89-97%E6%9C%AC/">最新</a>-</span>
    <span>-<a href="https://nodebe4.github.io/opinion/2009-01-15/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%BC%A0%E5%8F%8A%E6%9C%AC%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E7%AE%80%E4%BB%8B/">最早</a>--</span>
    
      <li>
        <time>2010-03-09</time>
        <a href="https://nodebe4.github.io/opinion/2010-03-09/%E5%A6%82%E4%BD%95%E7%BF%BB%E5%A2%99-%E7%B3%BB%E5%88%97-%E8%87%AA%E7%94%B1%E9%96%80-Tor-%E8%A2%AB%E5%B0%81%E4%B9%8B%E5%90%8E%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E9%80%89%E6%8B%A9/">
          “如何翻墙”系列：自由門——Tor 被封之后的另一个选择
        </a>
      </li>
    
    
      <li>
        <time>2010-02-26</time>
        <a href="https://nodebe4.github.io/opinion/2010-02-26/%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F-%E7%B3%BB%E5%88%97-%E8%AE%A4%E8%AF%86%E4%BD%A0%E8%87%AA%E5%B7%B1-%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F%E6%89%AB%E7%9B%B2%E4%BB%8B%E7%BB%8D/">
          “心智模式”系列：认识你自己——心智模式扫盲介绍
        </a>
      </li>
    
    
      <li>
        <time>2010-02-11</time>
        <a href="https://nodebe4.github.io/opinion/2010-02-11/CNNIC-%E5%B9%B2%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E7%A0%B4%E4%BA%8B%E5%84%BF/">
          CNNIC 干过的那些破事儿
        </a>
      </li>
    
    
      <li>
        <time>2010-02-08</time>
        <a href="https://nodebe4.github.io/opinion/2010-02-08/%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6%E5%8F%8A-CA-%E7%9A%84%E6%89%AB%E7%9B%B2%E4%BB%8B%E7%BB%8D/">
          数字证书及 CA 的扫盲介绍
        </a>
      </li>
    
  </div>


  <hr>
  <div class="pagination">
    
      <span class="prev" >
          <a href="https://nodebe4.github.io/opinion/2010-02-15/%E9%9F%A9%E5%9B%BD%E8%85%90%E8%B4%A5%E6%96%87%E5%8C%96%E4%B8%8E%E5%BB%89%E6%94%BF%E5%BB%BA%E8%AE%BE/">
            前一篇：韩国腐败文化与廉政建设
          </a>
      </span>
    
    
      <span class="next" >
          <a href="https://nodebe4.github.io/opinion/2010-02-17/%E7%90%86%E6%9F%A5%E5%BE%B7-%E6%B3%A2%E6%96%AF%E7%BA%B3-%E7%BE%8E%E5%9B%BD%E5%9B%BD%E5%80%BA%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%8D%B1%E9%99%A9/">
            後一篇：理查德·波斯纳：美国国债的真实危险
          </a>
      </span>
    

    <script>
    /* post pagination keyboard shortcuts */
    document.body.onkeyup = function(e){
      if (e.keyCode == '37') { window.location = 'https://nodebe4.github.io/opinion/2010-02-15/%E9%9F%A9%E5%9B%BD%E8%85%90%E8%B4%A5%E6%96%87%E5%8C%96%E4%B8%8E%E5%BB%89%E6%94%BF%E5%BB%BA%E8%AE%BE/'; } // left arrow key
      if (e.keyCode == '39') { window.location = 'https://nodebe4.github.io/opinion/2010-02-17/%E7%90%86%E6%9F%A5%E5%BE%B7-%E6%B3%A2%E6%96%AF%E7%BA%B3-%E7%BE%8E%E5%9B%BD%E5%9B%BD%E5%80%BA%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%8D%B1%E9%99%A9/'; } // right arrow key
      if (e.keyCode == '45') { window.location = 'https://nodebe4.github.io/opinion/2010-02-26/%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F-%E7%B3%BB%E5%88%97-%E8%AE%A4%E8%AF%86%E4%BD%A0%E8%87%AA%E5%B7%B1-%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F%E6%89%AB%E7%9B%B2%E4%BB%8B%E7%BB%8D/'; } // insert key
      if (e.keyCode == '46') { window.location = 'https://nodebe4.github.io/opinion/2010-02-11/CNNIC-%E5%B9%B2%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E7%A0%B4%E4%BA%8B%E5%84%BF/'; } // delete key
    };
    </script>
    <link rel="stylesheet" type="text/css" href="/opinion/assets/css/fab.css" />

<div class="fab-wrapper">
  <div class="fab-wheel">
    
    
    
    <a class="fab-action fab-action-1" title="上一篇(热键 &#8594;)" href="https://nodebe4.github.io/opinion/2010-02-15/%E9%9F%A9%E5%9B%BD%E8%85%90%E8%B4%A5%E6%96%87%E5%8C%96%E4%B8%8E%E5%BB%89%E6%94%BF%E5%BB%BA%E8%AE%BE/">
      <i>后</i>
    </a>
    
    
    <a class="fab-action fab-action-2" title="下一篇(热键 &#8592;)" href="https://nodebe4.github.io/opinion/2010-02-17/%E7%90%86%E6%9F%A5%E5%BE%B7-%E6%B3%A2%E6%96%AF%E7%BA%B3-%E7%BE%8E%E5%9B%BD%E5%9B%BD%E5%80%BA%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%8D%B1%E9%99%A9/">
      <i>前</i>
    </a>
    
    
    <a class="fab-action fab-action-3" title="<编程随想>上一篇(热键 ins)" href="https://nodebe4.github.io/opinion/2010-02-26/%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F-%E7%B3%BB%E5%88%97-%E8%AE%A4%E8%AF%86%E4%BD%A0%E8%87%AA%E5%B7%B1-%E5%BF%83%E6%99%BA%E6%A8%A1%E5%BC%8F%E6%89%AB%E7%9B%B2%E4%BB%8B%E7%BB%8D/">
      <i>左</i>
    </a>
    
    
    <a class="fab-action fab-action-4" title="<编程随想>下一篇(热键 del)" href="https://nodebe4.github.io/opinion/2010-02-11/CNNIC-%E5%B9%B2%E8%BF%87%E7%9A%84%E9%82%A3%E4%BA%9B%E7%A0%B4%E4%BA%8B%E5%84%BF/">
      <i>右</i>
    </a>
    
  </div>
</div>


  </div>


  

</article>

    </div>

    <div style="z-index:2;">
<script src="/opinion/assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  cornerOffset: 20, // px
  id: 'back-to-top',
  backgroundColor: '#ddd',
  textColor: 'red'
})</script>
</div>


    <div class="wrapper-footer" id="footer">
      <div class="container">
        <footer class="footer">
          <img width="200px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站"/>
<font size=2px>二维码分享本站</font>

<!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:beauti4@protonmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/NodeBE4/opinion" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  
  <li><a href="/opinion/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

    
</ul>





<p><span style="color:blue">内容每小时更新一次.</span> Powered by <a href="https://github.com/AWEEKJ/kiko-now">Kiko Now</a> & <a href="https://github.com/gitalk/gitalk">Gitalk</a> & <a href="https://github.com/duty-machine/news">duty-machine</a>, 站务 <a href="https://be4.herokuapp.com">NodeBE4</a>（<span style="color:red">被墙</span>）</p>





        </footer>
      </div>
    </div>

    



  </body>
</html>
