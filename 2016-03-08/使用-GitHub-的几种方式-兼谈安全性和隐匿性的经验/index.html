<!DOCTYPE html>
<html>
  <head>
  <title>使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验 – 觀點 – 從草根到大師 git.io/JJCxS</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="

      使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验  
  
    
      
    
  
  
先告诉大伙儿一个好消息：  前几天俺把《太子党关系网络》开源到 GitHub 之后，头两天就获得大量网友的关注，以至于  俺这个项目  至少连续两天排到了 GitHub 的“每日 Trending”（这个排名汇总的是：每一天全球关注程度最高的那几个项目）  非常感谢捧场的 GitHub 用户！！！       
       ★本文面向哪些读者？ 
  俺在博客上不止一次提到过，GitHub 是可以【免翻墙】使用的，而且这个网站/公司的管理层，相对来说还是比较靠谱的，不会轻易向咱们朝廷妥协。  因此，GitHub 非常适合用来搞一些敏感的活动（比如：提供翻墙工具、对朝廷/权贵的爆料、等等）  比如俺就  利用 GitHub 开源了《太子党关系网络》  ，并提供下载。  如果你想用 GitHub 这个平台开发翻墙工具，本文值得你参考。  亦或者你也想效仿俺，在 GitHub 上进行反党活动/反政府活动，那本文更加值得你参考。  
       
        ★本文的必要性及重要性 
  先举个反面教材，来说明本文的必要性及重要性。  前些年有一款很知名的翻墙工具叫做“Shadowsocks”。这个工具是开源在 GitHub 上的，用的人很多。  但是该项目的作者 clowwindy 非常缺乏安全意识，【没有】做好身份的隐匿。结果捏，大约半年前，项目作者 clowwindy 被六扇门叫去喝茶。期间估计受到相当程度威胁恐吓，以至于 clowwindy 后来把 GitHub 上的项目关闭了。         ★阅读本文的前提——需要先了解哪些知识？ 
  俺假定本文的读者已经了解如下几个方面的知识：      
版本管理系统的基本概念  Git 的基本概念  GitHub 的基本使用（至少已经注册过帐号）  Git 客户端的基本使用  Linux 或 Mac OS 命令行的基本使用  常见翻墙工具的基本使用（不懂的同学，可以看  俺博客上  的各种教程）  Tor 的使用（本文会重点聊到 Tor，俺写的 FAQ 在“  这里  ”）    
        ★使用 GitHub 的两种方式 
       ◇B/S 方式——基于浏览器 
  这是最基本的使用方式。只要你注册过 GitHub 帐号，自然就知道如何用浏览器访问它。  这种基于浏览器的方式，有时候也称之为“Web 方式”。        ◇C/S 方式——基于客户端软件 
  除了浏览器方式，你还可以通过 Git 客户端软件来操作 GitHub 上的代码仓库。这种方式称之为“客户端软件方式”（为了打字省力，以下简称“Client 方式”）        ◇这两种方式的对比 
  B/S 方式最大的好处是：无需安装额外的软件（通常而言，你的系统中已经有默认的浏览器可供使用）。  B/S 方式的另一个好处是：GitHub 几乎所有的功能，都可以在浏览器界面上搞定。  但是 B/S 方式也有如下一些缺点：  
   1. 安全性
    如果你经常在某个系统的某个浏览器上操作你的 GitHub 帐号。一旦该系统被入侵，很可能导致你的 GitHub 帐号也被入侵。  
   2. 易用性
    有些大批量的操作，在 Web 界面上不太好搞。比如俺前几天上线的项目【太子党关系网络】，里面涉及到上千个文件（包括文本文件，图片文件）。如果通过 Web 界面进行批量操作（添加、删除、改名），就会很麻烦。   相比之下，“Client 方式”正好可以弥补“Web 方式”的这几个缺点。至于如何弥补，下面会聊到。         ★Client 方式支持哪些协议？ 
  当你通过“client 方式”访问 GitHub 的服务器，可以走几种不同的协议。下面俺简要聊聊。        ◇Git 协议 
  此种协议，顾名思义，是 Git 专有的协议。除了用于 Git 客户端与服务端之间的通讯，其它场合用不到它。  注意：Git 协议本身是明文的（无加密）。        ◇HTTP/HTTPS 协议 
  HTTP 协议，大伙儿应该都熟悉，俺就不浪费口水了。  HTTPS 协议，通俗地说就是：“加密的 HTTP”。如今很多网站都开始支持 HTTPS（包括俺博客所在的 Blogspot，从去年10月也开始支持 HTTPS）。大伙儿对它应该也不陌生。        ◇SSH 协议 
  这个协议，对技术菜鸟可能比较陌生。这玩意儿，早先是 Unix 系统管理员用来远程管理服务器的。  SSH 是“Secure Shell”的缩写。显然，这玩意儿是加密的。         ★上述几种客户端协议的优缺点对比 
       ◇Git 协议 
  前面说了，此协议【没有】加密。如果你关注安全性，不应该用它。  首先，明文传输的协议，很容易遭受“旁路嗅探”（sniffer）——导致你丧失数据的【保密性】；  其次，明文传输的协议，很容易在传输过程中被修改（恶意篡改）——导致你丧失数据的【完整性】。        ◇HTTP 协议 
  明文的 HTTP 协议，同样【不】应该使用。理由同上，不再罗嗦。        ◇HTTPS 协议 
  HTTPS 是加密协议，避免了前两个的弊端。  它还有如下几个优点：  
   1. 访客身份也可以使用
    即使你没有注册 GitHub 的用户，也可以通过 HTTPS 协议克隆某个项目  
   2. 更容易穿透防火墙
    很多公司内网的防火墙会屏蔽大部分端口，但是 HTTPS 所用的 443 端口通常是允许通过的（没有屏蔽）。        ◇SSH 协议 
  与 HTTPS 类似，SSH 也是【强加密】滴。该协议提供了如下几个额外的好处：  
   1. 提供了额外的认证方式
    对于 SSH 协议，GitHub 支持“公钥方式”（public key）的认证。当你设置好这种认证方式，就【不再需要】用你的帐号和密码，也可以操作你代码仓库。  这样的好处是——万一你的系统被入侵，顶多泄露你的 key，但【不会】泄露你在 GitHub 的帐号密码。而且 key 被泄漏之后，你可以去你账户的配置界面，把已经泄露的 key 撤销掉。撤销之后，入侵者就算拿到这个 key，也无法再操作你的代码仓库了。  
   2. 支持“项目级”颗粒度的控制
    通俗地说就是：你可以为不同的仓库配置不同的 SSH key。如此一来，一个 key 只能操作一个代码库。一旦 key 泄露，损失就小得多了。         ★如何用 SSH 方式操作 GitHub 的项目？ 
  在 Git 客户端支持的这几个协议中，俺重点来说一下 SSH 协议的配置。  以下配置以 Linux 环境来举例。        ◇1. 安装 openssh 
  大部分知名的 Linux 发行版，其官方的软件库中都已经内置了【openssh】这个软件，你只需用该发行版提供的软件包管理器，一个命令就可以把 openssh 装好。        ◇2. 创建“公钥/私钥对” 
  使用如下命令创建：      ssh-keygen -t rsa -b 4096 -f 文件路径 -C 邮箱地址    
 稍微解释一下：  其中的 
   -t rsa
   表示加密算法的类型是 RSA  其中的 
   -b 4096
   表示密钥是 4096 位/比特  （请注意，不同加密算法的位数，没有可比性。对于 RSA 加密算法，如果你没有指定 -b 参数，则默认值是 1024；以目前的破解水平，2048 应该够安全了。为了保险起见，咱们这里创建 4096 比特的密钥）        ◇4. 密钥文件的存放 
  上述命令中的【文件路径】表示：【私钥】文件存放的位置。然后 
   ssh-keygen
   会自动在这个路径末尾附加 
   .pub
   作为【公钥文件】的路径。  比如说：你输入的私钥文件路径是 
   ~/.ssh/xxxx
   那么生成之后对应的公钥文件的路径就是 
   ~/.ssh/xxxx.pub
    如果你要创建不止一个“公钥私钥对”，要使用具有一定可读性的文件名，以免自己搞混了。  【私钥文件】非常重要，【不要】泄漏给外人。  （经热心读者推荐，补充一篇“保护私钥文件”文章，链接在“  这里  ”），        ◇5. 在 GitHub 上指派密钥 
  GitHub 支持两种方式的 SSH key，分别是【用户级】和【项目级】。  所谓的【用户级】就是说，使用该 key 可以操作所有项目的代码仓库；而【项目级】的 key 只能操作所属项目的代码仓库。   要设置【用户级】的 key，需要先进入“User Profile”页面，然后进入“SSH keys”页面，点击“New SSH key”按钮。  要设置【项目级】的 key，需要先进入该项目的“Settings”页面，然后进入“Deploy keys”页面，点击“Add deploy key”按钮。   点击完上述按钮之后，你需要把【公钥文件】的内容，【 
   原封不动地
   】 copy &amp; paste 到页面中的那个多行文本框里面。  注意事项：  1. 别搞错文件了，需要复制的是【公钥文件】的内容！  2. 粘贴的时候要小心，【不要】加入多余的空格或多余的回车。        ◇6. 测试 SSH 登录 
  如果你当前的系统无需代理就可以访问 GitHub，那么你可以先用命令行测试一下刚才配置好的那个 SSH。  运行如下命令：      ssh -i 公钥文件路径 -T git@github.com    
 运行之后，可能会出现如下提示：      RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)?
    
 你输入 
   yes
   以便继续。之后你会看到一句  You've successfully authenticated  就表示该 ssh key 已经通过登录认证。        ◇7. 修改 SSH 的配置文件 
  测试通过之后，你可以修改 SSH 的配置文件，就不用每次都在命令行参数中指定密钥文件的路径了。如果你用 SSH 方式操作2个以上的项目，很有必要进行如下定制，可以节省很多命令行输入。  SSH 配置文件的路径是： 
   ~/.ssh/config
    如果你系统中没有这个文件，就创建一个。然后用你熟悉的文本编辑器修改这个文件。  下面俺给出一个示例：  你需要把示例中的“别名”改为你自己起的名字（用一个可读性好点的名字）；  把“私钥文件路径”也同样替换为你本机所使用的文件路径。  其它部分【不要】改动。      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径    
  所谓的“别名”，用来替换 URL 中的主机名。比如俺那个 zhao 项目，俺在 
   ~/.ssh/config
   中使用的别名就是 zhao  之后俺如果要 clone 该项目，只需用如下命令：      git clone ssh://zhao/programthink/zhao    
 看到没？俺在 URL 中就不写 github.com 而改为 zhao，那么 openssh 就会去 
   ~/.ssh/config
   中找到 zhao 这个配置项，然后用对应的私钥文件进行 SSH 连接，        ◇8. 后续操作 
  前面几个步骤都搞定之后，你就可以通过 ssh 协议把某个项目 clone 到本地，修改完，最后再 push 到 GitHub 上。整个过程都是通过【强加密的】 SSH 协议完成。         ★使用代理的必要性/重要性 
       ◇为啥要使用【代理】？ 
  为啥要使用代理？简而言之就是：不让 GitHub 的服务器看到你的公网 IP。  看这里，估计某些同学会问了：前面不是说，GitHub 是比较靠谱的公司吗？为啥还担心被它看到（自己的）公网 IP？  俺来回答一下这个问题：  即使 GitHub 这个公司的管理层非常靠谱，丝毫不与朝廷合作，也不向朝廷妥协让步。如果让 GitHub 的服务器知道你的公网 IP，（对于高危人士）依然存在如下几种风险：  
   风险1
    GitHub 有一个“Session”功能，可以显示你最近几次登录时使用的【访问者IP】。  万一某天你的帐号被入侵了，那么入侵者就可以利用该功能，看你的“访问者IP”，如果你没有走代理，那么你的“访问者IP”也就是本人的“公网IP”  
   风险2
    即使 GitHub 公司的管理层非常有骨气，但是【不】保证该公司所有的员工也都是如此。万一某个服务器管理员被朝廷收买了，或许会把某些用户资料卖给朝廷。  （如果你没有走代理）然后六扇门的人就可以通过服务器上记录的“访问者 IP”来定位你的身份。  
   风险3
    即使 GitHub 公司的全体员工都非常有骨气，还有一个风险是：朝廷的御用骇客有可能会入侵 GitHub 的服务器。  这可不是俺耸人听闻。即使牛B如 Google，依然在2011年遭遇了天朝御用骇客的【深度渗透】。那次渗透的程度之深，据说入侵者已经接触到 Gmail 的核心服务器，并拿到了几个敏感人士（民运人士）的邮件内容。这次事件后来被称为“极光行动”，此事直接导致了 Google 高层震怒并退出大陆市场。   综上所述，如果你是一个【高危】人士，并且通过 GitHub 进行敏感活动。访问 GitHub 的时候，一定要【全程代理】。不论你是用 B/S 方式还是 C/S 方式都要牢记这点。        ◇为啥要使用【Tor】作为代理？ 
  
   代理有很多种，俺强烈建议用【基于 Tor 的双重代理】
   。  为啥俺特别强调用【Tor】，并且还强调要用【双重代理】，其中的技术分析，可以参考《  “如何翻墙”系列：关于 Tor 的常见问题解答  》。  由于那篇 FAQ 已经说得很具体了，俺在这里就不重复罗嗦了。简而言之，这么干可以极大增加追踪者对你进行逆向追溯的难度。追踪者的难度越大，你就越安全。  （关于“双重代理”的扫盲教程，可以参见《  如何隐藏你的踪迹，避免跨省追捕  》系列博文的其中一篇）         ★针对不同的 Git 使用方式，如何配置代理？ 
       ◇B/S 方式（Web 方式） 
  这种方式最简单——就跟你翻墙访问其它网站类似——只需要让你的浏览器通过 Tor 的线路访问 GitHub 的页面，就 OK 了。  没用过 Tor 的同学，先去看俺的扫盲教程《  戴“套”翻墻的方法  》。        ◇C/S 方式 下的 HTTPS 协议 
  对于这种方式，你需要修改 Git 的配置参数，让 Git 知道 Tor 代理的 IP 和 端口。  具体的配置命令如下：      git config --global http.proxy SOCKS5h://代理地址:端口号    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为： 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是【 
   Tor Browser
   】，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
          ◇C/S 方式下的 SSH 协议 
  要让 SSH 通过 Tor 的代理，稍微麻烦一点。因为 Tor 默认提供的是 SOCKS 代理，而 OpenSSH 客户端默认又【不】支持 SOCKS 代理。  因此，得依靠第三方的工具，来实现“SSH through SOCKS”。  这里要提醒一下列位看官：  俺说的是“SSH through SOCKS”，而【不是】“SOCKS through SSH”（这两者完全不同）   为了搞定“SSH through SOCKS”，俺选用大名鼎鼎的 netcat（俗称“网猫”）。  由于这个 netcat 名气很大，主流 Linux 发行版的软件仓库中都有它。你只需要用发行版自带的软件包管理器，把 netcat 装上。  说到 netcat，有一个“原版的”以及非常多的【变种】。“原版的 netcat”【不】支持代理，必须用某些支持代理的【变种】。俺推荐的是 OpenBSD 社区开发的 netcat 变种（也叫“OpenBSD netcat”或“netcat-openbsd”）。  如何判断你是否装对了捏？  在装好 netcat 之后，先运行如下命令（命令中的 nc 就是 netcat 的缩写）。如果输出的第一行能看到 OpenBSD 这个单词，就说明你装对了。      nc -h    
  接下来，用如下命令测试“SSH through Tor SOCKS”是否成功。      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -T ssh.github.com    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
     上述测试命令如果最终显示  Permession denied  就说明已经通过 SOCKS 代理连接到 GitHub 了（也就是说，你的 SSH 已经能够走 SOCKS 代理联网了）。  如果没有显示这个信息，而是显示了其它其它信息，你再用如下命令重新试一次      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -Tv ssh.github.com    
 这次俺加了一个 v 选项，可以打印出详细的诊断信息（不过都是洋文）。如果你略懂洋文并略懂网络技术，或许能判断出错的原因所在。   搞定之后，为了方便起见，同样可以把 SSH 的这个 
   ProxyCommand
   命令行选项加入到 SSH 的配置文件。如此一来，以后每次你要连接 GitHub 的服务器，都会自动走 Tor 提供的 SOCKS 代理。  前面俺已经给出了 SSH 配置文件的示例，俺把之前那个示例文件，加上 
   ProxyCommand
   选项之后，变为如下      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径
  ProxyCommand              nc -X 5 -x 代理地址:端口号 %h %p    
 
   注意1：
    假如你的 Tor 客户端运行在【本机】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：Tor 客户端所在主机的 IP 地址。  
   注意2：
    如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须是 
   9150
    如果你用的是 Tor 的其它软件包，则“端口号”使用 
   9050
     引申阅读：  如果你对 netcat 感兴趣，可以参考博文《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》         ★其它注意事项 
       ◇GitHub 帐号的注册 
  要想做到【彻底隐匿】，你需要从一开始就是隐匿的。  所以，当你注册 GitHub 的时候，就得用【基于 Tor 的双重代理】进行注册。俺当年注册 GitHub 就是这么干滴。        ◇邮件地址的设置 
  最好不要公开你的邮箱，这样可以避免一些不必要的风险。  你可以在 GitHub 的用户配置界面中，设置自己的邮箱地址为“私密”。具体操作步骤参见 GitHub 官方的帮助（链接在“  这里  ”）  由于俺前面介绍了基于 SSH 客户端操作 GitHub，当你把邮箱地址设置为【私密】之后，你记得设置一下 git 客户端的 email 选项（命令如下）      git config --global user.email 名称@users.noreply.github.com    
 把上述命令中的“名称”替换为你在 GitHub 上的帐号名。  经过上述命令设置之后，别人看你的提交历史，看到的是类似与 
   xxxx@users.noreply.github.com
   这样的邮箱地址，看不到你真实的邮箱地址。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  “如何翻墙”系列：关于 Tor 的常见问题解答  》  《  “如何翻墙”系列：戴“套”翻墻的方法  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何用 Privoxy 辅助翻墙？  》  《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》  《  【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    <meta property="og:description" content="

      使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验  
  
    
      
    
  
  
先告诉大伙儿一个好消息：  前几天俺把《太子党关系网络》开源到 GitHub 之后，头两天就获得大量网友的关注，以至于  俺这个项目  至少连续两天排到了 GitHub 的“每日 Trending”（这个排名汇总的是：每一天全球关注程度最高的那几个项目）  非常感谢捧场的 GitHub 用户！！！       
       ★本文面向哪些读者？ 
  俺在博客上不止一次提到过，GitHub 是可以【免翻墙】使用的，而且这个网站/公司的管理层，相对来说还是比较靠谱的，不会轻易向咱们朝廷妥协。  因此，GitHub 非常适合用来搞一些敏感的活动（比如：提供翻墙工具、对朝廷/权贵的爆料、等等）  比如俺就  利用 GitHub 开源了《太子党关系网络》  ，并提供下载。  如果你想用 GitHub 这个平台开发翻墙工具，本文值得你参考。  亦或者你也想效仿俺，在 GitHub 上进行反党活动/反政府活动，那本文更加值得你参考。  
       
        ★本文的必要性及重要性 
  先举个反面教材，来说明本文的必要性及重要性。  前些年有一款很知名的翻墙工具叫做“Shadowsocks”。这个工具是开源在 GitHub 上的，用的人很多。  但是该项目的作者 clowwindy 非常缺乏安全意识，【没有】做好身份的隐匿。结果捏，大约半年前，项目作者 clowwindy 被六扇门叫去喝茶。期间估计受到相当程度威胁恐吓，以至于 clowwindy 后来把 GitHub 上的项目关闭了。         ★阅读本文的前提——需要先了解哪些知识？ 
  俺假定本文的读者已经了解如下几个方面的知识：      
版本管理系统的基本概念  Git 的基本概念  GitHub 的基本使用（至少已经注册过帐号）  Git 客户端的基本使用  Linux 或 Mac OS 命令行的基本使用  常见翻墙工具的基本使用（不懂的同学，可以看  俺博客上  的各种教程）  Tor 的使用（本文会重点聊到 Tor，俺写的 FAQ 在“  这里  ”）    
        ★使用 GitHub 的两种方式 
       ◇B/S 方式——基于浏览器 
  这是最基本的使用方式。只要你注册过 GitHub 帐号，自然就知道如何用浏览器访问它。  这种基于浏览器的方式，有时候也称之为“Web 方式”。        ◇C/S 方式——基于客户端软件 
  除了浏览器方式，你还可以通过 Git 客户端软件来操作 GitHub 上的代码仓库。这种方式称之为“客户端软件方式”（为了打字省力，以下简称“Client 方式”）        ◇这两种方式的对比 
  B/S 方式最大的好处是：无需安装额外的软件（通常而言，你的系统中已经有默认的浏览器可供使用）。  B/S 方式的另一个好处是：GitHub 几乎所有的功能，都可以在浏览器界面上搞定。  但是 B/S 方式也有如下一些缺点：  
   1. 安全性
    如果你经常在某个系统的某个浏览器上操作你的 GitHub 帐号。一旦该系统被入侵，很可能导致你的 GitHub 帐号也被入侵。  
   2. 易用性
    有些大批量的操作，在 Web 界面上不太好搞。比如俺前几天上线的项目【太子党关系网络】，里面涉及到上千个文件（包括文本文件，图片文件）。如果通过 Web 界面进行批量操作（添加、删除、改名），就会很麻烦。   相比之下，“Client 方式”正好可以弥补“Web 方式”的这几个缺点。至于如何弥补，下面会聊到。         ★Client 方式支持哪些协议？ 
  当你通过“client 方式”访问 GitHub 的服务器，可以走几种不同的协议。下面俺简要聊聊。        ◇Git 协议 
  此种协议，顾名思义，是 Git 专有的协议。除了用于 Git 客户端与服务端之间的通讯，其它场合用不到它。  注意：Git 协议本身是明文的（无加密）。        ◇HTTP/HTTPS 协议 
  HTTP 协议，大伙儿应该都熟悉，俺就不浪费口水了。  HTTPS 协议，通俗地说就是：“加密的 HTTP”。如今很多网站都开始支持 HTTPS（包括俺博客所在的 Blogspot，从去年10月也开始支持 HTTPS）。大伙儿对它应该也不陌生。        ◇SSH 协议 
  这个协议，对技术菜鸟可能比较陌生。这玩意儿，早先是 Unix 系统管理员用来远程管理服务器的。  SSH 是“Secure Shell”的缩写。显然，这玩意儿是加密的。         ★上述几种客户端协议的优缺点对比 
       ◇Git 协议 
  前面说了，此协议【没有】加密。如果你关注安全性，不应该用它。  首先，明文传输的协议，很容易遭受“旁路嗅探”（sniffer）——导致你丧失数据的【保密性】；  其次，明文传输的协议，很容易在传输过程中被修改（恶意篡改）——导致你丧失数据的【完整性】。        ◇HTTP 协议 
  明文的 HTTP 协议，同样【不】应该使用。理由同上，不再罗嗦。        ◇HTTPS 协议 
  HTTPS 是加密协议，避免了前两个的弊端。  它还有如下几个优点：  
   1. 访客身份也可以使用
    即使你没有注册 GitHub 的用户，也可以通过 HTTPS 协议克隆某个项目  
   2. 更容易穿透防火墙
    很多公司内网的防火墙会屏蔽大部分端口，但是 HTTPS 所用的 443 端口通常是允许通过的（没有屏蔽）。        ◇SSH 协议 
  与 HTTPS 类似，SSH 也是【强加密】滴。该协议提供了如下几个额外的好处：  
   1. 提供了额外的认证方式
    对于 SSH 协议，GitHub 支持“公钥方式”（public key）的认证。当你设置好这种认证方式，就【不再需要】用你的帐号和密码，也可以操作你代码仓库。  这样的好处是——万一你的系统被入侵，顶多泄露你的 key，但【不会】泄露你在 GitHub 的帐号密码。而且 key 被泄漏之后，你可以去你账户的配置界面，把已经泄露的 key 撤销掉。撤销之后，入侵者就算拿到这个 key，也无法再操作你的代码仓库了。  
   2. 支持“项目级”颗粒度的控制
    通俗地说就是：你可以为不同的仓库配置不同的 SSH key。如此一来，一个 key 只能操作一个代码库。一旦 key 泄露，损失就小得多了。         ★如何用 SSH 方式操作 GitHub 的项目？ 
  在 Git 客户端支持的这几个协议中，俺重点来说一下 SSH 协议的配置。  以下配置以 Linux 环境来举例。        ◇1. 安装 openssh 
  大部分知名的 Linux 发行版，其官方的软件库中都已经内置了【openssh】这个软件，你只需用该发行版提供的软件包管理器，一个命令就可以把 openssh 装好。        ◇2. 创建“公钥/私钥对” 
  使用如下命令创建：      ssh-keygen -t rsa -b 4096 -f 文件路径 -C 邮箱地址    
 稍微解释一下：  其中的 
   -t rsa
   表示加密算法的类型是 RSA  其中的 
   -b 4096
   表示密钥是 4096 位/比特  （请注意，不同加密算法的位数，没有可比性。对于 RSA 加密算法，如果你没有指定 -b 参数，则默认值是 1024；以目前的破解水平，2048 应该够安全了。为了保险起见，咱们这里创建 4096 比特的密钥）        ◇4. 密钥文件的存放 
  上述命令中的【文件路径】表示：【私钥】文件存放的位置。然后 
   ssh-keygen
   会自动在这个路径末尾附加 
   .pub
   作为【公钥文件】的路径。  比如说：你输入的私钥文件路径是 
   ~/.ssh/xxxx
   那么生成之后对应的公钥文件的路径就是 
   ~/.ssh/xxxx.pub
    如果你要创建不止一个“公钥私钥对”，要使用具有一定可读性的文件名，以免自己搞混了。  【私钥文件】非常重要，【不要】泄漏给外人。  （经热心读者推荐，补充一篇“保护私钥文件”文章，链接在“  这里  ”），        ◇5. 在 GitHub 上指派密钥 
  GitHub 支持两种方式的 SSH key，分别是【用户级】和【项目级】。  所谓的【用户级】就是说，使用该 key 可以操作所有项目的代码仓库；而【项目级】的 key 只能操作所属项目的代码仓库。   要设置【用户级】的 key，需要先进入“User Profile”页面，然后进入“SSH keys”页面，点击“New SSH key”按钮。  要设置【项目级】的 key，需要先进入该项目的“Settings”页面，然后进入“Deploy keys”页面，点击“Add deploy key”按钮。   点击完上述按钮之后，你需要把【公钥文件】的内容，【 
   原封不动地
   】 copy &amp; paste 到页面中的那个多行文本框里面。  注意事项：  1. 别搞错文件了，需要复制的是【公钥文件】的内容！  2. 粘贴的时候要小心，【不要】加入多余的空格或多余的回车。        ◇6. 测试 SSH 登录 
  如果你当前的系统无需代理就可以访问 GitHub，那么你可以先用命令行测试一下刚才配置好的那个 SSH。  运行如下命令：      ssh -i 公钥文件路径 -T git@github.com    
 运行之后，可能会出现如下提示：      RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)?
    
 你输入 
   yes
   以便继续。之后你会看到一句  You've successfully authenticated  就表示该 ssh key 已经通过登录认证。        ◇7. 修改 SSH 的配置文件 
  测试通过之后，你可以修改 SSH 的配置文件，就不用每次都在命令行参数中指定密钥文件的路径了。如果你用 SSH 方式操作2个以上的项目，很有必要进行如下定制，可以节省很多命令行输入。  SSH 配置文件的路径是： 
   ~/.ssh/config
    如果你系统中没有这个文件，就创建一个。然后用你熟悉的文本编辑器修改这个文件。  下面俺给出一个示例：  你需要把示例中的“别名”改为你自己起的名字（用一个可读性好点的名字）；  把“私钥文件路径”也同样替换为你本机所使用的文件路径。  其它部分【不要】改动。      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径    
  所谓的“别名”，用来替换 URL 中的主机名。比如俺那个 zhao 项目，俺在 
   ~/.ssh/config
   中使用的别名就是 zhao  之后俺如果要 clone 该项目，只需用如下命令：      git clone ssh://zhao/programthink/zhao    
 看到没？俺在 URL 中就不写 github.com 而改为 zhao，那么 openssh 就会去 
   ~/.ssh/config
   中找到 zhao 这个配置项，然后用对应的私钥文件进行 SSH 连接，        ◇8. 后续操作 
  前面几个步骤都搞定之后，你就可以通过 ssh 协议把某个项目 clone 到本地，修改完，最后再 push 到 GitHub 上。整个过程都是通过【强加密的】 SSH 协议完成。         ★使用代理的必要性/重要性 
       ◇为啥要使用【代理】？ 
  为啥要使用代理？简而言之就是：不让 GitHub 的服务器看到你的公网 IP。  看这里，估计某些同学会问了：前面不是说，GitHub 是比较靠谱的公司吗？为啥还担心被它看到（自己的）公网 IP？  俺来回答一下这个问题：  即使 GitHub 这个公司的管理层非常靠谱，丝毫不与朝廷合作，也不向朝廷妥协让步。如果让 GitHub 的服务器知道你的公网 IP，（对于高危人士）依然存在如下几种风险：  
   风险1
    GitHub 有一个“Session”功能，可以显示你最近几次登录时使用的【访问者IP】。  万一某天你的帐号被入侵了，那么入侵者就可以利用该功能，看你的“访问者IP”，如果你没有走代理，那么你的“访问者IP”也就是本人的“公网IP”  
   风险2
    即使 GitHub 公司的管理层非常有骨气，但是【不】保证该公司所有的员工也都是如此。万一某个服务器管理员被朝廷收买了，或许会把某些用户资料卖给朝廷。  （如果你没有走代理）然后六扇门的人就可以通过服务器上记录的“访问者 IP”来定位你的身份。  
   风险3
    即使 GitHub 公司的全体员工都非常有骨气，还有一个风险是：朝廷的御用骇客有可能会入侵 GitHub 的服务器。  这可不是俺耸人听闻。即使牛B如 Google，依然在2011年遭遇了天朝御用骇客的【深度渗透】。那次渗透的程度之深，据说入侵者已经接触到 Gmail 的核心服务器，并拿到了几个敏感人士（民运人士）的邮件内容。这次事件后来被称为“极光行动”，此事直接导致了 Google 高层震怒并退出大陆市场。   综上所述，如果你是一个【高危】人士，并且通过 GitHub 进行敏感活动。访问 GitHub 的时候，一定要【全程代理】。不论你是用 B/S 方式还是 C/S 方式都要牢记这点。        ◇为啥要使用【Tor】作为代理？ 
  
   代理有很多种，俺强烈建议用【基于 Tor 的双重代理】
   。  为啥俺特别强调用【Tor】，并且还强调要用【双重代理】，其中的技术分析，可以参考《  “如何翻墙”系列：关于 Tor 的常见问题解答  》。  由于那篇 FAQ 已经说得很具体了，俺在这里就不重复罗嗦了。简而言之，这么干可以极大增加追踪者对你进行逆向追溯的难度。追踪者的难度越大，你就越安全。  （关于“双重代理”的扫盲教程，可以参见《  如何隐藏你的踪迹，避免跨省追捕  》系列博文的其中一篇）         ★针对不同的 Git 使用方式，如何配置代理？ 
       ◇B/S 方式（Web 方式） 
  这种方式最简单——就跟你翻墙访问其它网站类似——只需要让你的浏览器通过 Tor 的线路访问 GitHub 的页面，就 OK 了。  没用过 Tor 的同学，先去看俺的扫盲教程《  戴“套”翻墻的方法  》。        ◇C/S 方式 下的 HTTPS 协议 
  对于这种方式，你需要修改 Git 的配置参数，让 Git 知道 Tor 代理的 IP 和 端口。  具体的配置命令如下：      git config --global http.proxy SOCKS5h://代理地址:端口号    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为： 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是【 
   Tor Browser
   】，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
          ◇C/S 方式下的 SSH 协议 
  要让 SSH 通过 Tor 的代理，稍微麻烦一点。因为 Tor 默认提供的是 SOCKS 代理，而 OpenSSH 客户端默认又【不】支持 SOCKS 代理。  因此，得依靠第三方的工具，来实现“SSH through SOCKS”。  这里要提醒一下列位看官：  俺说的是“SSH through SOCKS”，而【不是】“SOCKS through SSH”（这两者完全不同）   为了搞定“SSH through SOCKS”，俺选用大名鼎鼎的 netcat（俗称“网猫”）。  由于这个 netcat 名气很大，主流 Linux 发行版的软件仓库中都有它。你只需要用发行版自带的软件包管理器，把 netcat 装上。  说到 netcat，有一个“原版的”以及非常多的【变种】。“原版的 netcat”【不】支持代理，必须用某些支持代理的【变种】。俺推荐的是 OpenBSD 社区开发的 netcat 变种（也叫“OpenBSD netcat”或“netcat-openbsd”）。  如何判断你是否装对了捏？  在装好 netcat 之后，先运行如下命令（命令中的 nc 就是 netcat 的缩写）。如果输出的第一行能看到 OpenBSD 这个单词，就说明你装对了。      nc -h    
  接下来，用如下命令测试“SSH through Tor SOCKS”是否成功。      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -T ssh.github.com    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
     上述测试命令如果最终显示  Permession denied  就说明已经通过 SOCKS 代理连接到 GitHub 了（也就是说，你的 SSH 已经能够走 SOCKS 代理联网了）。  如果没有显示这个信息，而是显示了其它其它信息，你再用如下命令重新试一次      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -Tv ssh.github.com    
 这次俺加了一个 v 选项，可以打印出详细的诊断信息（不过都是洋文）。如果你略懂洋文并略懂网络技术，或许能判断出错的原因所在。   搞定之后，为了方便起见，同样可以把 SSH 的这个 
   ProxyCommand
   命令行选项加入到 SSH 的配置文件。如此一来，以后每次你要连接 GitHub 的服务器，都会自动走 Tor 提供的 SOCKS 代理。  前面俺已经给出了 SSH 配置文件的示例，俺把之前那个示例文件，加上 
   ProxyCommand
   选项之后，变为如下      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径
  ProxyCommand              nc -X 5 -x 代理地址:端口号 %h %p    
 
   注意1：
    假如你的 Tor 客户端运行在【本机】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：Tor 客户端所在主机的 IP 地址。  
   注意2：
    如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须是 
   9150
    如果你用的是 Tor 的其它软件包，则“端口号”使用 
   9050
     引申阅读：  如果你对 netcat 感兴趣，可以参考博文《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》         ★其它注意事项 
       ◇GitHub 帐号的注册 
  要想做到【彻底隐匿】，你需要从一开始就是隐匿的。  所以，当你注册 GitHub 的时候，就得用【基于 Tor 的双重代理】进行注册。俺当年注册 GitHub 就是这么干滴。        ◇邮件地址的设置 
  最好不要公开你的邮箱，这样可以避免一些不必要的风险。  你可以在 GitHub 的用户配置界面中，设置自己的邮箱地址为“私密”。具体操作步骤参见 GitHub 官方的帮助（链接在“  这里  ”）  由于俺前面介绍了基于 SSH 客户端操作 GitHub，当你把邮箱地址设置为【私密】之后，你记得设置一下 git 客户端的 email 选项（命令如下）      git config --global user.email 名称@users.noreply.github.com    
 把上述命令中的“名称”替换为你在 GitHub 上的帐号名。  经过上述命令设置之后，别人看你的提交历史，看到的是类似与 
   xxxx@users.noreply.github.com
   这样的邮箱地址，看不到你真实的邮箱地址。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  “如何翻墙”系列：关于 Tor 的常见问题解答  》  《  “如何翻墙”系列：戴“套”翻墻的方法  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何用 Privoxy 辅助翻墙？  》  《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》  《  【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    
    <meta name="author" content="觀點" />

    
    <meta property="og:title" content="使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验" />
    <meta property="twitter:title" content="使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验" />
    

  <link rel="stylesheet" type="text/css" href="/opinion/style.css" />
  <link rel="alternate" type="application/rss+xml" title="觀點 - 從草根到大師 git.io/JJCxS" href="/opinion/feed.xml" />

  <!-- Social Share Kit CSS -->
  <link rel="stylesheet" href="/opinion/assets/css/social-share-kit.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/bootstrap.min.css" type="text/css">
  <script type="text/javascript" src="/opinion/assets/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="/opinion/assets/js/page.js"></script>

</head>

  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      

      <div class="site-info">
        <h1 class="site-name" style="display: inline-block;"><a href="/opinion/">觀點</a></h1>
        <i class="site-description" style="font-size: 12px;">從草根到大師 git.io/JJCxS</i>
      </div>

      <nav>
        <span id="search-container" >
          <a href="/opinion/tools"><i class="fa fa-bookmark twitter" title="百宝箱"></i></a>
        <a><i class="fa fa-search" title="限前100結果"></i></a><input type="text" id="search-input" placeholder="標題 作者 來源 日期 (17499)"
          style="margin: 10px 0px 0px 0px; height: 30px;width: auto" title="本站最正確的打開方式">
        </span>
        
        
        <a href="/opinion/categories" style="color: Tomato;"><i class="fa fa-tags" title="分类"></i></a>
        
        
        
        <a href="https://be4.herokuapp.com/" style="color: #003366;"><i class="fa fa-comments" title="论坛"></i></a>
        
        
        
        <a href="/opinion/about"><i class="fa fa-info-circle" title="关于"></i></a>
        
        
        <a title="电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇，del同来源旧一篇" onclick="toggle_visibility('help')"><i class="fa fa-question-circle"></i></a>
        <a id="fa-home" href="https://nodebe4.github.io" title="BE4服务列表" onclick="//toggle_visibility('site-list')"><i class="fa fa-home" aria-hidden="true"></i></a>
      </nav>

    </header>
    <div id="site-list" class="tags" style="display: block;text-align: right;border-bottom: 1px solid lightGray;"><noscript><span style="background-color: #e8e8e8;color: #d10000;font-size: 14px;">开启浏览器JavaScript以获取搜索功能和更好的浏览体验</span></noscript></div>
    <p id="help" style="font-size: 14px;display: none;text-align: right;"><span style="color:green;">电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇, del同来源旧一篇</span>; <span style="color:orange">对应触屏FAB：上下右左</span>; 轉Markdown<a href="https://euangoddard.github.io/clipboard2markdown/"><i class="fa fa-file-text-o"></i></a></p>
  </div>
</div>

<script type="text/javascript" >
  function toggle_visibility(id){
    var help = document.getElementById(id)
    if (help.style.display=='none'){
      help.style.display='block';
    }else{
      help.style.display='none';
    }
  }

  const url = "https://nodebe4.github.io/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    // var homebtn = document.getElementById("fa-home")
    // homebtn.removeAttribute("href")
    var content = document.getElementById("site-list");
    content.innerHTML = ''
    var ul = document.createElement("ul")
    ul.classList.add("label")
    content.appendChild(ul)
    var cnt = 0

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var li = document.createElement('li')
        li.classList.add("tag")
        li.id = 'site-' + cnt
        ul.appendChild(li)
        var a0 = document.createElement('a')
        li.appendChild(a0)
        a0.href = item.url[0]
        var span = document.createElement('span')
        a0.appendChild(span)
        span.innerText = item['name']
        // span.style.backgroundColor = item['background-color']
        // span.style.color='#E4CBC3'
        span.style.color = item['background-color']
        span.style['font-size'] = '14px'
        cnt += 1
        // test_alive(li.id, a0.href)
      })
    })
  })

function test_alive(id, url){
  var divstatus = document.getElementById(id)
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        if (data.responseText.includes('502')){
          // divstatus.style.color='#FBB7B7'
          // divstatus.style.color='gray'
          // divstatus.title = "服务器无响应"
          divstatus.parentNode.removeChild(divstatus)
        }else{
          // divstatus.style.color='#B6FAC8'
          divstatus.title = data.responseText
        }
      }
  });
  return divstatus
}
</script>



    <!-- Left & centered positioning -->

<div class="ssk-sticky ssk-right ssk-center ssk-sticky-hide-xs ssk-group ssk-round">
  
    <a href="https://be4news.pythonanywhere.com/archivenow/ia/https%3A%2F%2Fprogram-think.blogspot.com%2F2016%2F03%2FGitHub-Security-Tips.html" class="ssk ssk-link" title="存到互联网档案馆" target="_blank"></a>
    <a href="https://www.facebook.com/sharer.php?u=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html" class="ssk ssk-facebook"></a>
    <a href="https://twitter.com/intent/tweet?url=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html&text=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验&hashtags=觀點" class="ssk ssk-twitter"></a>
    <a href="https://reddit.com/submit?url=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html&title=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验" class="ssk ssk-reddit"></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html&title=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验" class="ssk ssk-linkedin"></a>
    <a href="mailto:{email_address}?subject=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验&body=

      使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验  
  
    
      
    
  
  
先告诉大伙儿一个好消息：  前几天俺把《太子党关系网络》开源到 GitHub 之后，头两天就获得大量网友的关注，以至于  俺这个项目  至少连续两天排到了 GitHub 的“每日 Trending”（这个排名汇总的是：每一天全球关注程度最高的那几个项目）  非常感谢捧场的 GitHub 用户！！！       
       ★本文面向哪些读者？ 
  俺在博客上不止一次提到过，GitHub 是可以【免翻墙】使用的，而且这个网站/公司的管理层，相对来说还是比较靠谱的，不会轻易向咱们朝廷妥协。  因此，GitHub 非常适合用来搞一些敏感的活动（比如：提供翻墙工具、对朝廷/权贵的爆料、等等）  比如俺就  利用 GitHub 开源了《太子党关系网络》  ，并提供下载。  如果你想用 GitHub 这个平台开发翻墙工具，本文值得你参考。  亦或者你也想效仿俺，在 GitHub 上进行反党活动/反政府活动，那本文更加值得你参考。  
       
        ★本文的必要性及重要性 
  先举个反面教材，来说明本文的必要性及重要性。  前些年有一款很知名的翻墙工具叫做“Shadowsocks”。这个工具是开源在 GitHub 上的，用的人很多。  但是该项目的作者 clowwindy 非常缺乏安全意识，【没有】做好身份的隐匿。结果捏，大约半年前，项目作者 clowwindy 被六扇门叫去喝茶。期间估计受到相当程度威胁恐吓，以至于 clowwindy 后来把 GitHub 上的项目关闭了。         ★阅读本文的前提——需要先了解哪些知识？ 
  俺假定本文的读者已经了解如下几个方面的知识：      
版本管理系统的基本概念  Git 的基本概念  GitHub 的基本使用（至少已经注册过帐号）  Git 客户端的基本使用  Linux 或 Mac OS 命令行的基本使用  常见翻墙工具的基本使用（不懂的同学，可以看  俺博客上  的各种教程）  Tor 的使用（本文会重点聊到 Tor，俺写的 FAQ 在“  这里  ”）    
        ★使用 GitHub 的两种方式 
       ◇B/S 方式——基于浏览器 
  这是最基本的使用方式。只要你注册过 GitHub 帐号，自然就知道如何用浏览器访问它。  这种基于浏览器的方式，有时候也称之为“Web 方式”。        ◇C/S 方式——基于客户端软件 
  除了浏览器方式，你还可以通过 Git 客户端软件来操作 GitHub 上的代码仓库。这种方式称之为“客户端软件方式”（为了打字省力，以下简称“Client 方式”）        ◇这两种方式的对比 
  B/S 方式最大的好处是：无需安装额外的软件（通常而言，你的系统中已经有默认的浏览器可供使用）。  B/S 方式的另一个好处是：GitHub 几乎所有的功能，都可以在浏览器界面上搞定。  但是 B/S 方式也有如下一些缺点：  
   1. 安全性
    如果你经常在某个系统的某个浏览器上操作你的 GitHub 帐号。一旦该系统被入侵，很可能导致你的 GitHub 帐号也被入侵。  
   2. 易用性
    有些大批量的操作，在 Web 界面上不太好搞。比如俺前几天上线的项目【太子党关系网络】，里面涉及到上千个文件（包括文本文件，图片文件）。如果通过 Web 界面进行批量操作（添加、删除、改名），就会很麻烦。   相比之下，“Client 方式”正好可以弥补“Web 方式”的这几个缺点。至于如何弥补，下面会聊到。         ★Client 方式支持哪些协议？ 
  当你通过“client 方式”访问 GitHub 的服务器，可以走几种不同的协议。下面俺简要聊聊。        ◇Git 协议 
  此种协议，顾名思义，是 Git 专有的协议。除了用于 Git 客户端与服务端之间的通讯，其它场合用不到它。  注意：Git 协议本身是明文的（无加密）。        ◇HTTP/HTTPS 协议 
  HTTP 协议，大伙儿应该都熟悉，俺就不浪费口水了。  HTTPS 协议，通俗地说就是：“加密的 HTTP”。如今很多网站都开始支持 HTTPS（包括俺博客所在的 Blogspot，从去年10月也开始支持 HTTPS）。大伙儿对它应该也不陌生。        ◇SSH 协议 
  这个协议，对技术菜鸟可能比较陌生。这玩意儿，早先是 Unix 系统管理员用来远程管理服务器的。  SSH 是“Secure Shell”的缩写。显然，这玩意儿是加密的。         ★上述几种客户端协议的优缺点对比 
       ◇Git 协议 
  前面说了，此协议【没有】加密。如果你关注安全性，不应该用它。  首先，明文传输的协议，很容易遭受“旁路嗅探”（sniffer）——导致你丧失数据的【保密性】；  其次，明文传输的协议，很容易在传输过程中被修改（恶意篡改）——导致你丧失数据的【完整性】。        ◇HTTP 协议 
  明文的 HTTP 协议，同样【不】应该使用。理由同上，不再罗嗦。        ◇HTTPS 协议 
  HTTPS 是加密协议，避免了前两个的弊端。  它还有如下几个优点：  
   1. 访客身份也可以使用
    即使你没有注册 GitHub 的用户，也可以通过 HTTPS 协议克隆某个项目  
   2. 更容易穿透防火墙
    很多公司内网的防火墙会屏蔽大部分端口，但是 HTTPS 所用的 443 端口通常是允许通过的（没有屏蔽）。        ◇SSH 协议 
  与 HTTPS 类似，SSH 也是【强加密】滴。该协议提供了如下几个额外的好处：  
   1. 提供了额外的认证方式
    对于 SSH 协议，GitHub 支持“公钥方式”（public key）的认证。当你设置好这种认证方式，就【不再需要】用你的帐号和密码，也可以操作你代码仓库。  这样的好处是——万一你的系统被入侵，顶多泄露你的 key，但【不会】泄露你在 GitHub 的帐号密码。而且 key 被泄漏之后，你可以去你账户的配置界面，把已经泄露的 key 撤销掉。撤销之后，入侵者就算拿到这个 key，也无法再操作你的代码仓库了。  
   2. 支持“项目级”颗粒度的控制
    通俗地说就是：你可以为不同的仓库配置不同的 SSH key。如此一来，一个 key 只能操作一个代码库。一旦 key 泄露，损失就小得多了。         ★如何用 SSH 方式操作 GitHub 的项目？ 
  在 Git 客户端支持的这几个协议中，俺重点来说一下 SSH 协议的配置。  以下配置以 Linux 环境来举例。        ◇1. 安装 openssh 
  大部分知名的 Linux 发行版，其官方的软件库中都已经内置了【openssh】这个软件，你只需用该发行版提供的软件包管理器，一个命令就可以把 openssh 装好。        ◇2. 创建“公钥/私钥对” 
  使用如下命令创建：      ssh-keygen -t rsa -b 4096 -f 文件路径 -C 邮箱地址    
 稍微解释一下：  其中的 
   -t rsa
   表示加密算法的类型是 RSA  其中的 
   -b 4096
   表示密钥是 4096 位/比特  （请注意，不同加密算法的位数，没有可比性。对于 RSA 加密算法，如果你没有指定 -b 参数，则默认值是 1024；以目前的破解水平，2048 应该够安全了。为了保险起见，咱们这里创建 4096 比特的密钥）        ◇4. 密钥文件的存放 
  上述命令中的【文件路径】表示：【私钥】文件存放的位置。然后 
   ssh-keygen
   会自动在这个路径末尾附加 
   .pub
   作为【公钥文件】的路径。  比如说：你输入的私钥文件路径是 
   ~/.ssh/xxxx
   那么生成之后对应的公钥文件的路径就是 
   ~/.ssh/xxxx.pub
    如果你要创建不止一个“公钥私钥对”，要使用具有一定可读性的文件名，以免自己搞混了。  【私钥文件】非常重要，【不要】泄漏给外人。  （经热心读者推荐，补充一篇“保护私钥文件”文章，链接在“  这里  ”），        ◇5. 在 GitHub 上指派密钥 
  GitHub 支持两种方式的 SSH key，分别是【用户级】和【项目级】。  所谓的【用户级】就是说，使用该 key 可以操作所有项目的代码仓库；而【项目级】的 key 只能操作所属项目的代码仓库。   要设置【用户级】的 key，需要先进入“User Profile”页面，然后进入“SSH keys”页面，点击“New SSH key”按钮。  要设置【项目级】的 key，需要先进入该项目的“Settings”页面，然后进入“Deploy keys”页面，点击“Add deploy key”按钮。   点击完上述按钮之后，你需要把【公钥文件】的内容，【 
   原封不动地
   】 copy &amp; paste 到页面中的那个多行文本框里面。  注意事项：  1. 别搞错文件了，需要复制的是【公钥文件】的内容！  2. 粘贴的时候要小心，【不要】加入多余的空格或多余的回车。        ◇6. 测试 SSH 登录 
  如果你当前的系统无需代理就可以访问 GitHub，那么你可以先用命令行测试一下刚才配置好的那个 SSH。  运行如下命令：      ssh -i 公钥文件路径 -T git@github.com    
 运行之后，可能会出现如下提示：      RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)?
    
 你输入 
   yes
   以便继续。之后你会看到一句  You've successfully authenticated  就表示该 ssh key 已经通过登录认证。        ◇7. 修改 SSH 的配置文件 
  测试通过之后，你可以修改 SSH 的配置文件，就不用每次都在命令行参数中指定密钥文件的路径了。如果你用 SSH 方式操作2个以上的项目，很有必要进行如下定制，可以节省很多命令行输入。  SSH 配置文件的路径是： 
   ~/.ssh/config
    如果你系统中没有这个文件，就创建一个。然后用你熟悉的文本编辑器修改这个文件。  下面俺给出一个示例：  你需要把示例中的“别名”改为你自己起的名字（用一个可读性好点的名字）；  把“私钥文件路径”也同样替换为你本机所使用的文件路径。  其它部分【不要】改动。      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径    
  所谓的“别名”，用来替换 URL 中的主机名。比如俺那个 zhao 项目，俺在 
   ~/.ssh/config
   中使用的别名就是 zhao  之后俺如果要 clone 该项目，只需用如下命令：      git clone ssh://zhao/programthink/zhao    
 看到没？俺在 URL 中就不写 github.com 而改为 zhao，那么 openssh 就会去 
   ~/.ssh/config
   中找到 zhao 这个配置项，然后用对应的私钥文件进行 SSH 连接，        ◇8. 后续操作 
  前面几个步骤都搞定之后，你就可以通过 ssh 协议把某个项目 clone 到本地，修改完，最后再 push 到 GitHub 上。整个过程都是通过【强加密的】 SSH 协议完成。         ★使用代理的必要性/重要性 
       ◇为啥要使用【代理】？ 
  为啥要使用代理？简而言之就是：不让 GitHub 的服务器看到你的公网 IP。  看这里，估计某些同学会问了：前面不是说，GitHub 是比较靠谱的公司吗？为啥还担心被它看到（自己的）公网 IP？  俺来回答一下这个问题：  即使 GitHub 这个公司的管理层非常靠谱，丝毫不与朝廷合作，也不向朝廷妥协让步。如果让 GitHub 的服务器知道你的公网 IP，（对于高危人士）依然存在如下几种风险：  
   风险1
    GitHub 有一个“Session”功能，可以显示你最近几次登录时使用的【访问者IP】。  万一某天你的帐号被入侵了，那么入侵者就可以利用该功能，看你的“访问者IP”，如果你没有走代理，那么你的“访问者IP”也就是本人的“公网IP”  
   风险2
    即使 GitHub 公司的管理层非常有骨气，但是【不】保证该公司所有的员工也都是如此。万一某个服务器管理员被朝廷收买了，或许会把某些用户资料卖给朝廷。  （如果你没有走代理）然后六扇门的人就可以通过服务器上记录的“访问者 IP”来定位你的身份。  
   风险3
    即使 GitHub 公司的全体员工都非常有骨气，还有一个风险是：朝廷的御用骇客有可能会入侵 GitHub 的服务器。  这可不是俺耸人听闻。即使牛B如 Google，依然在2011年遭遇了天朝御用骇客的【深度渗透】。那次渗透的程度之深，据说入侵者已经接触到 Gmail 的核心服务器，并拿到了几个敏感人士（民运人士）的邮件内容。这次事件后来被称为“极光行动”，此事直接导致了 Google 高层震怒并退出大陆市场。   综上所述，如果你是一个【高危】人士，并且通过 GitHub 进行敏感活动。访问 GitHub 的时候，一定要【全程代理】。不论你是用 B/S 方式还是 C/S 方式都要牢记这点。        ◇为啥要使用【Tor】作为代理？ 
  
   代理有很多种，俺强烈建议用【基于 Tor 的双重代理】
   。  为啥俺特别强调用【Tor】，并且还强调要用【双重代理】，其中的技术分析，可以参考《  “如何翻墙”系列：关于 Tor 的常见问题解答  》。  由于那篇 FAQ 已经说得很具体了，俺在这里就不重复罗嗦了。简而言之，这么干可以极大增加追踪者对你进行逆向追溯的难度。追踪者的难度越大，你就越安全。  （关于“双重代理”的扫盲教程，可以参见《  如何隐藏你的踪迹，避免跨省追捕  》系列博文的其中一篇）         ★针对不同的 Git 使用方式，如何配置代理？ 
       ◇B/S 方式（Web 方式） 
  这种方式最简单——就跟你翻墙访问其它网站类似——只需要让你的浏览器通过 Tor 的线路访问 GitHub 的页面，就 OK 了。  没用过 Tor 的同学，先去看俺的扫盲教程《  戴“套”翻墻的方法  》。        ◇C/S 方式 下的 HTTPS 协议 
  对于这种方式，你需要修改 Git 的配置参数，让 Git 知道 Tor 代理的 IP 和 端口。  具体的配置命令如下：      git config --global http.proxy SOCKS5h://代理地址:端口号    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为： 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是【 
   Tor Browser
   】，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
          ◇C/S 方式下的 SSH 协议 
  要让 SSH 通过 Tor 的代理，稍微麻烦一点。因为 Tor 默认提供的是 SOCKS 代理，而 OpenSSH 客户端默认又【不】支持 SOCKS 代理。  因此，得依靠第三方的工具，来实现“SSH through SOCKS”。  这里要提醒一下列位看官：  俺说的是“SSH through SOCKS”，而【不是】“SOCKS through SSH”（这两者完全不同）   为了搞定“SSH through SOCKS”，俺选用大名鼎鼎的 netcat（俗称“网猫”）。  由于这个 netcat 名气很大，主流 Linux 发行版的软件仓库中都有它。你只需要用发行版自带的软件包管理器，把 netcat 装上。  说到 netcat，有一个“原版的”以及非常多的【变种】。“原版的 netcat”【不】支持代理，必须用某些支持代理的【变种】。俺推荐的是 OpenBSD 社区开发的 netcat 变种（也叫“OpenBSD netcat”或“netcat-openbsd”）。  如何判断你是否装对了捏？  在装好 netcat 之后，先运行如下命令（命令中的 nc 就是 netcat 的缩写）。如果输出的第一行能看到 OpenBSD 这个单词，就说明你装对了。      nc -h    
  接下来，用如下命令测试“SSH through Tor SOCKS”是否成功。      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -T ssh.github.com    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
     上述测试命令如果最终显示  Permession denied  就说明已经通过 SOCKS 代理连接到 GitHub 了（也就是说，你的 SSH 已经能够走 SOCKS 代理联网了）。  如果没有显示这个信息，而是显示了其它其它信息，你再用如下命令重新试一次      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -Tv ssh.github.com    
 这次俺加了一个 v 选项，可以打印出详细的诊断信息（不过都是洋文）。如果你略懂洋文并略懂网络技术，或许能判断出错的原因所在。   搞定之后，为了方便起见，同样可以把 SSH 的这个 
   ProxyCommand
   命令行选项加入到 SSH 的配置文件。如此一来，以后每次你要连接 GitHub 的服务器，都会自动走 Tor 提供的 SOCKS 代理。  前面俺已经给出了 SSH 配置文件的示例，俺把之前那个示例文件，加上 
   ProxyCommand
   选项之后，变为如下      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径
  ProxyCommand              nc -X 5 -x 代理地址:端口号 %h %p    
 
   注意1：
    假如你的 Tor 客户端运行在【本机】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：Tor 客户端所在主机的 IP 地址。  
   注意2：
    如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须是 
   9150
    如果你用的是 Tor 的其它软件包，则“端口号”使用 
   9050
     引申阅读：  如果你对 netcat 感兴趣，可以参考博文《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》         ★其它注意事项 
       ◇GitHub 帐号的注册 
  要想做到【彻底隐匿】，你需要从一开始就是隐匿的。  所以，当你注册 GitHub 的时候，就得用【基于 Tor 的双重代理】进行注册。俺当年注册 GitHub 就是这么干滴。        ◇邮件地址的设置 
  最好不要公开你的邮箱，这样可以避免一些不必要的风险。  你可以在 GitHub 的用户配置界面中，设置自己的邮箱地址为“私密”。具体操作步骤参见 GitHub 官方的帮助（链接在“  这里  ”）  由于俺前面介绍了基于 SSH 客户端操作 GitHub，当你把邮箱地址设置为【私密】之后，你记得设置一下 git 客户端的 email 选项（命令如下）      git config --global user.email 名称@users.noreply.github.com    
 把上述命令中的“名称”替换为你在 GitHub 上的帐号名。  经过上述命令设置之后，别人看你的提交历史，看到的是类似与 
   xxxx@users.noreply.github.com
   这样的邮箱地址，看不到你真实的邮箱地址。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  “如何翻墙”系列：关于 Tor 的常见问题解答  》  《  “如何翻墙”系列：戴“套”翻墻的方法  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何用 Privoxy 辅助翻墙？  》  《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》  《  【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html 
    
    
  
  
    
         
    
    
    
 
    
  

" class="ssk ssk-email"></a>
    <a href="http://pinterest.com/pin/create/link/?url=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html" class="ssk ssk-pinterest"></a>
    <a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html&title=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验&caption=

      使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验  
  
    
      
    
  
  
先告诉大伙儿一个好消息：  前几天俺把《太子党关系网络》开源到 GitHub 之后，头两天就获得大量网友的关注，以至于  俺这个项目  至少连续两天排到了 GitHub 的“每日 Trending”（这个排名汇总的是：每一天全球关注程度最高的那几个项目）  非常感谢捧场的 GitHub 用户！！！       
       ★本文面向哪些读者？ 
  俺在博客上不止一次提到过，GitHub 是可以【免翻墙】使用的，而且这个网站/公司的管理层，相对来说还是比较靠谱的，不会轻易向咱们朝廷妥协。  因此，GitHub 非常适合用来搞一些敏感的活动（比如：提供翻墙工具、对朝廷/权贵的爆料、等等）  比如俺就  利用 GitHub 开源了《太子党关系网络》  ，并提供下载。  如果你想用 GitHub 这个平台开发翻墙工具，本文值得你参考。  亦或者你也想效仿俺，在 GitHub 上进行反党活动/反政府活动，那本文更加值得你参考。  
       
        ★本文的必要性及重要性 
  先举个反面教材，来说明本文的必要性及重要性。  前些年有一款很知名的翻墙工具叫做“Shadowsocks”。这个工具是开源在 GitHub 上的，用的人很多。  但是该项目的作者 clowwindy 非常缺乏安全意识，【没有】做好身份的隐匿。结果捏，大约半年前，项目作者 clowwindy 被六扇门叫去喝茶。期间估计受到相当程度威胁恐吓，以至于 clowwindy 后来把 GitHub 上的项目关闭了。         ★阅读本文的前提——需要先了解哪些知识？ 
  俺假定本文的读者已经了解如下几个方面的知识：      
版本管理系统的基本概念  Git 的基本概念  GitHub 的基本使用（至少已经注册过帐号）  Git 客户端的基本使用  Linux 或 Mac OS 命令行的基本使用  常见翻墙工具的基本使用（不懂的同学，可以看  俺博客上  的各种教程）  Tor 的使用（本文会重点聊到 Tor，俺写的 FAQ 在“  这里  ”）    
        ★使用 GitHub 的两种方式 
       ◇B/S 方式——基于浏览器 
  这是最基本的使用方式。只要你注册过 GitHub 帐号，自然就知道如何用浏览器访问它。  这种基于浏览器的方式，有时候也称之为“Web 方式”。        ◇C/S 方式——基于客户端软件 
  除了浏览器方式，你还可以通过 Git 客户端软件来操作 GitHub 上的代码仓库。这种方式称之为“客户端软件方式”（为了打字省力，以下简称“Client 方式”）        ◇这两种方式的对比 
  B/S 方式最大的好处是：无需安装额外的软件（通常而言，你的系统中已经有默认的浏览器可供使用）。  B/S 方式的另一个好处是：GitHub 几乎所有的功能，都可以在浏览器界面上搞定。  但是 B/S 方式也有如下一些缺点：  
   1. 安全性
    如果你经常在某个系统的某个浏览器上操作你的 GitHub 帐号。一旦该系统被入侵，很可能导致你的 GitHub 帐号也被入侵。  
   2. 易用性
    有些大批量的操作，在 Web 界面上不太好搞。比如俺前几天上线的项目【太子党关系网络】，里面涉及到上千个文件（包括文本文件，图片文件）。如果通过 Web 界面进行批量操作（添加、删除、改名），就会很麻烦。   相比之下，“Client 方式”正好可以弥补“Web 方式”的这几个缺点。至于如何弥补，下面会聊到。         ★Client 方式支持哪些协议？ 
  当你通过“client 方式”访问 GitHub 的服务器，可以走几种不同的协议。下面俺简要聊聊。        ◇Git 协议 
  此种协议，顾名思义，是 Git 专有的协议。除了用于 Git 客户端与服务端之间的通讯，其它场合用不到它。  注意：Git 协议本身是明文的（无加密）。        ◇HTTP/HTTPS 协议 
  HTTP 协议，大伙儿应该都熟悉，俺就不浪费口水了。  HTTPS 协议，通俗地说就是：“加密的 HTTP”。如今很多网站都开始支持 HTTPS（包括俺博客所在的 Blogspot，从去年10月也开始支持 HTTPS）。大伙儿对它应该也不陌生。        ◇SSH 协议 
  这个协议，对技术菜鸟可能比较陌生。这玩意儿，早先是 Unix 系统管理员用来远程管理服务器的。  SSH 是“Secure Shell”的缩写。显然，这玩意儿是加密的。         ★上述几种客户端协议的优缺点对比 
       ◇Git 协议 
  前面说了，此协议【没有】加密。如果你关注安全性，不应该用它。  首先，明文传输的协议，很容易遭受“旁路嗅探”（sniffer）——导致你丧失数据的【保密性】；  其次，明文传输的协议，很容易在传输过程中被修改（恶意篡改）——导致你丧失数据的【完整性】。        ◇HTTP 协议 
  明文的 HTTP 协议，同样【不】应该使用。理由同上，不再罗嗦。        ◇HTTPS 协议 
  HTTPS 是加密协议，避免了前两个的弊端。  它还有如下几个优点：  
   1. 访客身份也可以使用
    即使你没有注册 GitHub 的用户，也可以通过 HTTPS 协议克隆某个项目  
   2. 更容易穿透防火墙
    很多公司内网的防火墙会屏蔽大部分端口，但是 HTTPS 所用的 443 端口通常是允许通过的（没有屏蔽）。        ◇SSH 协议 
  与 HTTPS 类似，SSH 也是【强加密】滴。该协议提供了如下几个额外的好处：  
   1. 提供了额外的认证方式
    对于 SSH 协议，GitHub 支持“公钥方式”（public key）的认证。当你设置好这种认证方式，就【不再需要】用你的帐号和密码，也可以操作你代码仓库。  这样的好处是——万一你的系统被入侵，顶多泄露你的 key，但【不会】泄露你在 GitHub 的帐号密码。而且 key 被泄漏之后，你可以去你账户的配置界面，把已经泄露的 key 撤销掉。撤销之后，入侵者就算拿到这个 key，也无法再操作你的代码仓库了。  
   2. 支持“项目级”颗粒度的控制
    通俗地说就是：你可以为不同的仓库配置不同的 SSH key。如此一来，一个 key 只能操作一个代码库。一旦 key 泄露，损失就小得多了。         ★如何用 SSH 方式操作 GitHub 的项目？ 
  在 Git 客户端支持的这几个协议中，俺重点来说一下 SSH 协议的配置。  以下配置以 Linux 环境来举例。        ◇1. 安装 openssh 
  大部分知名的 Linux 发行版，其官方的软件库中都已经内置了【openssh】这个软件，你只需用该发行版提供的软件包管理器，一个命令就可以把 openssh 装好。        ◇2. 创建“公钥/私钥对” 
  使用如下命令创建：      ssh-keygen -t rsa -b 4096 -f 文件路径 -C 邮箱地址    
 稍微解释一下：  其中的 
   -t rsa
   表示加密算法的类型是 RSA  其中的 
   -b 4096
   表示密钥是 4096 位/比特  （请注意，不同加密算法的位数，没有可比性。对于 RSA 加密算法，如果你没有指定 -b 参数，则默认值是 1024；以目前的破解水平，2048 应该够安全了。为了保险起见，咱们这里创建 4096 比特的密钥）        ◇4. 密钥文件的存放 
  上述命令中的【文件路径】表示：【私钥】文件存放的位置。然后 
   ssh-keygen
   会自动在这个路径末尾附加 
   .pub
   作为【公钥文件】的路径。  比如说：你输入的私钥文件路径是 
   ~/.ssh/xxxx
   那么生成之后对应的公钥文件的路径就是 
   ~/.ssh/xxxx.pub
    如果你要创建不止一个“公钥私钥对”，要使用具有一定可读性的文件名，以免自己搞混了。  【私钥文件】非常重要，【不要】泄漏给外人。  （经热心读者推荐，补充一篇“保护私钥文件”文章，链接在“  这里  ”），        ◇5. 在 GitHub 上指派密钥 
  GitHub 支持两种方式的 SSH key，分别是【用户级】和【项目级】。  所谓的【用户级】就是说，使用该 key 可以操作所有项目的代码仓库；而【项目级】的 key 只能操作所属项目的代码仓库。   要设置【用户级】的 key，需要先进入“User Profile”页面，然后进入“SSH keys”页面，点击“New SSH key”按钮。  要设置【项目级】的 key，需要先进入该项目的“Settings”页面，然后进入“Deploy keys”页面，点击“Add deploy key”按钮。   点击完上述按钮之后，你需要把【公钥文件】的内容，【 
   原封不动地
   】 copy &amp; paste 到页面中的那个多行文本框里面。  注意事项：  1. 别搞错文件了，需要复制的是【公钥文件】的内容！  2. 粘贴的时候要小心，【不要】加入多余的空格或多余的回车。        ◇6. 测试 SSH 登录 
  如果你当前的系统无需代理就可以访问 GitHub，那么你可以先用命令行测试一下刚才配置好的那个 SSH。  运行如下命令：      ssh -i 公钥文件路径 -T git@github.com    
 运行之后，可能会出现如下提示：      RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)?
    
 你输入 
   yes
   以便继续。之后你会看到一句  You've successfully authenticated  就表示该 ssh key 已经通过登录认证。        ◇7. 修改 SSH 的配置文件 
  测试通过之后，你可以修改 SSH 的配置文件，就不用每次都在命令行参数中指定密钥文件的路径了。如果你用 SSH 方式操作2个以上的项目，很有必要进行如下定制，可以节省很多命令行输入。  SSH 配置文件的路径是： 
   ~/.ssh/config
    如果你系统中没有这个文件，就创建一个。然后用你熟悉的文本编辑器修改这个文件。  下面俺给出一个示例：  你需要把示例中的“别名”改为你自己起的名字（用一个可读性好点的名字）；  把“私钥文件路径”也同样替换为你本机所使用的文件路径。  其它部分【不要】改动。      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径    
  所谓的“别名”，用来替换 URL 中的主机名。比如俺那个 zhao 项目，俺在 
   ~/.ssh/config
   中使用的别名就是 zhao  之后俺如果要 clone 该项目，只需用如下命令：      git clone ssh://zhao/programthink/zhao    
 看到没？俺在 URL 中就不写 github.com 而改为 zhao，那么 openssh 就会去 
   ~/.ssh/config
   中找到 zhao 这个配置项，然后用对应的私钥文件进行 SSH 连接，        ◇8. 后续操作 
  前面几个步骤都搞定之后，你就可以通过 ssh 协议把某个项目 clone 到本地，修改完，最后再 push 到 GitHub 上。整个过程都是通过【强加密的】 SSH 协议完成。         ★使用代理的必要性/重要性 
       ◇为啥要使用【代理】？ 
  为啥要使用代理？简而言之就是：不让 GitHub 的服务器看到你的公网 IP。  看这里，估计某些同学会问了：前面不是说，GitHub 是比较靠谱的公司吗？为啥还担心被它看到（自己的）公网 IP？  俺来回答一下这个问题：  即使 GitHub 这个公司的管理层非常靠谱，丝毫不与朝廷合作，也不向朝廷妥协让步。如果让 GitHub 的服务器知道你的公网 IP，（对于高危人士）依然存在如下几种风险：  
   风险1
    GitHub 有一个“Session”功能，可以显示你最近几次登录时使用的【访问者IP】。  万一某天你的帐号被入侵了，那么入侵者就可以利用该功能，看你的“访问者IP”，如果你没有走代理，那么你的“访问者IP”也就是本人的“公网IP”  
   风险2
    即使 GitHub 公司的管理层非常有骨气，但是【不】保证该公司所有的员工也都是如此。万一某个服务器管理员被朝廷收买了，或许会把某些用户资料卖给朝廷。  （如果你没有走代理）然后六扇门的人就可以通过服务器上记录的“访问者 IP”来定位你的身份。  
   风险3
    即使 GitHub 公司的全体员工都非常有骨气，还有一个风险是：朝廷的御用骇客有可能会入侵 GitHub 的服务器。  这可不是俺耸人听闻。即使牛B如 Google，依然在2011年遭遇了天朝御用骇客的【深度渗透】。那次渗透的程度之深，据说入侵者已经接触到 Gmail 的核心服务器，并拿到了几个敏感人士（民运人士）的邮件内容。这次事件后来被称为“极光行动”，此事直接导致了 Google 高层震怒并退出大陆市场。   综上所述，如果你是一个【高危】人士，并且通过 GitHub 进行敏感活动。访问 GitHub 的时候，一定要【全程代理】。不论你是用 B/S 方式还是 C/S 方式都要牢记这点。        ◇为啥要使用【Tor】作为代理？ 
  
   代理有很多种，俺强烈建议用【基于 Tor 的双重代理】
   。  为啥俺特别强调用【Tor】，并且还强调要用【双重代理】，其中的技术分析，可以参考《  “如何翻墙”系列：关于 Tor 的常见问题解答  》。  由于那篇 FAQ 已经说得很具体了，俺在这里就不重复罗嗦了。简而言之，这么干可以极大增加追踪者对你进行逆向追溯的难度。追踪者的难度越大，你就越安全。  （关于“双重代理”的扫盲教程，可以参见《  如何隐藏你的踪迹，避免跨省追捕  》系列博文的其中一篇）         ★针对不同的 Git 使用方式，如何配置代理？ 
       ◇B/S 方式（Web 方式） 
  这种方式最简单——就跟你翻墙访问其它网站类似——只需要让你的浏览器通过 Tor 的线路访问 GitHub 的页面，就 OK 了。  没用过 Tor 的同学，先去看俺的扫盲教程《  戴“套”翻墻的方法  》。        ◇C/S 方式 下的 HTTPS 协议 
  对于这种方式，你需要修改 Git 的配置参数，让 Git 知道 Tor 代理的 IP 和 端口。  具体的配置命令如下：      git config --global http.proxy SOCKS5h://代理地址:端口号    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为： 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是【 
   Tor Browser
   】，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
          ◇C/S 方式下的 SSH 协议 
  要让 SSH 通过 Tor 的代理，稍微麻烦一点。因为 Tor 默认提供的是 SOCKS 代理，而 OpenSSH 客户端默认又【不】支持 SOCKS 代理。  因此，得依靠第三方的工具，来实现“SSH through SOCKS”。  这里要提醒一下列位看官：  俺说的是“SSH through SOCKS”，而【不是】“SOCKS through SSH”（这两者完全不同）   为了搞定“SSH through SOCKS”，俺选用大名鼎鼎的 netcat（俗称“网猫”）。  由于这个 netcat 名气很大，主流 Linux 发行版的软件仓库中都有它。你只需要用发行版自带的软件包管理器，把 netcat 装上。  说到 netcat，有一个“原版的”以及非常多的【变种】。“原版的 netcat”【不】支持代理，必须用某些支持代理的【变种】。俺推荐的是 OpenBSD 社区开发的 netcat 变种（也叫“OpenBSD netcat”或“netcat-openbsd”）。  如何判断你是否装对了捏？  在装好 netcat 之后，先运行如下命令（命令中的 nc 就是 netcat 的缩写）。如果输出的第一行能看到 OpenBSD 这个单词，就说明你装对了。      nc -h    
  接下来，用如下命令测试“SSH through Tor SOCKS”是否成功。      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -T ssh.github.com    
 注意1：  假如你的 Tor 客户端运行在【 
   本机
   】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：运行 Tor 客户端的主机的 IP 地址。  注意2：  如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须用 
   9150
    如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 
   9050
     上述测试命令如果最终显示  Permession denied  就说明已经通过 SOCKS 代理连接到 GitHub 了（也就是说，你的 SSH 已经能够走 SOCKS 代理联网了）。  如果没有显示这个信息，而是显示了其它其它信息，你再用如下命令重新试一次      ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -Tv ssh.github.com    
 这次俺加了一个 v 选项，可以打印出详细的诊断信息（不过都是洋文）。如果你略懂洋文并略懂网络技术，或许能判断出错的原因所在。   搞定之后，为了方便起见，同样可以把 SSH 的这个 
   ProxyCommand
   命令行选项加入到 SSH 的配置文件。如此一来，以后每次你要连接 GitHub 的服务器，都会自动走 Tor 提供的 SOCKS 代理。  前面俺已经给出了 SSH 配置文件的示例，俺把之前那个示例文件，加上 
   ProxyCommand
   选项之后，变为如下      Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径
  ProxyCommand              nc -X 5 -x 代理地址:端口号 %h %p    
 
   注意1：
    假如你的 Tor 客户端运行在【本机】，那么上述命令中的“代理地址”就替换为 
   127.0.0.1
    否则就替换为：Tor 客户端所在主机的 IP 地址。  
   注意2：
    如果你的 Tor 客户端用的是 
   Tor Browser
   ，“端口号”必须是 
   9150
    如果你用的是 Tor 的其它软件包，则“端口号”使用 
   9050
     引申阅读：  如果你对 netcat 感兴趣，可以参考博文《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》         ★其它注意事项 
       ◇GitHub 帐号的注册 
  要想做到【彻底隐匿】，你需要从一开始就是隐匿的。  所以，当你注册 GitHub 的时候，就得用【基于 Tor 的双重代理】进行注册。俺当年注册 GitHub 就是这么干滴。        ◇邮件地址的设置 
  最好不要公开你的邮箱，这样可以避免一些不必要的风险。  你可以在 GitHub 的用户配置界面中，设置自己的邮箱地址为“私密”。具体操作步骤参见 GitHub 官方的帮助（链接在“  这里  ”）  由于俺前面介绍了基于 SSH 客户端操作 GitHub，当你把邮箱地址设置为【私密】之后，你记得设置一下 git 客户端的 email 选项（命令如下）      git config --global user.email 名称@users.noreply.github.com    
 把上述命令中的“名称”替换为你在 GitHub 上的帐号名。  经过上述命令设置之后，别人看你的提交历史，看到的是类似与 
   xxxx@users.noreply.github.com
   这样的邮箱地址，看不到你真实的邮箱地址。    
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  如何隐藏你的踪迹，避免跨省追捕  》（系列）  《  “如何翻墙”系列：关于 Tor 的常见问题解答  》  《  “如何翻墙”系列：戴“套”翻墻的方法  》  《  扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia）  》  《  如何用 Privoxy 辅助翻墙？  》  《  扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”  》  《  【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html 
    
    
  
  
    
         
    
    
    
 
    
  

&tags=觀點" class="ssk ssk-tumblr"></a>
    <a href="https://buffer.com/add?text=使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验&url=https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html" class="ssk ssk-buffer"></a>
</div>


    <div id="main" role="main" class="container">
      
  <!-- Html Elements for Search -->
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>

  <script src="/opinion/assets/js/simple-jekyll-search.min.js"></script>

  <!-- Configuration -->
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/opinion/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a><time>{date}</time><a class="tag">{category}</a></li>',
    noResultsText: '没找到',
    limit: 100,
    fuzzy: false,
    exclude: ['Welcome']
  })

  </script>

      







  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    


  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    



<article class="post">
  <h1>使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验</h1>
  <!-- Look the author details up from the site config. -->
  

  <div>
    <span class="date">
      2016-03-08
    </span>

    <!-- Output author details if some exist. -->
    
      
    


    <ul class="tag">
      <li>
        <a href="https://nodebe4.github.io/opinion/categories/#编程随想">
          编程随想
        </a>
      </li>
    </ul>

    
        <span>
            <!-- Personal Info. -->
            <a href="https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html" style="font-size:14px;">原文</a>
        </span>
    

    <span style="float: right;" title="编程随想的其它文章">
      <a style="font-size: 14px;" rel="nofollow" href="#sametag" class="tags">#编程随想 的其它文章</a>
    </span>

  </div>

  <div class="entry">
    
    
    
    <div class="post hentry uncustomized-post-template">
<a name="1547050276285896707">
 </a>   <h1 class="post-title entry-title" id="github---"> <a href="https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html"> 使用 GitHub 的几种方式——兼谈安全性和隐匿性的经验 </a> </h1>
  <div class="post-header">
    <div class="post-header-line-1">
      <div class="post-inner-index"></div>
    </div>
  </div>
  <div class="post-body entry-content">
先告诉大伙儿一个好消息： <br /> 前几天俺把《太子党关系网络》开源到 GitHub 之后，头两天就获得大量网友的关注，以至于 <a href="https://github.com/programthink/zhao" target="_blank"> 俺这个项目 </a> 至少连续两天排到了 GitHub 的“每日 Trending”（这个排名汇总的是：每一天全球关注程度最高的那几个项目） <br /> 非常感谢捧场的 GitHub 用户！！！ <br /> <br />     <hr />
 <br />     <h2 id="section"> ★本文面向哪些读者？ </h2>
 <br /> 俺在博客上不止一次提到过，GitHub 是可以【免翻墙】使用的，而且这个网站/公司的管理层，相对来说还是比较靠谱的，不会轻易向咱们朝廷妥协。 <br /> 因此，GitHub 非常适合用来搞一些敏感的活动（比如：提供翻墙工具、对朝廷/权贵的爆料、等等） <br /> 比如俺就 <a href="https://github.com/programthink/zhao" target="_blank"> 利用 GitHub 开源了《太子党关系网络》 </a> ，并提供下载。 <br /> 如果你想用 GitHub 这个平台开发翻墙工具，本文值得你参考。 <br /> 亦或者你也想效仿俺，在 GitHub 上进行反党活动/反政府活动，那本文更加值得你参考。 <br /> <a name="more">
  </a>     <!--program-think-->
 <br /> <br />     <h2 id="section-1"> ★本文的必要性及重要性 </h2>
 <br /> 先举个反面教材，来说明本文的必要性及重要性。 <br /> 前些年有一款很知名的翻墙工具叫做“Shadowsocks”。这个工具是开源在 GitHub 上的，用的人很多。 <br /> 但是该项目的作者 clowwindy 非常缺乏安全意识，【没有】做好身份的隐匿。结果捏，大约半年前，项目作者 clowwindy 被六扇门叫去喝茶。期间估计受到相当程度威胁恐吓，以至于 clowwindy 后来把 GitHub 上的项目关闭了。 <br /> <br /> <br />     <h2 id="section-2"> ★阅读本文的前提——需要先了解哪些知识？ </h2>
 <br /> 俺假定本文的读者已经了解如下几个方面的知识： <br />     <blockquote>
版本管理系统的基本概念 <br /> Git 的基本概念 <br /> GitHub 的基本使用（至少已经注册过帐号） <br /> Git 客户端的基本使用 <br /> Linux 或 Mac OS 命令行的基本使用 <br /> 常见翻墙工具的基本使用（不懂的同学，可以看 <a href="https://program-think.blogspot.com/"> 俺博客上 </a> 的各种教程） <br /> Tor 的使用（本文会重点聊到 Tor，俺写的 FAQ 在“ <a href="https://program-think.blogspot.com/2013/11/tor-faq.html"> 这里 </a> ”）    </blockquote>
 <br /> <br />     <h2 id="github--"> ★使用 GitHub 的两种方式 </h2>
 <br />     <h3 id="bs--"> ◇B/S 方式——基于浏览器 </h3>
 <br /> 这是最基本的使用方式。只要你注册过 GitHub 帐号，自然就知道如何用浏览器访问它。 <br /> 这种基于浏览器的方式，有时候也称之为“Web 方式”。 <br /> <br />     <h3 id="cs--"> ◇C/S 方式——基于客户端软件 </h3>
 <br /> 除了浏览器方式，你还可以通过 Git 客户端软件来操作 GitHub 上的代码仓库。这种方式称之为“客户端软件方式”（为了打字省力，以下简称“Client 方式”） <br /> <br />     <h3 id="section-3"> ◇这两种方式的对比 </h3>
 <br /> B/S 方式最大的好处是：无需安装额外的软件（通常而言，你的系统中已经有默认的浏览器可供使用）。 <br /> B/S 方式的另一个好处是：GitHub 几乎所有的功能，都可以在浏览器界面上搞定。 <br /> 但是 B/S 方式也有如下一些缺点： <br /> <b>
   1. 安全性
  </b> <br /> 如果你经常在某个系统的某个浏览器上操作你的 GitHub 帐号。一旦该系统被入侵，很可能导致你的 GitHub 帐号也被入侵。 <br /> <b>
   2. 易用性
  </b> <br /> 有些大批量的操作，在 Web 界面上不太好搞。比如俺前几天上线的项目【太子党关系网络】，里面涉及到上千个文件（包括文本文件，图片文件）。如果通过 Web 界面进行批量操作（添加、删除、改名），就会很麻烦。 <br /> <br /> 相比之下，“Client 方式”正好可以弥补“Web 方式”的这几个缺点。至于如何弥补，下面会聊到。 <br /> <br /> <br />     <h2 id="client--"> ★Client 方式支持哪些协议？ </h2>
 <br /> 当你通过“client 方式”访问 GitHub 的服务器，可以走几种不同的协议。下面俺简要聊聊。 <br /> <br />     <h3 id="git--"> ◇Git 协议 </h3>
 <br /> 此种协议，顾名思义，是 Git 专有的协议。除了用于 Git 客户端与服务端之间的通讯，其它场合用不到它。 <br /> 注意：Git 协议本身是明文的（无加密）。 <br /> <br />     <h3 id="httphttps--"> ◇HTTP/HTTPS 协议 </h3>
 <br /> HTTP 协议，大伙儿应该都熟悉，俺就不浪费口水了。 <br /> HTTPS 协议，通俗地说就是：“加密的 HTTP”。如今很多网站都开始支持 HTTPS（包括俺博客所在的 Blogspot，从去年10月也开始支持 HTTPS）。大伙儿对它应该也不陌生。 <br /> <br />     <h3 id="ssh--"> ◇SSH 协议 </h3>
 <br /> 这个协议，对技术菜鸟可能比较陌生。这玩意儿，早先是 Unix 系统管理员用来远程管理服务器的。 <br /> SSH 是“Secure Shell”的缩写。显然，这玩意儿是加密的。 <br /> <br /> <br />     <h2 id="section-4"> ★上述几种客户端协议的优缺点对比 </h2>
 <br />     <h3 id="git---1"> ◇Git 协议 </h3>
 <br /> 前面说了，此协议【没有】加密。如果你关注安全性，不应该用它。 <br /> 首先，明文传输的协议，很容易遭受“旁路嗅探”（sniffer）——导致你丧失数据的【保密性】； <br /> 其次，明文传输的协议，很容易在传输过程中被修改（恶意篡改）——导致你丧失数据的【完整性】。 <br /> <br />     <h3 id="http--"> ◇HTTP 协议 </h3>
 <br /> 明文的 HTTP 协议，同样【不】应该使用。理由同上，不再罗嗦。 <br /> <br />     <h3 id="https--"> ◇HTTPS 协议 </h3>
 <br /> HTTPS 是加密协议，避免了前两个的弊端。 <br /> 它还有如下几个优点： <br /> <b>
   1. 访客身份也可以使用
  </b> <br /> 即使你没有注册 GitHub 的用户，也可以通过 HTTPS 协议克隆某个项目 <br /> <b>
   2. 更容易穿透防火墙
  </b> <br /> 很多公司内网的防火墙会屏蔽大部分端口，但是 HTTPS 所用的 443 端口通常是允许通过的（没有屏蔽）。 <br /> <br />     <h3 id="ssh---1"> ◇SSH 协议 </h3>
 <br /> 与 HTTPS 类似，SSH 也是【强加密】滴。该协议提供了如下几个额外的好处： <br /> <b>
   1. 提供了额外的认证方式
  </b> <br /> 对于 SSH 协议，GitHub 支持“公钥方式”（public key）的认证。当你设置好这种认证方式，就【不再需要】用你的帐号和密码，也可以操作你代码仓库。 <br /> 这样的好处是——万一你的系统被入侵，顶多泄露你的 key，但【不会】泄露你在 GitHub 的帐号密码。而且 key 被泄漏之后，你可以去你账户的配置界面，把已经泄露的 key 撤销掉。撤销之后，入侵者就算拿到这个 key，也无法再操作你的代码仓库了。 <br /> <b>
   2. 支持“项目级”颗粒度的控制
  </b> <br /> 通俗地说就是：你可以为不同的仓库配置不同的 SSH key。如此一来，一个 key 只能操作一个代码库。一旦 key 泄露，损失就小得多了。 <br /> <br /> <br />     <h2 id="ssh--github--"> ★如何用 SSH 方式操作 GitHub 的项目？ </h2>
 <br /> 在 Git 客户端支持的这几个协议中，俺重点来说一下 SSH 协议的配置。 <br /> 以下配置以 Linux 环境来举例。 <br /> <br />     <h3 id="openssh-"> ◇1. 安装 openssh </h3>
 <br /> 大部分知名的 Linux 发行版，其官方的软件库中都已经内置了【openssh】这个软件，你只需用该发行版提供的软件包管理器，一个命令就可以把 openssh 装好。 <br /> <br />     <h3 id="section-5"> ◇2. 创建“公钥/私钥对” </h3>
 <br /> 使用如下命令创建： <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen -t rsa -b 4096 -f 文件路径 -C 邮箱地址</code></pre></div>    </div>
 稍微解释一下： <br /> 其中的 <code class="language-plaintext highlighter-rouge">
   -t rsa
  </code> 表示加密算法的类型是 RSA <br /> 其中的 <code class="language-plaintext highlighter-rouge">
   -b 4096
  </code> 表示密钥是 4096 位/比特 <br /> （请注意，不同加密算法的位数，没有可比性。对于 RSA 加密算法，如果你没有指定 -b 参数，则默认值是 1024；以目前的破解水平，2048 应该够安全了。为了保险起见，咱们这里创建 4096 比特的密钥） <br /> <br />     <h3 id="section-6"> ◇4. 密钥文件的存放 </h3>
 <br /> 上述命令中的【文件路径】表示：【私钥】文件存放的位置。然后 <code class="language-plaintext highlighter-rouge">
   ssh-keygen
  </code> 会自动在这个路径末尾附加 <code class="language-plaintext highlighter-rouge">
   .pub
  </code> 作为【公钥文件】的路径。 <br /> 比如说：你输入的私钥文件路径是 <code class="language-plaintext highlighter-rouge">
   ~/.ssh/xxxx
  </code> 那么生成之后对应的公钥文件的路径就是 <code class="language-plaintext highlighter-rouge">
   ~/.ssh/xxxx.pub
  </code> <br /> 如果你要创建不止一个“公钥私钥对”，要使用具有一定可读性的文件名，以免自己搞混了。 <br /> 【私钥文件】非常重要，【不要】泄漏给外人。 <br /> （经热心读者推荐，补充一篇“保护私钥文件”文章，链接在“ <a href="https://martin.kleppmann.com/2013/05/24/improving-security-of-ssh-private-keys.html" rel="nofollow" target="_blank"> 这里 </a> ”）， <br /> <br />     <h3 id="github---1"> ◇5. 在 GitHub 上指派密钥 </h3>
 <br /> GitHub 支持两种方式的 SSH key，分别是【用户级】和【项目级】。 <br /> 所谓的【用户级】就是说，使用该 key 可以操作所有项目的代码仓库；而【项目级】的 key 只能操作所属项目的代码仓库。 <br /> <br /> 要设置【用户级】的 key，需要先进入“User Profile”页面，然后进入“SSH keys”页面，点击“New SSH key”按钮。 <br /> 要设置【项目级】的 key，需要先进入该项目的“Settings”页面，然后进入“Deploy keys”页面，点击“Add deploy key”按钮。 <br /> <br /> 点击完上述按钮之后，你需要把【公钥文件】的内容，【 <b>
   原封不动地
  </b> 】 copy &amp; paste 到页面中的那个多行文本框里面。 <br /> 注意事项： <br /> 1. 别搞错文件了，需要复制的是【公钥文件】的内容！ <br /> 2. 粘贴的时候要小心，【不要】加入多余的空格或多余的回车。 <br /> <br />     <h3 id="ssh---2"> ◇6. 测试 SSH 登录 </h3>
 <br /> 如果你当前的系统无需代理就可以访问 GitHub，那么你可以先用命令行测试一下刚才配置好的那个 SSH。 <br /> 运行如下命令： <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -i 公钥文件路径 -T git@github.com</code></pre></div>    </div>
 运行之后，可能会出现如下提示： <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no)?
</code></pre></div>    </div>
 你输入 <code class="language-plaintext highlighter-rouge">
   yes
  </code> 以便继续。之后你会看到一句 <q> You've successfully authenticated </q> 就表示该 ssh key 已经通过登录认证。 <br /> <br />     <h3 id="ssh---3"> ◇7. 修改 SSH 的配置文件 </h3>
 <br /> 测试通过之后，你可以修改 SSH 的配置文件，就不用每次都在命令行参数中指定密钥文件的路径了。如果你用 SSH 方式操作2个以上的项目，很有必要进行如下定制，可以节省很多命令行输入。 <br /> SSH 配置文件的路径是： <code class="language-plaintext highlighter-rouge">
   ~/.ssh/config
  </code> <br /> 如果你系统中没有这个文件，就创建一个。然后用你熟悉的文本编辑器修改这个文件。 <br /> 下面俺给出一个示例： <br /> 你需要把示例中的“别名”改为你自己起的名字（用一个可读性好点的名字）； <br /> 把“私钥文件路径”也同样替换为你本机所使用的文件路径。 <br /> 其它部分【不要】改动。 <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径</code></pre></div>    </div>
 <br /> 所谓的“别名”，用来替换 URL 中的主机名。比如俺那个 zhao 项目，俺在 <code class="language-plaintext highlighter-rouge">
   ~/.ssh/config
  </code> 中使用的别名就是 zhao <br /> 之后俺如果要 clone 该项目，只需用如下命令： <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone ssh://zhao/programthink/zhao</code></pre></div>    </div>
 看到没？俺在 URL 中就不写 github.com 而改为 zhao，那么 openssh 就会去 <code class="language-plaintext highlighter-rouge">
   ~/.ssh/config
  </code> 中找到 zhao 这个配置项，然后用对应的私钥文件进行 SSH 连接， <br /> <br />     <h3 id="section-7"> ◇8. 后续操作 </h3>
 <br /> 前面几个步骤都搞定之后，你就可以通过 ssh 协议把某个项目 clone 到本地，修改完，最后再 push 到 GitHub 上。整个过程都是通过【强加密的】 SSH 协议完成。 <br /> <br /> <br />     <h2 id="section-8"> ★使用代理的必要性/重要性 </h2>
 <br />     <h3 id="section-9"> ◇为啥要使用【代理】？ </h3>
 <br /> 为啥要使用代理？简而言之就是：不让 GitHub 的服务器看到你的公网 IP。 <br /> 看这里，估计某些同学会问了：前面不是说，GitHub 是比较靠谱的公司吗？为啥还担心被它看到（自己的）公网 IP？ <br /> 俺来回答一下这个问题： <br /> 即使 GitHub 这个公司的管理层非常靠谱，丝毫不与朝廷合作，也不向朝廷妥协让步。如果让 GitHub 的服务器知道你的公网 IP，（对于高危人士）依然存在如下几种风险： <br /> <b>
   风险1
  </b> <br /> GitHub 有一个“Session”功能，可以显示你最近几次登录时使用的【访问者IP】。 <br /> 万一某天你的帐号被入侵了，那么入侵者就可以利用该功能，看你的“访问者IP”，如果你没有走代理，那么你的“访问者IP”也就是本人的“公网IP” <br /> <b>
   风险2
  </b> <br /> 即使 GitHub 公司的管理层非常有骨气，但是【不】保证该公司所有的员工也都是如此。万一某个服务器管理员被朝廷收买了，或许会把某些用户资料卖给朝廷。 <br /> （如果你没有走代理）然后六扇门的人就可以通过服务器上记录的“访问者 IP”来定位你的身份。 <br /> <b>
   风险3
  </b> <br /> 即使 GitHub 公司的全体员工都非常有骨气，还有一个风险是：朝廷的御用骇客有可能会入侵 GitHub 的服务器。 <br /> 这可不是俺耸人听闻。即使牛B如 Google，依然在2011年遭遇了天朝御用骇客的【深度渗透】。那次渗透的程度之深，据说入侵者已经接触到 Gmail 的核心服务器，并拿到了几个敏感人士（民运人士）的邮件内容。这次事件后来被称为“极光行动”，此事直接导致了 Google 高层震怒并退出大陆市场。 <br /> <br /> 综上所述，如果你是一个【高危】人士，并且通过 GitHub 进行敏感活动。访问 GitHub 的时候，一定要【全程代理】。不论你是用 B/S 方式还是 C/S 方式都要牢记这点。 <br /> <br />     <h3 id="tor-"> ◇为啥要使用【Tor】作为代理？ </h3>
 <br /> <b>
   代理有很多种，俺强烈建议用【基于 Tor 的双重代理】
  </b> 。 <br /> 为啥俺特别强调用【Tor】，并且还强调要用【双重代理】，其中的技术分析，可以参考《 <a href="https://program-think.blogspot.com/2013/11/tor-faq.html"> “如何翻墙”系列：关于 Tor 的常见问题解答 </a> 》。 <br /> 由于那篇 FAQ 已经说得很具体了，俺在这里就不重复罗嗦了。简而言之，这么干可以极大增加追踪者对你进行逆向追溯的难度。追踪者的难度越大，你就越安全。 <br /> （关于“双重代理”的扫盲教程，可以参见《 <a href="https://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html"> 如何隐藏你的踪迹，避免跨省追捕 </a> 》系列博文的其中一篇） <br /> <br /> <br />     <h2 id="git---2"> ★针对不同的 Git 使用方式，如何配置代理？ </h2>
 <br />     <h3 id="bs-web--"> ◇B/S 方式（Web 方式） </h3>
 <br /> 这种方式最简单——就跟你翻墙访问其它网站类似——只需要让你的浏览器通过 Tor 的线路访问 GitHub 的页面，就 OK 了。 <br /> 没用过 Tor 的同学，先去看俺的扫盲教程《 <a href="https://program-think.blogspot.com/2009/09/break-through-gfw-with-tor.html"> 戴“套”翻墻的方法 </a> 》。 <br /> <br />     <h3 id="cs---https--"> ◇C/S 方式 下的 HTTPS 协议 </h3>
 <br /> 对于这种方式，你需要修改 Git 的配置参数，让 Git 知道 Tor 代理的 IP 和 端口。 <br /> 具体的配置命令如下： <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config --global http.proxy SOCKS5h://代理地址:端口号</code></pre></div>    </div>
 注意1： <br /> 假如你的 Tor 客户端运行在【 <b>
   本机
  </b> 】，那么上述命令中的“代理地址”就替换为： <code class="language-plaintext highlighter-rouge">
   127.0.0.1
  </code> <br /> 否则就替换为：运行 Tor 客户端的主机的 IP 地址。 <br /> 注意2： <br /> 如果你的 Tor 客户端用的是【 <b>
   Tor Browser
  </b> 】，“端口号”必须用 <code class="language-plaintext highlighter-rouge">
   9150
  </code> <br /> 如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 <code class="language-plaintext highlighter-rouge">
   9050
  </code> <br /> <br />     <h3 id="cs--ssh--"> ◇C/S 方式下的 SSH 协议 </h3>
 <br /> 要让 SSH 通过 Tor 的代理，稍微麻烦一点。因为 Tor 默认提供的是 SOCKS 代理，而 OpenSSH 客户端默认又【不】支持 SOCKS 代理。 <br /> 因此，得依靠第三方的工具，来实现“SSH through SOCKS”。 <br /> 这里要提醒一下列位看官： <br /> 俺说的是“SSH through SOCKS”，而【不是】“SOCKS through SSH”（这两者完全不同） <br /> <br /> 为了搞定“SSH through SOCKS”，俺选用大名鼎鼎的 netcat（俗称“网猫”）。 <br /> 由于这个 netcat 名气很大，主流 Linux 发行版的软件仓库中都有它。你只需要用发行版自带的软件包管理器，把 netcat 装上。 <br /> 说到 netcat，有一个“原版的”以及非常多的【变种】。“原版的 netcat”【不】支持代理，必须用某些支持代理的【变种】。俺推荐的是 OpenBSD 社区开发的 netcat 变种（也叫“OpenBSD netcat”或“netcat-openbsd”）。 <br /> 如何判断你是否装对了捏？ <br /> 在装好 netcat 之后，先运行如下命令（命令中的 nc 就是 netcat 的缩写）。如果输出的第一行能看到 OpenBSD 这个单词，就说明你装对了。 <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc -h</code></pre></div>    </div>
 <br /> 接下来，用如下命令测试“SSH through Tor SOCKS”是否成功。 <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -T ssh.github.com</code></pre></div>    </div>
 注意1： <br /> 假如你的 Tor 客户端运行在【 <b>
   本机
  </b> 】，那么上述命令中的“代理地址”就替换为 <code class="language-plaintext highlighter-rouge">
   127.0.0.1
  </code> <br /> 否则就替换为：运行 Tor 客户端的主机的 IP 地址。 <br /> 注意2： <br /> 如果你的 Tor 客户端用的是 <b>
   Tor Browser
  </b> ，“端口号”必须用 <code class="language-plaintext highlighter-rouge">
   9150
  </code> <br /> 如果你用的是 Tor 的其它软件包（比如：Tor Expert Bundle），则“端口号”使用 <code class="language-plaintext highlighter-rouge">
   9050
  </code> <br /> <br /> 上述测试命令如果最终显示 <q> Permession denied </q> 就说明已经通过 SOCKS 代理连接到 GitHub 了（也就是说，你的 SSH 已经能够走 SOCKS 代理联网了）。 <br /> 如果没有显示这个信息，而是显示了其它其它信息，你再用如下命令重新试一次 <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -o "ProxyCommand=nc -X 5 -x 代理地址:端口号 %h %p" -Tv ssh.github.com</code></pre></div>    </div>
 这次俺加了一个 v 选项，可以打印出详细的诊断信息（不过都是洋文）。如果你略懂洋文并略懂网络技术，或许能判断出错的原因所在。 <br /> <br /> 搞定之后，为了方便起见，同样可以把 SSH 的这个 <code class="language-plaintext highlighter-rouge">
   ProxyCommand
  </code> 命令行选项加入到 SSH 的配置文件。如此一来，以后每次你要连接 GitHub 的服务器，都会自动走 Tor 提供的 SOCKS 代理。 <br /> 前面俺已经给出了 SSH 配置文件的示例，俺把之前那个示例文件，加上 <code class="language-plaintext highlighter-rouge">
   ProxyCommand
  </code> 选项之后，变为如下 <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host 别名
  HostName                  ssh.github.com
  Port                      443
  User                      git
  PreferredAuthentications  publickey
  IdentityFile              私钥文件路径
  ProxyCommand              nc -X 5 -x 代理地址:端口号 %h %p</code></pre></div>    </div>
 <b>
   注意1：
  </b> <br /> 假如你的 Tor 客户端运行在【本机】，那么上述命令中的“代理地址”就替换为 <code class="language-plaintext highlighter-rouge">
   127.0.0.1
  </code> <br /> 否则就替换为：Tor 客户端所在主机的 IP 地址。 <br /> <b>
   注意2：
  </b> <br /> 如果你的 Tor 客户端用的是 <b>
   Tor Browser
  </b> ，“端口号”必须是 <code class="language-plaintext highlighter-rouge">
   9150
  </code> <br /> 如果你用的是 Tor 的其它软件包，则“端口号”使用 <code class="language-plaintext highlighter-rouge">
   9050
  </code> <br /> <br /> 引申阅读： <br /> 如果你对 netcat 感兴趣，可以参考博文《 <a href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html"> 扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵” </a> 》 <br /> <br /> <br />     <h2 id="section-10"> ★其它注意事项 </h2>
 <br />     <h3 id="github---2"> ◇GitHub 帐号的注册 </h3>
 <br /> 要想做到【彻底隐匿】，你需要从一开始就是隐匿的。 <br /> 所以，当你注册 GitHub 的时候，就得用【基于 Tor 的双重代理】进行注册。俺当年注册 GitHub 就是这么干滴。 <br /> <br />     <h3 id="section-11"> ◇邮件地址的设置 </h3>
 <br /> 最好不要公开你的邮箱，这样可以避免一些不必要的风险。 <br /> 你可以在 GitHub 的用户配置界面中，设置自己的邮箱地址为“私密”。具体操作步骤参见 GitHub 官方的帮助（链接在“ <a href="https://help.github.com/articles/keeping-your-email-address-private/" rel="nofollow" target="_blank"> 这里 </a> ”） <br /> 由于俺前面介绍了基于 SSH 客户端操作 GitHub，当你把邮箱地址设置为【私密】之后，你记得设置一下 git 客户端的 email 选项（命令如下） <br />     <div class="language-plaintext shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config --global user.email 名称@users.noreply.github.com</code></pre></div>    </div>
 把上述命令中的“名称”替换为你在 GitHub 上的帐号名。 <br /> 经过上述命令设置之后，别人看你的提交历史，看到的是类似与 <code class="language-plaintext highlighter-rouge">
   xxxx@users.noreply.github.com
  </code> 这样的邮箱地址，看不到你真实的邮箱地址。 <br /> <br /> <br /> <b>
   俺博客上，和本文相关的帖子（需翻墙）
  </b> ： <br /> 《 <a href="https://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html"> 如何隐藏你的踪迹，避免跨省追捕 </a> 》（系列） <br /> 《 <a href="https://program-think.blogspot.com/2013/11/tor-faq.html"> “如何翻墙”系列：关于 Tor 的常见问题解答 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2009/09/break-through-gfw-with-tor.html"> “如何翻墙”系列：戴“套”翻墻的方法 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2015/03/Tor-Arm.html"> 扫盲 Arm——Tor 的界面前端（替代已死亡的 Vidalia） </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2014/12/gfw-privoxy.html"> 如何用 Privoxy 辅助翻墙？ </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html"> 扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵” </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2016/02/Zhao-at-GitHub.html"> 【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵 </a> 》     <div class="post-copyright">
<b>
    版权声明
   </b> <br /> 本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者 <a href="mailto:program.think@gmail.com"> 编程随想 </a> 和本文原始地址： <br /> <a href="https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html" id="OriginalPostUrl"> https://program-think.blogspot.com/2016/03/GitHub-Security-Tips.html </a>
    </div>
    <div style="clear: both;"></div>
  </div>
  <div class="post-footer" style="margin-bottom:50px;">
    <div class="post-footer-line post-footer-line-1" style="display:none;">
<span class="post-author vcard"> </span> <span class="reaction-buttons"> </span> <span class="star-ratings"> </span> <span class="post-icons"> </span> <span class="post-backlinks post-comment-link"> </span>
    </div>
    <div class="post-footer-line post-footer-line-2 post-toolbar"></div>
    <div class="post-footer-line post-footer-line-3">
<span class="post-location"> </span>
    </div>
  </div>
</div>


  </div>

  <hr style="border-top:1px solid #28323C;"/>

<font size=2px>
  文章版权归原作者所有。
</font>

<div style="text-align:center"><img width="1px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站" style="text-align:center"/></div>

  <div id="sametag">
    <h4 style="display: inline-block;">#编程随想 的其它文章</h4>
    <span>--<a href="https://nodebe4.github.io/opinion/2021-05-09/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-%E6%94%BF%E6%B2%BB-IT-%E7%A7%91%E6%99%AE-%E5%8E%86%E5%8F%B2-%E7%AD%89-97%E6%9C%AC/">最新</a>-</span>
    <span>-<a href="https://nodebe4.github.io/opinion/2009-01-15/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%BC%A0%E5%8F%8A%E6%9C%AC%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E7%AE%80%E4%BB%8B/">最早</a>--</span>
    
      <li>
        <time>2016-03-20</time>
        <a href="https://nodebe4.github.io/opinion/2016-03-20/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E8%BF%91%E6%9C%9F%E6%9C%9D%E5%BB%B7%E9%AB%98%E5%B1%82%E4%B9%B1%E8%B1%A1-%E5%87%B8%E6%98%BE%E6%9D%83%E5%8A%9B%E6%96%97%E4%BA%89%E5%8A%A0%E5%89%A7/">
          每周转载：近期朝廷高层乱象，凸显权力斗争加剧
        </a>
      </li>
    
    
      <li>
        <time>2016-03-10</time>
        <a href="https://nodebe4.github.io/opinion/2016-03-10/%E8%81%8A%E8%81%8A%E5%A4%A7%E4%BC%99%E5%84%BF-%E5%8C%85%E6%8B%AC%E6%9F%90%E4%BA%9B%E8%81%8C%E4%B8%9A%E5%9B%B4%E6%A3%8B%E6%89%8B-%E5%AF%B9-AlphaGo-%E7%9A%84%E8%AF%AF%E8%A7%A3/">
          聊聊大伙儿（包括某些职业围棋手）对 AlphaGo 的误解
        </a>
      </li>
    
    
      <li>
        <time>2016-02-29</time>
        <a href="https://nodebe4.github.io/opinion/2016-02-29/%E5%A4%AA%E5%AD%90%E5%85%9A%E5%85%B3%E7%B3%BB%E7%BD%91%E7%BB%9C-%E5%BC%80%E6%BA%90%E5%88%B0-GitHub-%E5%A4%A7%E4%BC%99%E5%84%BF%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%9B%9D%E5%85%89%E8%B5%B5%E5%9B%BD%E6%9D%83%E8%B4%B5/">
          【太子党关系网络】开源到 GitHub——大伙儿一起来曝光赵国权贵
        </a>
      </li>
    
    
      <li>
        <time>2016-02-23</time>
        <a href="https://nodebe4.github.io/opinion/2016-02-23/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE-%E8%87%AA%E5%8A%A8-%E7%BB%98%E5%9B%BE%E5%B7%A5%E5%85%B7-Graphviz-%E5%A4%AA%E5%AD%90%E5%85%9A%E5%85%B3%E7%B3%BB%E7%BD%91%E7%BB%9C-%E5%B0%B1%E6%98%AF%E7%94%A8%E5%AE%83%E5%88%B6%E4%BD%9C/">
          开源项目：【自动】绘图工具 Graphviz——《太子党关系网络》就是用它制作
        </a>
      </li>
    
  </div>


  <hr>
  <div class="pagination">
    
      <span class="prev" >
          <a href="https://nodebe4.github.io/opinion/2016-03-08/Bitcoin_and_Diversity/">
            前一篇：Bitcoin and Diversity
          </a>
      </span>
    
    
      <span class="next" >
          <a href="https://nodebe4.github.io/opinion/2016-03-09/%E6%83%B3%E8%AE%A9%E6%94%BF%E5%BA%9C%E5%85%B3%E5%BF%83-%E4%BD%A0%E8%AF%A5%E8%BF%99%E4%B9%88%E9%97%AE/">
            後一篇：想让政府关心？你该这么问！
          </a>
      </span>
    

    <script>
    /* post pagination keyboard shortcuts */
    document.body.onkeyup = function(e){
      if (e.keyCode == '37') { window.location = 'https://nodebe4.github.io/opinion/2016-03-08/Bitcoin_and_Diversity/'; } // left arrow key
      if (e.keyCode == '39') { window.location = 'https://nodebe4.github.io/opinion/2016-03-09/%E6%83%B3%E8%AE%A9%E6%94%BF%E5%BA%9C%E5%85%B3%E5%BF%83-%E4%BD%A0%E8%AF%A5%E8%BF%99%E4%B9%88%E9%97%AE/'; } // right arrow key
      if (e.keyCode == '45') { window.location = 'https://nodebe4.github.io/opinion/2016-03-10/%E8%81%8A%E8%81%8A%E5%A4%A7%E4%BC%99%E5%84%BF-%E5%8C%85%E6%8B%AC%E6%9F%90%E4%BA%9B%E8%81%8C%E4%B8%9A%E5%9B%B4%E6%A3%8B%E6%89%8B-%E5%AF%B9-AlphaGo-%E7%9A%84%E8%AF%AF%E8%A7%A3/'; } // insert key
      if (e.keyCode == '46') { window.location = 'https://nodebe4.github.io/opinion/2016-02-29/%E5%A4%AA%E5%AD%90%E5%85%9A%E5%85%B3%E7%B3%BB%E7%BD%91%E7%BB%9C-%E5%BC%80%E6%BA%90%E5%88%B0-GitHub-%E5%A4%A7%E4%BC%99%E5%84%BF%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%9B%9D%E5%85%89%E8%B5%B5%E5%9B%BD%E6%9D%83%E8%B4%B5/'; } // delete key
    };
    </script>
    <link rel="stylesheet" type="text/css" href="/opinion/assets/css/fab.css" />

<div class="fab-wrapper">
  <div class="fab-wheel">
    
    
    
    <a class="fab-action fab-action-1" title="上一篇(热键 &#8594;)" href="https://nodebe4.github.io/opinion/2016-03-08/Bitcoin_and_Diversity/">
      <i>后</i>
    </a>
    
    
    <a class="fab-action fab-action-2" title="下一篇(热键 &#8592;)" href="https://nodebe4.github.io/opinion/2016-03-09/%E6%83%B3%E8%AE%A9%E6%94%BF%E5%BA%9C%E5%85%B3%E5%BF%83-%E4%BD%A0%E8%AF%A5%E8%BF%99%E4%B9%88%E9%97%AE/">
      <i>前</i>
    </a>
    
    
    <a class="fab-action fab-action-3" title="<编程随想>上一篇(热键 ins)" href="https://nodebe4.github.io/opinion/2016-03-10/%E8%81%8A%E8%81%8A%E5%A4%A7%E4%BC%99%E5%84%BF-%E5%8C%85%E6%8B%AC%E6%9F%90%E4%BA%9B%E8%81%8C%E4%B8%9A%E5%9B%B4%E6%A3%8B%E6%89%8B-%E5%AF%B9-AlphaGo-%E7%9A%84%E8%AF%AF%E8%A7%A3/">
      <i>左</i>
    </a>
    
    
    <a class="fab-action fab-action-4" title="<编程随想>下一篇(热键 del)" href="https://nodebe4.github.io/opinion/2016-02-29/%E5%A4%AA%E5%AD%90%E5%85%9A%E5%85%B3%E7%B3%BB%E7%BD%91%E7%BB%9C-%E5%BC%80%E6%BA%90%E5%88%B0-GitHub-%E5%A4%A7%E4%BC%99%E5%84%BF%E4%B8%80%E8%B5%B7%E6%9D%A5%E6%9B%9D%E5%85%89%E8%B5%B5%E5%9B%BD%E6%9D%83%E8%B4%B5/">
      <i>右</i>
    </a>
    
  </div>
</div>


  </div>


  

</article>

    </div>

    <div style="z-index:2;">
<script src="/opinion/assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  cornerOffset: 20, // px
  id: 'back-to-top',
  backgroundColor: '#ddd',
  textColor: 'red'
})</script>
</div>


    <div class="wrapper-footer" id="footer">
      <div class="container">
        <footer class="footer">
          <img width="200px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站"/>
<font size=2px>二维码分享本站</font>

<!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:beauti4@protonmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/NodeBE4/opinion" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  
  <li><a href="/opinion/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

    
</ul>





<p><span style="color:blue">内容每小时更新一次.</span> Powered by <a href="https://github.com/AWEEKJ/kiko-now">Kiko Now</a> & <a href="https://github.com/gitalk/gitalk">Gitalk</a> & <a href="https://github.com/duty-machine/news">duty-machine</a>, 站务 <a href="https://be4.herokuapp.com">NodeBE4</a>（<span style="color:red">被墙</span>）</p>





        </footer>
      </div>
    </div>

    



  </body>
</html>
