<!DOCTYPE html>
<html>
  <head>
  <title>TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证 – 觀點 – 從草根到大師 git.io/JJCxS</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="

      TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证  
  
    
      
    
  
  
接着前一篇《  关于加密算法和加密盘的类型  》的话题，今天说说 TrueCrypt 的两种认证方式：老式的“口令认证”和新式的“Key Files 认证”。  
       
        ★如何用好“密码认证”？ 
  用过电脑的同学，肯定对密码（口令）的使用非常熟悉了。所以俺就不用再解释基本概念了，只是重点聊一下密码认证的潜在风险和防范措施。        ◇对于加密盘，弱密码的危害更大 
  关于“弱密码的危害”，想必很多同学都听说过。但是有个细节，可能很多人没有意识到。那就是： 
   弱密码对磁盘加密的危害更加明显
   。  咱们拿“操作系统口令”和“加密盘口令”进行对比。  如果某个操作系统做过安全加固，通常会在系统中设置“无效登录的上限”。只要攻击者尝试的无效口令超过这个上限，该用户就会被锁定。但是对于磁盘加密工具而言，无法像操作系统那样，限制无效口令的次数。因为针对加密盘的暴力破解，前提通常是：攻击者已经拿到存储介质（比如 硬盘、U盘、等）。在这种情况下，攻击者可以使用自己的工具进行密码尝试（不会有次数限制）。  所以，你的加密盘一旦用了弱口令，就很容易遭到暴力破解。        ◇攻击者如何暴力破解密码 
  针对加密盘的暴力破解有很多种，本小节所说的是针对"用户密码"的暴力破解。   
   对于短密码
    假如你的加密盘仅仅使用口令认证，而且你的口令比较短（比如说小于6个字符）。那么攻击者只要尝试所有的6字符组合，就必然可以试出你的口令。顺便说一下，很多网友用的口令只有小写字母和数字，那么6字符的口令，只有(26+10)的6次方。这个数并不算大，可以被穷举。   
   对于特定形式的密码
    所谓的“特定形式密码”，比较典型的例子就是日期（尤其是生日）。这是很多菜鸟常用的坏习惯。  很多不懂技术的同学会有一个错觉： 
   误以为
   用日期做口令，好像长度还比较长（如：2000-01-01 有10个字符），似乎很保险。  其实捏，用日期做口令是很危险的。因为常用的日期，大部分都分布在最近100年的范围内，也就是说，可能性小于 365*100；即使对每一个日期考虑不同的写法格式（比如 yyyymmdd、yyyy-mm-dd、mm/dd/yyyy、等等）顶多再乘以20倍，连一百万都不到。对于暴力穷举，基本上属于小儿科。        ◇如何构造强密码 
  要构造一个又好记又复杂的密码，简直称得上是一门艺术。这里面涉及很多技巧，并不是每个人都懂这些技巧。  关于这方面的技巧，俺在2010年专门写过一篇《  如何防止黑客入侵[3]：如何构造安全的口令/密码  》。那篇旧文写得比较详细。你只要掌握其中的2到3种技巧，就可以构造出比较复杂又比较好记的密码。所以本文就不再啰嗦了，以免把篇幅拉得太长。         ★Key Files 认证的【优点】 
  说完密码认证，再来说说 KeyFiles 认证。相对于“密码认证”，这种方式比较新颖，俺多费点口水介绍。        ◇大大降低暴力破解的风险 
  前面提到：使用密码的认证方式，如果密码太简单或太短，就是容易遭暴力破解。而 KeyFiles 认证就避免了这个风险。        ◇好记 
  对于密码认证，为了对抗暴力破解，需要把密码设置得很复杂又很长。但是万一哪天你自己忘了，那就歇菜啦。  而使用 KeyFiles 进行认证，你只需要记住某个或某几个文件。相对而言，记忆的难度小多了。        ◇可以同时设置多个 
  针对同一个加密盘，只能设置一个密码，但可以指定【多个】KeyFile 文件。        ◇小结 
  基于上述这些优点，俺强烈建议： 
   能用 KeyFile 的场合，尽量用 KeyFiles
   。如果同时用 KeyFiles 和密码，当然更好。         ★Key Files 认证的【缺点】 
  凡事都有两面性。说完 KeyFiles 的优点，再来说说缺点。        ◇有些场合没法用 KeyFiles 
  （在  前一篇博文  俺有提到）当你用 TrueCrypt 加密系统分区的时候，只能用口令，【没法】用 KeyFile 方式。        ◇偷窥的风险 
  对于传统的密码方式，当你输入密码的时候，屏幕上显示的是星号（或圆点）。这种情况下，即使有人偷看你的屏幕，也只能知道密码的长度，而无法知道密码的内容。但如果使用 KeyFiles 方式，在打开加密盘的时候就需要指定某些 KeyFiles，万一有人偷看你的屏幕，就糟糕啦。  （后面会介绍，如何降低偷窥的风险）         ★关于 Key Files 的【生成】 
  关于 KeyFiles 的使用，可以有两种方式：  1. 选择已有的文件作为 KeyFiles  2. 让 TrueCrypt 帮你生成【纯随机】的 KeyFiles   下面分别说说这两种搞法。        ◇选择“已有的文件”作为 KeyFiles 
  理论上，任何一个文件都可以拿来当 KeyFile。但是从密码学角度而言，有的文件适合拿来做 KeyFile，有的不合适。  要达到好的加密效果，KeyFile 至少满足如下特征：  1. 文件内容最好是杂乱无规律（套用信息学的术语，“熵”要尽量大）  2. 最好是二进制文件（一般来说，“二进制”格式的杂乱度比较大）  3. 文件至少超过 1KB（TrueCrypt 的用户手册要求至少 30 字节。但是考虑到你挑选的文件，“熵”未必足够大。所以俺个人建议至少 1KB 比较保险）   虽然俺建议：用【已有】文件作 KeyFile，尺寸至少超过 1KB，但【并不是】越大越好。因为 TrueCrypt 最多只提取 KeyFile 开头一兆字节（1MB）的内容进行处理。所以用太大的文件没意义（文件尺寸在几兆左右，足矣）。  综合考虑这几个因素，日常碰到的文件中，可以考虑用来做 KeyFile 的主要有：某些图片文件（比如 JPG、PNG、GIF、但【别】用 BMP 格式）、某些音乐文件（比如 MP3、WMA、但【别】用 WAV 格式）、各种压缩包（zip、7z、rar、gzip、bzip2、等等）。  上述这几类文件格式，其内容都是基于压缩的，所以“熵值”足够大，适合用于作 KeyFiles；俺特别注明 BMP 和 WAV 不适合作 KeyFile，因为这两种格式通常是不压缩滴。        ◇让 TrueCrypt 生成【纯随机】Key Files 
  让 TrueCrypt 生成 KeyFiles，操作其实很简单——在 TrueCrypt 主菜单点“Tools”然后再点“KeyFile Generator”菜单项。会弹出一个对话框，你会看到里面有很多数字在自动变化。这时候你要【 
   随机并迅速
   】地移动你的鼠标（因为 TrueCrypt 会通过鼠标位置进行采样，以增加随机性）。大约半炷香之后（时间越长，随机性越好），你就可以点对话框下面的“Generate and Save KeyFile”按钮，然后会弹出一个“文件保存对话框”，让你保存刚生成的 KeyFile 到某处。   下面是这种方法的优缺点分析。   
   优点
    它生成的 KeyFiles 必定符合刚才所说的——具备足够好的加密效果。   
   缺点1
    为了让“熵值”足够大，TrueCrypt 采用某种随机算法来生成 KeyFiles（对密码学感兴趣的同学可以参见 TrueCrypt 手册的“Random Number Generator”章节）。因为是随机生成的，所以这个 KeyFiles 几乎一定是全新的。  这里的缺点在于——如果随机生成的 KeyFile 没做备份并且搞丢了，你就惨啦。口令忘了还可以使劲回忆，KeyFile 搞丢了基本上就没辙啦——加密盘就废了，永远也打不开。   
   缺点2
    TrueCrypt 生成的 KeyFile 都有个特点，文件大小固定是64字节。这就不利于隐蔽（关于 KeyFiles 的隐蔽性，下面会聊到）。        ◇哪种方式比较好？ 
  对于普通的网友，使用“方案1”（现有文件作 KeyFiles）是比较合适滴。再次啰嗦一下，如果你使用现有文件，一定要按照前面说的经验， 
   以确保你选择的 KeyFiles，其内容的“紊乱度”（熵值）足够大
   。  对于安全性有特殊需求的同学，可以考虑使用“方案2”（让 TrueCrypt 生成 KeyFiles）。这种方式有一些特殊的用处。比如在本文末尾有提到，还可以用来对付酷刑逼供哦。         ★关于 Key Files 的【存放】 
       ◇本机存储 VS 外部存储 
  总的来说有两种方式存放 KeyFiles：  1. KeyFiles 跟加密盘在同一个电脑中  2. KeyFiles 跟加密盘不在同一个电脑中（比如放在外置的 U 盘）   一般来说，第二种方式虽然稍微麻烦，但安全性更好——即使攻击者偷走你的电脑也拿不到 KeyFiles。  如果你考虑用外置存储的方式放置 KeyFiles，手机是一个不错的选择。用手机存放 KeyFiles 有如下优点：  1. 手机总是随身携带  2. 如今大部分手机都支持 U盘模式        ◇Key Files 的【伪装＆隐蔽】 
  前面说了，使用现有的文件当 KeyFiles，隐蔽性比较好。而且也说了，使用手机做外部存储比较好。  下面就来说说，这种情况下，如何增加隐蔽性。   以音乐文件为例  很多人的手机上都会存放一些歌曲（比如 MP3）。如今的智能手机，存储空间都以 GB 为单位，能轻松存放上千首（甚至上万首）歌曲。那么你可以从这些歌曲中挑选某几首，来作为你的 KeyFiles。挑选的歌曲最好是让你印象深刻的（可以是特别喜欢的，也可以是特别讨厌的）。这么干有如下几个优点：  1. 隐蔽性足够好（手机上存储音乐文件是很常见滴。即使你被六扇门逮捕，朝廷走狗检查你的手机，也不会起疑心）  2. 印象深刻的歌曲，不容易记错。  3. 在成百上千首歌曲中挑选某几首歌曲做 KeyFiles，穷举的难度非常大（下面会提到）。   虽然俺举的是音乐文件的例子，但在实际操作过程中，你可以自己变通一下——比如把音乐文件换成图片文件，效果也差不多。        ◇Key Files 的【个数】 
  前面说了，TrueCrypt 支持同一个加密盘用多个 KeyFiles。那么，KeyFiles 的个数设定为几个比较好捏？俺个人建议，设定为 5至10 个。  增加 KeyFile 的个数，在某种情况下会加大攻击者的难度。还拿刚才那个例子来说事儿：  假设你的手机上有一个音乐目录，里面有300首歌曲（这不算多），然后你任意挑选其中6个做加密盘的 KeyFiles。再假设攻击者（通过某种方式）知道你用这个目录里的音乐文件作 KeyFiles。那么攻击者就企图用穷举方式，尝遍该目录下所有文件的组合。那么他/她需要尝试多少次捏？  因为攻击者并不知道你选择了几个文件，所以要先穷举1个文件的组合、然后是2个文件的组合、3个文件的组合......（以此类推，直到穷举成功或放弃）  如果俺没记错的话，计算排列组合总数，算式大概如下  300挑1的组合——这个不用算，就是300种  300挑2的组合—— 
   (300*299)/(2*1)
    300挑3的组合—— 
   (300*299*298)/(3*2*1)
    300挑4的组合—— 
   (300*299*298*297)/(4*3*2*1)
    ......  从上面这个例子可以看出——  “KeyFiles 的数目”只是略微增加，排列组合的总数会猛增到【天文数字】。但 KeyFiles 也不是越多越好——因为还要考虑自己遗忘或记错的风险。所以俺觉得，【4至8个】是比较合适的平衡点。         ★Key Files 的其它注意事项 
       ◇要确保 Key File 的文件内容【不变】 
  因为 TrueCrypt 是根据 KeyFile 的内容来生成认证信息。所以你一定要确保： 
   每个 KeyFile 文件【内容不变】
   。如果某个 KeyFile （开头1MB）的内容被改动过，下次你用这个文件登录，就会失败。  （至于 KeyFile 的“文件名”或“存放目录”，可以随便改，没关系）        ◇关于“默认 Key Files”的优缺点 
  TrueCrypt 有一个功能叫“Default KeyFiles”。使用这个功能，你可以指定某些文件作为默认的 KeyFiles。指定了之后，你每次打开某个加密盘，都会自动使用这些 KeyFiles 啦。   
   优点
    1. 提供了便捷性（不用每次打开加密盘都选择 KeyFiles）  2. 防止偷窥   
   缺点及解决方法
    1. 灵活性不够（所有的加密盘都会依赖于默认的 KeyFiles）。  2. 如果攻击者通过某种方式拿到你的 TrueCrypt 配置文件（位于 
   %APPDATA%\TrueCrypt
   目录下的 
   Configuration.xml
   ），就会知道你的默认 KeyFiles 放在哪个目录。   要防止缺点1  TrueCrypt 的配置文件是基于当前的操作系统用户。可以通过创建多个操作系统用户，来增加灵活性。   要防止缺点2  你可以在“默认KeyFiles”的基础上，再为某个加密盘额外指定额外的 KeyFiles。这样一来，即使攻击者知道你的默认 KeyFiles，也无法知道额外的 KeyFiles。         ★关于 Key Files 的【高级用法】 
       ◇如何用 KeyFiles 应对酷刑逼供？ 
  本来这篇博文已经写完了。但是看到某读者在  前一篇博文  的留言，提到说：不管 TrueCrypt 的技术有多好，都无法对付酷刑逼供。所以俺再额外补充一个小节，说说“如何用 KeyFiles 应对酷刑逼供”。   不管哪种酷刑逼供，要想得手，都有个前提条件——受刑的人【确实知道】某些信息。  如果你的加密盘使用 KeyFiles 认证，并且这个 KeyFiles 是由 TrueCrypt 随机生成的。那么，只要你在被捕之前，来得及【销毁】KeyFiles（包括其备份），之后的酷刑逼供对你就没有用啦！因为 TrueCrypt 随机生成的 KeyFiles，连你本人也不知道文件内容。这种情况下，酷刑逼供是没有用滴。  这个招数的难点在于：如何能够及时销毁 KeyFiles？  关于这方面的技术及经验，俺后来另写了一篇教程《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》    回到本系列目录     
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  TrueCrypt——文件加密的法宝  》  《  扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品  》  《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》  《  文件加密的扫盲介绍  》  《  扫盲文件完整性校验——关于散列值和数字签名  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/08/truecrypt-2.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    <meta property="og:description" content="

      TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证  
  
    
      
    
  
  
接着前一篇《  关于加密算法和加密盘的类型  》的话题，今天说说 TrueCrypt 的两种认证方式：老式的“口令认证”和新式的“Key Files 认证”。  
       
        ★如何用好“密码认证”？ 
  用过电脑的同学，肯定对密码（口令）的使用非常熟悉了。所以俺就不用再解释基本概念了，只是重点聊一下密码认证的潜在风险和防范措施。        ◇对于加密盘，弱密码的危害更大 
  关于“弱密码的危害”，想必很多同学都听说过。但是有个细节，可能很多人没有意识到。那就是： 
   弱密码对磁盘加密的危害更加明显
   。  咱们拿“操作系统口令”和“加密盘口令”进行对比。  如果某个操作系统做过安全加固，通常会在系统中设置“无效登录的上限”。只要攻击者尝试的无效口令超过这个上限，该用户就会被锁定。但是对于磁盘加密工具而言，无法像操作系统那样，限制无效口令的次数。因为针对加密盘的暴力破解，前提通常是：攻击者已经拿到存储介质（比如 硬盘、U盘、等）。在这种情况下，攻击者可以使用自己的工具进行密码尝试（不会有次数限制）。  所以，你的加密盘一旦用了弱口令，就很容易遭到暴力破解。        ◇攻击者如何暴力破解密码 
  针对加密盘的暴力破解有很多种，本小节所说的是针对"用户密码"的暴力破解。   
   对于短密码
    假如你的加密盘仅仅使用口令认证，而且你的口令比较短（比如说小于6个字符）。那么攻击者只要尝试所有的6字符组合，就必然可以试出你的口令。顺便说一下，很多网友用的口令只有小写字母和数字，那么6字符的口令，只有(26+10)的6次方。这个数并不算大，可以被穷举。   
   对于特定形式的密码
    所谓的“特定形式密码”，比较典型的例子就是日期（尤其是生日）。这是很多菜鸟常用的坏习惯。  很多不懂技术的同学会有一个错觉： 
   误以为
   用日期做口令，好像长度还比较长（如：2000-01-01 有10个字符），似乎很保险。  其实捏，用日期做口令是很危险的。因为常用的日期，大部分都分布在最近100年的范围内，也就是说，可能性小于 365*100；即使对每一个日期考虑不同的写法格式（比如 yyyymmdd、yyyy-mm-dd、mm/dd/yyyy、等等）顶多再乘以20倍，连一百万都不到。对于暴力穷举，基本上属于小儿科。        ◇如何构造强密码 
  要构造一个又好记又复杂的密码，简直称得上是一门艺术。这里面涉及很多技巧，并不是每个人都懂这些技巧。  关于这方面的技巧，俺在2010年专门写过一篇《  如何防止黑客入侵[3]：如何构造安全的口令/密码  》。那篇旧文写得比较详细。你只要掌握其中的2到3种技巧，就可以构造出比较复杂又比较好记的密码。所以本文就不再啰嗦了，以免把篇幅拉得太长。         ★Key Files 认证的【优点】 
  说完密码认证，再来说说 KeyFiles 认证。相对于“密码认证”，这种方式比较新颖，俺多费点口水介绍。        ◇大大降低暴力破解的风险 
  前面提到：使用密码的认证方式，如果密码太简单或太短，就是容易遭暴力破解。而 KeyFiles 认证就避免了这个风险。        ◇好记 
  对于密码认证，为了对抗暴力破解，需要把密码设置得很复杂又很长。但是万一哪天你自己忘了，那就歇菜啦。  而使用 KeyFiles 进行认证，你只需要记住某个或某几个文件。相对而言，记忆的难度小多了。        ◇可以同时设置多个 
  针对同一个加密盘，只能设置一个密码，但可以指定【多个】KeyFile 文件。        ◇小结 
  基于上述这些优点，俺强烈建议： 
   能用 KeyFile 的场合，尽量用 KeyFiles
   。如果同时用 KeyFiles 和密码，当然更好。         ★Key Files 认证的【缺点】 
  凡事都有两面性。说完 KeyFiles 的优点，再来说说缺点。        ◇有些场合没法用 KeyFiles 
  （在  前一篇博文  俺有提到）当你用 TrueCrypt 加密系统分区的时候，只能用口令，【没法】用 KeyFile 方式。        ◇偷窥的风险 
  对于传统的密码方式，当你输入密码的时候，屏幕上显示的是星号（或圆点）。这种情况下，即使有人偷看你的屏幕，也只能知道密码的长度，而无法知道密码的内容。但如果使用 KeyFiles 方式，在打开加密盘的时候就需要指定某些 KeyFiles，万一有人偷看你的屏幕，就糟糕啦。  （后面会介绍，如何降低偷窥的风险）         ★关于 Key Files 的【生成】 
  关于 KeyFiles 的使用，可以有两种方式：  1. 选择已有的文件作为 KeyFiles  2. 让 TrueCrypt 帮你生成【纯随机】的 KeyFiles   下面分别说说这两种搞法。        ◇选择“已有的文件”作为 KeyFiles 
  理论上，任何一个文件都可以拿来当 KeyFile。但是从密码学角度而言，有的文件适合拿来做 KeyFile，有的不合适。  要达到好的加密效果，KeyFile 至少满足如下特征：  1. 文件内容最好是杂乱无规律（套用信息学的术语，“熵”要尽量大）  2. 最好是二进制文件（一般来说，“二进制”格式的杂乱度比较大）  3. 文件至少超过 1KB（TrueCrypt 的用户手册要求至少 30 字节。但是考虑到你挑选的文件，“熵”未必足够大。所以俺个人建议至少 1KB 比较保险）   虽然俺建议：用【已有】文件作 KeyFile，尺寸至少超过 1KB，但【并不是】越大越好。因为 TrueCrypt 最多只提取 KeyFile 开头一兆字节（1MB）的内容进行处理。所以用太大的文件没意义（文件尺寸在几兆左右，足矣）。  综合考虑这几个因素，日常碰到的文件中，可以考虑用来做 KeyFile 的主要有：某些图片文件（比如 JPG、PNG、GIF、但【别】用 BMP 格式）、某些音乐文件（比如 MP3、WMA、但【别】用 WAV 格式）、各种压缩包（zip、7z、rar、gzip、bzip2、等等）。  上述这几类文件格式，其内容都是基于压缩的，所以“熵值”足够大，适合用于作 KeyFiles；俺特别注明 BMP 和 WAV 不适合作 KeyFile，因为这两种格式通常是不压缩滴。        ◇让 TrueCrypt 生成【纯随机】Key Files 
  让 TrueCrypt 生成 KeyFiles，操作其实很简单——在 TrueCrypt 主菜单点“Tools”然后再点“KeyFile Generator”菜单项。会弹出一个对话框，你会看到里面有很多数字在自动变化。这时候你要【 
   随机并迅速
   】地移动你的鼠标（因为 TrueCrypt 会通过鼠标位置进行采样，以增加随机性）。大约半炷香之后（时间越长，随机性越好），你就可以点对话框下面的“Generate and Save KeyFile”按钮，然后会弹出一个“文件保存对话框”，让你保存刚生成的 KeyFile 到某处。   下面是这种方法的优缺点分析。   
   优点
    它生成的 KeyFiles 必定符合刚才所说的——具备足够好的加密效果。   
   缺点1
    为了让“熵值”足够大，TrueCrypt 采用某种随机算法来生成 KeyFiles（对密码学感兴趣的同学可以参见 TrueCrypt 手册的“Random Number Generator”章节）。因为是随机生成的，所以这个 KeyFiles 几乎一定是全新的。  这里的缺点在于——如果随机生成的 KeyFile 没做备份并且搞丢了，你就惨啦。口令忘了还可以使劲回忆，KeyFile 搞丢了基本上就没辙啦——加密盘就废了，永远也打不开。   
   缺点2
    TrueCrypt 生成的 KeyFile 都有个特点，文件大小固定是64字节。这就不利于隐蔽（关于 KeyFiles 的隐蔽性，下面会聊到）。        ◇哪种方式比较好？ 
  对于普通的网友，使用“方案1”（现有文件作 KeyFiles）是比较合适滴。再次啰嗦一下，如果你使用现有文件，一定要按照前面说的经验， 
   以确保你选择的 KeyFiles，其内容的“紊乱度”（熵值）足够大
   。  对于安全性有特殊需求的同学，可以考虑使用“方案2”（让 TrueCrypt 生成 KeyFiles）。这种方式有一些特殊的用处。比如在本文末尾有提到，还可以用来对付酷刑逼供哦。         ★关于 Key Files 的【存放】 
       ◇本机存储 VS 外部存储 
  总的来说有两种方式存放 KeyFiles：  1. KeyFiles 跟加密盘在同一个电脑中  2. KeyFiles 跟加密盘不在同一个电脑中（比如放在外置的 U 盘）   一般来说，第二种方式虽然稍微麻烦，但安全性更好——即使攻击者偷走你的电脑也拿不到 KeyFiles。  如果你考虑用外置存储的方式放置 KeyFiles，手机是一个不错的选择。用手机存放 KeyFiles 有如下优点：  1. 手机总是随身携带  2. 如今大部分手机都支持 U盘模式        ◇Key Files 的【伪装＆隐蔽】 
  前面说了，使用现有的文件当 KeyFiles，隐蔽性比较好。而且也说了，使用手机做外部存储比较好。  下面就来说说，这种情况下，如何增加隐蔽性。   以音乐文件为例  很多人的手机上都会存放一些歌曲（比如 MP3）。如今的智能手机，存储空间都以 GB 为单位，能轻松存放上千首（甚至上万首）歌曲。那么你可以从这些歌曲中挑选某几首，来作为你的 KeyFiles。挑选的歌曲最好是让你印象深刻的（可以是特别喜欢的，也可以是特别讨厌的）。这么干有如下几个优点：  1. 隐蔽性足够好（手机上存储音乐文件是很常见滴。即使你被六扇门逮捕，朝廷走狗检查你的手机，也不会起疑心）  2. 印象深刻的歌曲，不容易记错。  3. 在成百上千首歌曲中挑选某几首歌曲做 KeyFiles，穷举的难度非常大（下面会提到）。   虽然俺举的是音乐文件的例子，但在实际操作过程中，你可以自己变通一下——比如把音乐文件换成图片文件，效果也差不多。        ◇Key Files 的【个数】 
  前面说了，TrueCrypt 支持同一个加密盘用多个 KeyFiles。那么，KeyFiles 的个数设定为几个比较好捏？俺个人建议，设定为 5至10 个。  增加 KeyFile 的个数，在某种情况下会加大攻击者的难度。还拿刚才那个例子来说事儿：  假设你的手机上有一个音乐目录，里面有300首歌曲（这不算多），然后你任意挑选其中6个做加密盘的 KeyFiles。再假设攻击者（通过某种方式）知道你用这个目录里的音乐文件作 KeyFiles。那么攻击者就企图用穷举方式，尝遍该目录下所有文件的组合。那么他/她需要尝试多少次捏？  因为攻击者并不知道你选择了几个文件，所以要先穷举1个文件的组合、然后是2个文件的组合、3个文件的组合......（以此类推，直到穷举成功或放弃）  如果俺没记错的话，计算排列组合总数，算式大概如下  300挑1的组合——这个不用算，就是300种  300挑2的组合—— 
   (300*299)/(2*1)
    300挑3的组合—— 
   (300*299*298)/(3*2*1)
    300挑4的组合—— 
   (300*299*298*297)/(4*3*2*1)
    ......  从上面这个例子可以看出——  “KeyFiles 的数目”只是略微增加，排列组合的总数会猛增到【天文数字】。但 KeyFiles 也不是越多越好——因为还要考虑自己遗忘或记错的风险。所以俺觉得，【4至8个】是比较合适的平衡点。         ★Key Files 的其它注意事项 
       ◇要确保 Key File 的文件内容【不变】 
  因为 TrueCrypt 是根据 KeyFile 的内容来生成认证信息。所以你一定要确保： 
   每个 KeyFile 文件【内容不变】
   。如果某个 KeyFile （开头1MB）的内容被改动过，下次你用这个文件登录，就会失败。  （至于 KeyFile 的“文件名”或“存放目录”，可以随便改，没关系）        ◇关于“默认 Key Files”的优缺点 
  TrueCrypt 有一个功能叫“Default KeyFiles”。使用这个功能，你可以指定某些文件作为默认的 KeyFiles。指定了之后，你每次打开某个加密盘，都会自动使用这些 KeyFiles 啦。   
   优点
    1. 提供了便捷性（不用每次打开加密盘都选择 KeyFiles）  2. 防止偷窥   
   缺点及解决方法
    1. 灵活性不够（所有的加密盘都会依赖于默认的 KeyFiles）。  2. 如果攻击者通过某种方式拿到你的 TrueCrypt 配置文件（位于 
   %APPDATA%\TrueCrypt
   目录下的 
   Configuration.xml
   ），就会知道你的默认 KeyFiles 放在哪个目录。   要防止缺点1  TrueCrypt 的配置文件是基于当前的操作系统用户。可以通过创建多个操作系统用户，来增加灵活性。   要防止缺点2  你可以在“默认KeyFiles”的基础上，再为某个加密盘额外指定额外的 KeyFiles。这样一来，即使攻击者知道你的默认 KeyFiles，也无法知道额外的 KeyFiles。         ★关于 Key Files 的【高级用法】 
       ◇如何用 KeyFiles 应对酷刑逼供？ 
  本来这篇博文已经写完了。但是看到某读者在  前一篇博文  的留言，提到说：不管 TrueCrypt 的技术有多好，都无法对付酷刑逼供。所以俺再额外补充一个小节，说说“如何用 KeyFiles 应对酷刑逼供”。   不管哪种酷刑逼供，要想得手，都有个前提条件——受刑的人【确实知道】某些信息。  如果你的加密盘使用 KeyFiles 认证，并且这个 KeyFiles 是由 TrueCrypt 随机生成的。那么，只要你在被捕之前，来得及【销毁】KeyFiles（包括其备份），之后的酷刑逼供对你就没有用啦！因为 TrueCrypt 随机生成的 KeyFiles，连你本人也不知道文件内容。这种情况下，酷刑逼供是没有用滴。  这个招数的难点在于：如何能够及时销毁 KeyFiles？  关于这方面的技术及经验，俺后来另写了一篇教程《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》    回到本系列目录     
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  TrueCrypt——文件加密的法宝  》  《  扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品  》  《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》  《  文件加密的扫盲介绍  》  《  扫盲文件完整性校验——关于散列值和数字签名  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/08/truecrypt-2.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    
    <meta name="author" content="觀點" />

    
    <meta property="og:title" content="TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证" />
    <meta property="twitter:title" content="TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证" />
    

  <link rel="stylesheet" type="text/css" href="/opinion/style.css" />
  <link rel="alternate" type="application/rss+xml" title="觀點 - 從草根到大師 git.io/JJCxS" href="/opinion/feed.xml" />

  <!-- Social Share Kit CSS -->
  <link rel="stylesheet" href="/opinion/assets/css/social-share-kit.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/bootstrap.min.css" type="text/css">
  <script type="text/javascript" src="/opinion/assets/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="/opinion/assets/js/page.js"></script>

</head>

  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      

      <div class="site-info">
        <h1 class="site-name" style="display: inline-block;"><a href="/opinion/">觀點</a></h1>
        <i class="site-description" style="font-size: 12px;">從草根到大師 git.io/JJCxS</i>
      </div>

      <nav>
        <span id="search-container" >
          <a href="/opinion/tools"><i class="fa fa-bookmark twitter" title="百宝箱"></i></a>
        <a><i class="fa fa-search" title="限前100結果"></i></a><input type="text" id="search-input" placeholder="標題 作者 來源 日期 (17499)"
          style="margin: 10px 0px 0px 0px; height: 30px;width: auto" title="本站最正確的打開方式">
        </span>
        
        
        <a href="/opinion/categories" style="color: Tomato;"><i class="fa fa-tags" title="分类"></i></a>
        
        
        
        <a href="https://be4.herokuapp.com/" style="color: #003366;"><i class="fa fa-comments" title="论坛"></i></a>
        
        
        
        <a href="/opinion/about"><i class="fa fa-info-circle" title="关于"></i></a>
        
        
        <a title="电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇，del同来源旧一篇" onclick="toggle_visibility('help')"><i class="fa fa-question-circle"></i></a>
        <a id="fa-home" href="https://nodebe4.github.io" title="BE4服务列表" onclick="//toggle_visibility('site-list')"><i class="fa fa-home" aria-hidden="true"></i></a>
      </nav>

    </header>
    <div id="site-list" class="tags" style="display: block;text-align: right;border-bottom: 1px solid lightGray;"><noscript><span style="background-color: #e8e8e8;color: #d10000;font-size: 14px;">开启浏览器JavaScript以获取搜索功能和更好的浏览体验</span></noscript></div>
    <p id="help" style="font-size: 14px;display: none;text-align: right;"><span style="color:green;">电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇, del同来源旧一篇</span>; <span style="color:orange">对应触屏FAB：上下右左</span>; 轉Markdown<a href="https://euangoddard.github.io/clipboard2markdown/"><i class="fa fa-file-text-o"></i></a></p>
  </div>
</div>

<script type="text/javascript" >
  function toggle_visibility(id){
    var help = document.getElementById(id)
    if (help.style.display=='none'){
      help.style.display='block';
    }else{
      help.style.display='none';
    }
  }

  const url = "https://nodebe4.github.io/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    // var homebtn = document.getElementById("fa-home")
    // homebtn.removeAttribute("href")
    var content = document.getElementById("site-list");
    content.innerHTML = ''
    var ul = document.createElement("ul")
    ul.classList.add("label")
    content.appendChild(ul)
    var cnt = 0

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var li = document.createElement('li')
        li.classList.add("tag")
        li.id = 'site-' + cnt
        ul.appendChild(li)
        var a0 = document.createElement('a')
        li.appendChild(a0)
        a0.href = item.url[0]
        var span = document.createElement('span')
        a0.appendChild(span)
        span.innerText = item['name']
        // span.style.backgroundColor = item['background-color']
        // span.style.color='#E4CBC3'
        span.style.color = item['background-color']
        span.style['font-size'] = '14px'
        cnt += 1
        // test_alive(li.id, a0.href)
      })
    })
  })

function test_alive(id, url){
  var divstatus = document.getElementById(id)
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        if (data.responseText.includes('502')){
          // divstatus.style.color='#FBB7B7'
          // divstatus.style.color='gray'
          // divstatus.title = "服务器无响应"
          divstatus.parentNode.removeChild(divstatus)
        }else{
          // divstatus.style.color='#B6FAC8'
          divstatus.title = data.responseText
        }
      }
  });
  return divstatus
}
</script>



    <!-- Left & centered positioning -->

<div class="ssk-sticky ssk-right ssk-center ssk-sticky-hide-xs ssk-group ssk-round">
  
    <a href="https://be4news.pythonanywhere.com/archivenow/ia/https%3A%2F%2Fprogram-think.blogspot.com%2F2013%2F08%2Ftruecrypt-2.html" class="ssk ssk-link" title="存到互联网档案馆" target="_blank"></a>
    <a href="https://www.facebook.com/sharer.php?u=https://program-think.blogspot.com/2013/08/truecrypt-2.html" class="ssk ssk-facebook"></a>
    <a href="https://twitter.com/intent/tweet?url=https://program-think.blogspot.com/2013/08/truecrypt-2.html&text=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证&hashtags=觀點" class="ssk ssk-twitter"></a>
    <a href="https://reddit.com/submit?url=https://program-think.blogspot.com/2013/08/truecrypt-2.html&title=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证" class="ssk ssk-reddit"></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://program-think.blogspot.com/2013/08/truecrypt-2.html&title=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证" class="ssk ssk-linkedin"></a>
    <a href="mailto:{email_address}?subject=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证&body=

      TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证  
  
    
      
    
  
  
接着前一篇《  关于加密算法和加密盘的类型  》的话题，今天说说 TrueCrypt 的两种认证方式：老式的“口令认证”和新式的“Key Files 认证”。  
       
        ★如何用好“密码认证”？ 
  用过电脑的同学，肯定对密码（口令）的使用非常熟悉了。所以俺就不用再解释基本概念了，只是重点聊一下密码认证的潜在风险和防范措施。        ◇对于加密盘，弱密码的危害更大 
  关于“弱密码的危害”，想必很多同学都听说过。但是有个细节，可能很多人没有意识到。那就是： 
   弱密码对磁盘加密的危害更加明显
   。  咱们拿“操作系统口令”和“加密盘口令”进行对比。  如果某个操作系统做过安全加固，通常会在系统中设置“无效登录的上限”。只要攻击者尝试的无效口令超过这个上限，该用户就会被锁定。但是对于磁盘加密工具而言，无法像操作系统那样，限制无效口令的次数。因为针对加密盘的暴力破解，前提通常是：攻击者已经拿到存储介质（比如 硬盘、U盘、等）。在这种情况下，攻击者可以使用自己的工具进行密码尝试（不会有次数限制）。  所以，你的加密盘一旦用了弱口令，就很容易遭到暴力破解。        ◇攻击者如何暴力破解密码 
  针对加密盘的暴力破解有很多种，本小节所说的是针对"用户密码"的暴力破解。   
   对于短密码
    假如你的加密盘仅仅使用口令认证，而且你的口令比较短（比如说小于6个字符）。那么攻击者只要尝试所有的6字符组合，就必然可以试出你的口令。顺便说一下，很多网友用的口令只有小写字母和数字，那么6字符的口令，只有(26+10)的6次方。这个数并不算大，可以被穷举。   
   对于特定形式的密码
    所谓的“特定形式密码”，比较典型的例子就是日期（尤其是生日）。这是很多菜鸟常用的坏习惯。  很多不懂技术的同学会有一个错觉： 
   误以为
   用日期做口令，好像长度还比较长（如：2000-01-01 有10个字符），似乎很保险。  其实捏，用日期做口令是很危险的。因为常用的日期，大部分都分布在最近100年的范围内，也就是说，可能性小于 365*100；即使对每一个日期考虑不同的写法格式（比如 yyyymmdd、yyyy-mm-dd、mm/dd/yyyy、等等）顶多再乘以20倍，连一百万都不到。对于暴力穷举，基本上属于小儿科。        ◇如何构造强密码 
  要构造一个又好记又复杂的密码，简直称得上是一门艺术。这里面涉及很多技巧，并不是每个人都懂这些技巧。  关于这方面的技巧，俺在2010年专门写过一篇《  如何防止黑客入侵[3]：如何构造安全的口令/密码  》。那篇旧文写得比较详细。你只要掌握其中的2到3种技巧，就可以构造出比较复杂又比较好记的密码。所以本文就不再啰嗦了，以免把篇幅拉得太长。         ★Key Files 认证的【优点】 
  说完密码认证，再来说说 KeyFiles 认证。相对于“密码认证”，这种方式比较新颖，俺多费点口水介绍。        ◇大大降低暴力破解的风险 
  前面提到：使用密码的认证方式，如果密码太简单或太短，就是容易遭暴力破解。而 KeyFiles 认证就避免了这个风险。        ◇好记 
  对于密码认证，为了对抗暴力破解，需要把密码设置得很复杂又很长。但是万一哪天你自己忘了，那就歇菜啦。  而使用 KeyFiles 进行认证，你只需要记住某个或某几个文件。相对而言，记忆的难度小多了。        ◇可以同时设置多个 
  针对同一个加密盘，只能设置一个密码，但可以指定【多个】KeyFile 文件。        ◇小结 
  基于上述这些优点，俺强烈建议： 
   能用 KeyFile 的场合，尽量用 KeyFiles
   。如果同时用 KeyFiles 和密码，当然更好。         ★Key Files 认证的【缺点】 
  凡事都有两面性。说完 KeyFiles 的优点，再来说说缺点。        ◇有些场合没法用 KeyFiles 
  （在  前一篇博文  俺有提到）当你用 TrueCrypt 加密系统分区的时候，只能用口令，【没法】用 KeyFile 方式。        ◇偷窥的风险 
  对于传统的密码方式，当你输入密码的时候，屏幕上显示的是星号（或圆点）。这种情况下，即使有人偷看你的屏幕，也只能知道密码的长度，而无法知道密码的内容。但如果使用 KeyFiles 方式，在打开加密盘的时候就需要指定某些 KeyFiles，万一有人偷看你的屏幕，就糟糕啦。  （后面会介绍，如何降低偷窥的风险）         ★关于 Key Files 的【生成】 
  关于 KeyFiles 的使用，可以有两种方式：  1. 选择已有的文件作为 KeyFiles  2. 让 TrueCrypt 帮你生成【纯随机】的 KeyFiles   下面分别说说这两种搞法。        ◇选择“已有的文件”作为 KeyFiles 
  理论上，任何一个文件都可以拿来当 KeyFile。但是从密码学角度而言，有的文件适合拿来做 KeyFile，有的不合适。  要达到好的加密效果，KeyFile 至少满足如下特征：  1. 文件内容最好是杂乱无规律（套用信息学的术语，“熵”要尽量大）  2. 最好是二进制文件（一般来说，“二进制”格式的杂乱度比较大）  3. 文件至少超过 1KB（TrueCrypt 的用户手册要求至少 30 字节。但是考虑到你挑选的文件，“熵”未必足够大。所以俺个人建议至少 1KB 比较保险）   虽然俺建议：用【已有】文件作 KeyFile，尺寸至少超过 1KB，但【并不是】越大越好。因为 TrueCrypt 最多只提取 KeyFile 开头一兆字节（1MB）的内容进行处理。所以用太大的文件没意义（文件尺寸在几兆左右，足矣）。  综合考虑这几个因素，日常碰到的文件中，可以考虑用来做 KeyFile 的主要有：某些图片文件（比如 JPG、PNG、GIF、但【别】用 BMP 格式）、某些音乐文件（比如 MP3、WMA、但【别】用 WAV 格式）、各种压缩包（zip、7z、rar、gzip、bzip2、等等）。  上述这几类文件格式，其内容都是基于压缩的，所以“熵值”足够大，适合用于作 KeyFiles；俺特别注明 BMP 和 WAV 不适合作 KeyFile，因为这两种格式通常是不压缩滴。        ◇让 TrueCrypt 生成【纯随机】Key Files 
  让 TrueCrypt 生成 KeyFiles，操作其实很简单——在 TrueCrypt 主菜单点“Tools”然后再点“KeyFile Generator”菜单项。会弹出一个对话框，你会看到里面有很多数字在自动变化。这时候你要【 
   随机并迅速
   】地移动你的鼠标（因为 TrueCrypt 会通过鼠标位置进行采样，以增加随机性）。大约半炷香之后（时间越长，随机性越好），你就可以点对话框下面的“Generate and Save KeyFile”按钮，然后会弹出一个“文件保存对话框”，让你保存刚生成的 KeyFile 到某处。   下面是这种方法的优缺点分析。   
   优点
    它生成的 KeyFiles 必定符合刚才所说的——具备足够好的加密效果。   
   缺点1
    为了让“熵值”足够大，TrueCrypt 采用某种随机算法来生成 KeyFiles（对密码学感兴趣的同学可以参见 TrueCrypt 手册的“Random Number Generator”章节）。因为是随机生成的，所以这个 KeyFiles 几乎一定是全新的。  这里的缺点在于——如果随机生成的 KeyFile 没做备份并且搞丢了，你就惨啦。口令忘了还可以使劲回忆，KeyFile 搞丢了基本上就没辙啦——加密盘就废了，永远也打不开。   
   缺点2
    TrueCrypt 生成的 KeyFile 都有个特点，文件大小固定是64字节。这就不利于隐蔽（关于 KeyFiles 的隐蔽性，下面会聊到）。        ◇哪种方式比较好？ 
  对于普通的网友，使用“方案1”（现有文件作 KeyFiles）是比较合适滴。再次啰嗦一下，如果你使用现有文件，一定要按照前面说的经验， 
   以确保你选择的 KeyFiles，其内容的“紊乱度”（熵值）足够大
   。  对于安全性有特殊需求的同学，可以考虑使用“方案2”（让 TrueCrypt 生成 KeyFiles）。这种方式有一些特殊的用处。比如在本文末尾有提到，还可以用来对付酷刑逼供哦。         ★关于 Key Files 的【存放】 
       ◇本机存储 VS 外部存储 
  总的来说有两种方式存放 KeyFiles：  1. KeyFiles 跟加密盘在同一个电脑中  2. KeyFiles 跟加密盘不在同一个电脑中（比如放在外置的 U 盘）   一般来说，第二种方式虽然稍微麻烦，但安全性更好——即使攻击者偷走你的电脑也拿不到 KeyFiles。  如果你考虑用外置存储的方式放置 KeyFiles，手机是一个不错的选择。用手机存放 KeyFiles 有如下优点：  1. 手机总是随身携带  2. 如今大部分手机都支持 U盘模式        ◇Key Files 的【伪装＆隐蔽】 
  前面说了，使用现有的文件当 KeyFiles，隐蔽性比较好。而且也说了，使用手机做外部存储比较好。  下面就来说说，这种情况下，如何增加隐蔽性。   以音乐文件为例  很多人的手机上都会存放一些歌曲（比如 MP3）。如今的智能手机，存储空间都以 GB 为单位，能轻松存放上千首（甚至上万首）歌曲。那么你可以从这些歌曲中挑选某几首，来作为你的 KeyFiles。挑选的歌曲最好是让你印象深刻的（可以是特别喜欢的，也可以是特别讨厌的）。这么干有如下几个优点：  1. 隐蔽性足够好（手机上存储音乐文件是很常见滴。即使你被六扇门逮捕，朝廷走狗检查你的手机，也不会起疑心）  2. 印象深刻的歌曲，不容易记错。  3. 在成百上千首歌曲中挑选某几首歌曲做 KeyFiles，穷举的难度非常大（下面会提到）。   虽然俺举的是音乐文件的例子，但在实际操作过程中，你可以自己变通一下——比如把音乐文件换成图片文件，效果也差不多。        ◇Key Files 的【个数】 
  前面说了，TrueCrypt 支持同一个加密盘用多个 KeyFiles。那么，KeyFiles 的个数设定为几个比较好捏？俺个人建议，设定为 5至10 个。  增加 KeyFile 的个数，在某种情况下会加大攻击者的难度。还拿刚才那个例子来说事儿：  假设你的手机上有一个音乐目录，里面有300首歌曲（这不算多），然后你任意挑选其中6个做加密盘的 KeyFiles。再假设攻击者（通过某种方式）知道你用这个目录里的音乐文件作 KeyFiles。那么攻击者就企图用穷举方式，尝遍该目录下所有文件的组合。那么他/她需要尝试多少次捏？  因为攻击者并不知道你选择了几个文件，所以要先穷举1个文件的组合、然后是2个文件的组合、3个文件的组合......（以此类推，直到穷举成功或放弃）  如果俺没记错的话，计算排列组合总数，算式大概如下  300挑1的组合——这个不用算，就是300种  300挑2的组合—— 
   (300*299)/(2*1)
    300挑3的组合—— 
   (300*299*298)/(3*2*1)
    300挑4的组合—— 
   (300*299*298*297)/(4*3*2*1)
    ......  从上面这个例子可以看出——  “KeyFiles 的数目”只是略微增加，排列组合的总数会猛增到【天文数字】。但 KeyFiles 也不是越多越好——因为还要考虑自己遗忘或记错的风险。所以俺觉得，【4至8个】是比较合适的平衡点。         ★Key Files 的其它注意事项 
       ◇要确保 Key File 的文件内容【不变】 
  因为 TrueCrypt 是根据 KeyFile 的内容来生成认证信息。所以你一定要确保： 
   每个 KeyFile 文件【内容不变】
   。如果某个 KeyFile （开头1MB）的内容被改动过，下次你用这个文件登录，就会失败。  （至于 KeyFile 的“文件名”或“存放目录”，可以随便改，没关系）        ◇关于“默认 Key Files”的优缺点 
  TrueCrypt 有一个功能叫“Default KeyFiles”。使用这个功能，你可以指定某些文件作为默认的 KeyFiles。指定了之后，你每次打开某个加密盘，都会自动使用这些 KeyFiles 啦。   
   优点
    1. 提供了便捷性（不用每次打开加密盘都选择 KeyFiles）  2. 防止偷窥   
   缺点及解决方法
    1. 灵活性不够（所有的加密盘都会依赖于默认的 KeyFiles）。  2. 如果攻击者通过某种方式拿到你的 TrueCrypt 配置文件（位于 
   %APPDATA%\TrueCrypt
   目录下的 
   Configuration.xml
   ），就会知道你的默认 KeyFiles 放在哪个目录。   要防止缺点1  TrueCrypt 的配置文件是基于当前的操作系统用户。可以通过创建多个操作系统用户，来增加灵活性。   要防止缺点2  你可以在“默认KeyFiles”的基础上，再为某个加密盘额外指定额外的 KeyFiles。这样一来，即使攻击者知道你的默认 KeyFiles，也无法知道额外的 KeyFiles。         ★关于 Key Files 的【高级用法】 
       ◇如何用 KeyFiles 应对酷刑逼供？ 
  本来这篇博文已经写完了。但是看到某读者在  前一篇博文  的留言，提到说：不管 TrueCrypt 的技术有多好，都无法对付酷刑逼供。所以俺再额外补充一个小节，说说“如何用 KeyFiles 应对酷刑逼供”。   不管哪种酷刑逼供，要想得手，都有个前提条件——受刑的人【确实知道】某些信息。  如果你的加密盘使用 KeyFiles 认证，并且这个 KeyFiles 是由 TrueCrypt 随机生成的。那么，只要你在被捕之前，来得及【销毁】KeyFiles（包括其备份），之后的酷刑逼供对你就没有用啦！因为 TrueCrypt 随机生成的 KeyFiles，连你本人也不知道文件内容。这种情况下，酷刑逼供是没有用滴。  这个招数的难点在于：如何能够及时销毁 KeyFiles？  关于这方面的技术及经验，俺后来另写了一篇教程《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》    回到本系列目录     
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  TrueCrypt——文件加密的法宝  》  《  扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品  》  《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》  《  文件加密的扫盲介绍  》  《  扫盲文件完整性校验——关于散列值和数字签名  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/08/truecrypt-2.html 
    
    
  
  
    
         
    
    
    
 
    
  

" class="ssk ssk-email"></a>
    <a href="http://pinterest.com/pin/create/link/?url=https://program-think.blogspot.com/2013/08/truecrypt-2.html" class="ssk ssk-pinterest"></a>
    <a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://program-think.blogspot.com/2013/08/truecrypt-2.html&title=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证&caption=

      TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证  
  
    
      
    
  
  
接着前一篇《  关于加密算法和加密盘的类型  》的话题，今天说说 TrueCrypt 的两种认证方式：老式的“口令认证”和新式的“Key Files 认证”。  
       
        ★如何用好“密码认证”？ 
  用过电脑的同学，肯定对密码（口令）的使用非常熟悉了。所以俺就不用再解释基本概念了，只是重点聊一下密码认证的潜在风险和防范措施。        ◇对于加密盘，弱密码的危害更大 
  关于“弱密码的危害”，想必很多同学都听说过。但是有个细节，可能很多人没有意识到。那就是： 
   弱密码对磁盘加密的危害更加明显
   。  咱们拿“操作系统口令”和“加密盘口令”进行对比。  如果某个操作系统做过安全加固，通常会在系统中设置“无效登录的上限”。只要攻击者尝试的无效口令超过这个上限，该用户就会被锁定。但是对于磁盘加密工具而言，无法像操作系统那样，限制无效口令的次数。因为针对加密盘的暴力破解，前提通常是：攻击者已经拿到存储介质（比如 硬盘、U盘、等）。在这种情况下，攻击者可以使用自己的工具进行密码尝试（不会有次数限制）。  所以，你的加密盘一旦用了弱口令，就很容易遭到暴力破解。        ◇攻击者如何暴力破解密码 
  针对加密盘的暴力破解有很多种，本小节所说的是针对"用户密码"的暴力破解。   
   对于短密码
    假如你的加密盘仅仅使用口令认证，而且你的口令比较短（比如说小于6个字符）。那么攻击者只要尝试所有的6字符组合，就必然可以试出你的口令。顺便说一下，很多网友用的口令只有小写字母和数字，那么6字符的口令，只有(26+10)的6次方。这个数并不算大，可以被穷举。   
   对于特定形式的密码
    所谓的“特定形式密码”，比较典型的例子就是日期（尤其是生日）。这是很多菜鸟常用的坏习惯。  很多不懂技术的同学会有一个错觉： 
   误以为
   用日期做口令，好像长度还比较长（如：2000-01-01 有10个字符），似乎很保险。  其实捏，用日期做口令是很危险的。因为常用的日期，大部分都分布在最近100年的范围内，也就是说，可能性小于 365*100；即使对每一个日期考虑不同的写法格式（比如 yyyymmdd、yyyy-mm-dd、mm/dd/yyyy、等等）顶多再乘以20倍，连一百万都不到。对于暴力穷举，基本上属于小儿科。        ◇如何构造强密码 
  要构造一个又好记又复杂的密码，简直称得上是一门艺术。这里面涉及很多技巧，并不是每个人都懂这些技巧。  关于这方面的技巧，俺在2010年专门写过一篇《  如何防止黑客入侵[3]：如何构造安全的口令/密码  》。那篇旧文写得比较详细。你只要掌握其中的2到3种技巧，就可以构造出比较复杂又比较好记的密码。所以本文就不再啰嗦了，以免把篇幅拉得太长。         ★Key Files 认证的【优点】 
  说完密码认证，再来说说 KeyFiles 认证。相对于“密码认证”，这种方式比较新颖，俺多费点口水介绍。        ◇大大降低暴力破解的风险 
  前面提到：使用密码的认证方式，如果密码太简单或太短，就是容易遭暴力破解。而 KeyFiles 认证就避免了这个风险。        ◇好记 
  对于密码认证，为了对抗暴力破解，需要把密码设置得很复杂又很长。但是万一哪天你自己忘了，那就歇菜啦。  而使用 KeyFiles 进行认证，你只需要记住某个或某几个文件。相对而言，记忆的难度小多了。        ◇可以同时设置多个 
  针对同一个加密盘，只能设置一个密码，但可以指定【多个】KeyFile 文件。        ◇小结 
  基于上述这些优点，俺强烈建议： 
   能用 KeyFile 的场合，尽量用 KeyFiles
   。如果同时用 KeyFiles 和密码，当然更好。         ★Key Files 认证的【缺点】 
  凡事都有两面性。说完 KeyFiles 的优点，再来说说缺点。        ◇有些场合没法用 KeyFiles 
  （在  前一篇博文  俺有提到）当你用 TrueCrypt 加密系统分区的时候，只能用口令，【没法】用 KeyFile 方式。        ◇偷窥的风险 
  对于传统的密码方式，当你输入密码的时候，屏幕上显示的是星号（或圆点）。这种情况下，即使有人偷看你的屏幕，也只能知道密码的长度，而无法知道密码的内容。但如果使用 KeyFiles 方式，在打开加密盘的时候就需要指定某些 KeyFiles，万一有人偷看你的屏幕，就糟糕啦。  （后面会介绍，如何降低偷窥的风险）         ★关于 Key Files 的【生成】 
  关于 KeyFiles 的使用，可以有两种方式：  1. 选择已有的文件作为 KeyFiles  2. 让 TrueCrypt 帮你生成【纯随机】的 KeyFiles   下面分别说说这两种搞法。        ◇选择“已有的文件”作为 KeyFiles 
  理论上，任何一个文件都可以拿来当 KeyFile。但是从密码学角度而言，有的文件适合拿来做 KeyFile，有的不合适。  要达到好的加密效果，KeyFile 至少满足如下特征：  1. 文件内容最好是杂乱无规律（套用信息学的术语，“熵”要尽量大）  2. 最好是二进制文件（一般来说，“二进制”格式的杂乱度比较大）  3. 文件至少超过 1KB（TrueCrypt 的用户手册要求至少 30 字节。但是考虑到你挑选的文件，“熵”未必足够大。所以俺个人建议至少 1KB 比较保险）   虽然俺建议：用【已有】文件作 KeyFile，尺寸至少超过 1KB，但【并不是】越大越好。因为 TrueCrypt 最多只提取 KeyFile 开头一兆字节（1MB）的内容进行处理。所以用太大的文件没意义（文件尺寸在几兆左右，足矣）。  综合考虑这几个因素，日常碰到的文件中，可以考虑用来做 KeyFile 的主要有：某些图片文件（比如 JPG、PNG、GIF、但【别】用 BMP 格式）、某些音乐文件（比如 MP3、WMA、但【别】用 WAV 格式）、各种压缩包（zip、7z、rar、gzip、bzip2、等等）。  上述这几类文件格式，其内容都是基于压缩的，所以“熵值”足够大，适合用于作 KeyFiles；俺特别注明 BMP 和 WAV 不适合作 KeyFile，因为这两种格式通常是不压缩滴。        ◇让 TrueCrypt 生成【纯随机】Key Files 
  让 TrueCrypt 生成 KeyFiles，操作其实很简单——在 TrueCrypt 主菜单点“Tools”然后再点“KeyFile Generator”菜单项。会弹出一个对话框，你会看到里面有很多数字在自动变化。这时候你要【 
   随机并迅速
   】地移动你的鼠标（因为 TrueCrypt 会通过鼠标位置进行采样，以增加随机性）。大约半炷香之后（时间越长，随机性越好），你就可以点对话框下面的“Generate and Save KeyFile”按钮，然后会弹出一个“文件保存对话框”，让你保存刚生成的 KeyFile 到某处。   下面是这种方法的优缺点分析。   
   优点
    它生成的 KeyFiles 必定符合刚才所说的——具备足够好的加密效果。   
   缺点1
    为了让“熵值”足够大，TrueCrypt 采用某种随机算法来生成 KeyFiles（对密码学感兴趣的同学可以参见 TrueCrypt 手册的“Random Number Generator”章节）。因为是随机生成的，所以这个 KeyFiles 几乎一定是全新的。  这里的缺点在于——如果随机生成的 KeyFile 没做备份并且搞丢了，你就惨啦。口令忘了还可以使劲回忆，KeyFile 搞丢了基本上就没辙啦——加密盘就废了，永远也打不开。   
   缺点2
    TrueCrypt 生成的 KeyFile 都有个特点，文件大小固定是64字节。这就不利于隐蔽（关于 KeyFiles 的隐蔽性，下面会聊到）。        ◇哪种方式比较好？ 
  对于普通的网友，使用“方案1”（现有文件作 KeyFiles）是比较合适滴。再次啰嗦一下，如果你使用现有文件，一定要按照前面说的经验， 
   以确保你选择的 KeyFiles，其内容的“紊乱度”（熵值）足够大
   。  对于安全性有特殊需求的同学，可以考虑使用“方案2”（让 TrueCrypt 生成 KeyFiles）。这种方式有一些特殊的用处。比如在本文末尾有提到，还可以用来对付酷刑逼供哦。         ★关于 Key Files 的【存放】 
       ◇本机存储 VS 外部存储 
  总的来说有两种方式存放 KeyFiles：  1. KeyFiles 跟加密盘在同一个电脑中  2. KeyFiles 跟加密盘不在同一个电脑中（比如放在外置的 U 盘）   一般来说，第二种方式虽然稍微麻烦，但安全性更好——即使攻击者偷走你的电脑也拿不到 KeyFiles。  如果你考虑用外置存储的方式放置 KeyFiles，手机是一个不错的选择。用手机存放 KeyFiles 有如下优点：  1. 手机总是随身携带  2. 如今大部分手机都支持 U盘模式        ◇Key Files 的【伪装＆隐蔽】 
  前面说了，使用现有的文件当 KeyFiles，隐蔽性比较好。而且也说了，使用手机做外部存储比较好。  下面就来说说，这种情况下，如何增加隐蔽性。   以音乐文件为例  很多人的手机上都会存放一些歌曲（比如 MP3）。如今的智能手机，存储空间都以 GB 为单位，能轻松存放上千首（甚至上万首）歌曲。那么你可以从这些歌曲中挑选某几首，来作为你的 KeyFiles。挑选的歌曲最好是让你印象深刻的（可以是特别喜欢的，也可以是特别讨厌的）。这么干有如下几个优点：  1. 隐蔽性足够好（手机上存储音乐文件是很常见滴。即使你被六扇门逮捕，朝廷走狗检查你的手机，也不会起疑心）  2. 印象深刻的歌曲，不容易记错。  3. 在成百上千首歌曲中挑选某几首歌曲做 KeyFiles，穷举的难度非常大（下面会提到）。   虽然俺举的是音乐文件的例子，但在实际操作过程中，你可以自己变通一下——比如把音乐文件换成图片文件，效果也差不多。        ◇Key Files 的【个数】 
  前面说了，TrueCrypt 支持同一个加密盘用多个 KeyFiles。那么，KeyFiles 的个数设定为几个比较好捏？俺个人建议，设定为 5至10 个。  增加 KeyFile 的个数，在某种情况下会加大攻击者的难度。还拿刚才那个例子来说事儿：  假设你的手机上有一个音乐目录，里面有300首歌曲（这不算多），然后你任意挑选其中6个做加密盘的 KeyFiles。再假设攻击者（通过某种方式）知道你用这个目录里的音乐文件作 KeyFiles。那么攻击者就企图用穷举方式，尝遍该目录下所有文件的组合。那么他/她需要尝试多少次捏？  因为攻击者并不知道你选择了几个文件，所以要先穷举1个文件的组合、然后是2个文件的组合、3个文件的组合......（以此类推，直到穷举成功或放弃）  如果俺没记错的话，计算排列组合总数，算式大概如下  300挑1的组合——这个不用算，就是300种  300挑2的组合—— 
   (300*299)/(2*1)
    300挑3的组合—— 
   (300*299*298)/(3*2*1)
    300挑4的组合—— 
   (300*299*298*297)/(4*3*2*1)
    ......  从上面这个例子可以看出——  “KeyFiles 的数目”只是略微增加，排列组合的总数会猛增到【天文数字】。但 KeyFiles 也不是越多越好——因为还要考虑自己遗忘或记错的风险。所以俺觉得，【4至8个】是比较合适的平衡点。         ★Key Files 的其它注意事项 
       ◇要确保 Key File 的文件内容【不变】 
  因为 TrueCrypt 是根据 KeyFile 的内容来生成认证信息。所以你一定要确保： 
   每个 KeyFile 文件【内容不变】
   。如果某个 KeyFile （开头1MB）的内容被改动过，下次你用这个文件登录，就会失败。  （至于 KeyFile 的“文件名”或“存放目录”，可以随便改，没关系）        ◇关于“默认 Key Files”的优缺点 
  TrueCrypt 有一个功能叫“Default KeyFiles”。使用这个功能，你可以指定某些文件作为默认的 KeyFiles。指定了之后，你每次打开某个加密盘，都会自动使用这些 KeyFiles 啦。   
   优点
    1. 提供了便捷性（不用每次打开加密盘都选择 KeyFiles）  2. 防止偷窥   
   缺点及解决方法
    1. 灵活性不够（所有的加密盘都会依赖于默认的 KeyFiles）。  2. 如果攻击者通过某种方式拿到你的 TrueCrypt 配置文件（位于 
   %APPDATA%\TrueCrypt
   目录下的 
   Configuration.xml
   ），就会知道你的默认 KeyFiles 放在哪个目录。   要防止缺点1  TrueCrypt 的配置文件是基于当前的操作系统用户。可以通过创建多个操作系统用户，来增加灵活性。   要防止缺点2  你可以在“默认KeyFiles”的基础上，再为某个加密盘额外指定额外的 KeyFiles。这样一来，即使攻击者知道你的默认 KeyFiles，也无法知道额外的 KeyFiles。         ★关于 Key Files 的【高级用法】 
       ◇如何用 KeyFiles 应对酷刑逼供？ 
  本来这篇博文已经写完了。但是看到某读者在  前一篇博文  的留言，提到说：不管 TrueCrypt 的技术有多好，都无法对付酷刑逼供。所以俺再额外补充一个小节，说说“如何用 KeyFiles 应对酷刑逼供”。   不管哪种酷刑逼供，要想得手，都有个前提条件——受刑的人【确实知道】某些信息。  如果你的加密盘使用 KeyFiles 认证，并且这个 KeyFiles 是由 TrueCrypt 随机生成的。那么，只要你在被捕之前，来得及【销毁】KeyFiles（包括其备份），之后的酷刑逼供对你就没有用啦！因为 TrueCrypt 随机生成的 KeyFiles，连你本人也不知道文件内容。这种情况下，酷刑逼供是没有用滴。  这个招数的难点在于：如何能够及时销毁 KeyFiles？  关于这方面的技术及经验，俺后来另写了一篇教程《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》    回到本系列目录     
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  TrueCrypt——文件加密的法宝  》  《  扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品  》  《  如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧  》  《  文件加密的扫盲介绍  》  《  扫盲文件完整性校验——关于散列值和数字签名  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2013/08/truecrypt-2.html 
    
    
  
  
    
         
    
    
    
 
    
  

&tags=觀點" class="ssk ssk-tumblr"></a>
    <a href="https://buffer.com/add?text=TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证&url=https://program-think.blogspot.com/2013/08/truecrypt-2.html" class="ssk ssk-buffer"></a>
</div>


    <div id="main" role="main" class="container">
      
  <!-- Html Elements for Search -->
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>

  <script src="/opinion/assets/js/simple-jekyll-search.min.js"></script>

  <!-- Configuration -->
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/opinion/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a><time>{date}</time><a class="tag">{category}</a></li>',
    noResultsText: '没找到',
    limit: 100,
    fuzzy: false,
    exclude: ['Welcome']
  })

  </script>

      







  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    


  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    



<article class="post">
  <h1>TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证</h1>
  <!-- Look the author details up from the site config. -->
  

  <div>
    <span class="date">
      2013-08-11
    </span>

    <!-- Output author details if some exist. -->
    
      
    


    <ul class="tag">
      <li>
        <a href="https://nodebe4.github.io/opinion/categories/#编程随想">
          编程随想
        </a>
      </li>
    </ul>

    
        <span>
            <!-- Personal Info. -->
            <a href="https://program-think.blogspot.com/2013/08/truecrypt-2.html" style="font-size:14px;">原文</a>
        </span>
    

    <span style="float: right;" title="编程随想的其它文章">
      <a style="font-size: 14px;" rel="nofollow" href="#sametag" class="tags">#编程随想 的其它文章</a>
    </span>

  </div>

  <div class="entry">
    
    
    
    <div class="post hentry uncustomized-post-template">
<a name="8863635921371099287">
 </a>   <h1 class="post-title entry-title" id="truecrypt-2-keyfiles---"> <a href="https://program-think.blogspot.com/2013/08/truecrypt-2.html"> TrueCrypt 使用经验[2]：关于加密盘的密码认证和 KeyFiles 认证 </a> </h1>
  <div class="post-header">
    <div class="post-header-line-1">
      <div class="post-inner-index"></div>
    </div>
  </div>
  <div class="post-body entry-content">
接着前一篇《 <a href="https://program-think.blogspot.com/2013/08/truecrypt-1.html"> 关于加密算法和加密盘的类型 </a> 》的话题，今天说说 TrueCrypt 的两种认证方式：老式的“口令认证”和新式的“Key Files 认证”。 <br /> <a name="more">
  </a>     <!--program-think-->
 <br /> <br />     <h2 id="section"> ★如何用好“密码认证”？ </h2>
 <br /> 用过电脑的同学，肯定对密码（口令）的使用非常熟悉了。所以俺就不用再解释基本概念了，只是重点聊一下密码认证的潜在风险和防范措施。 <br /> <br />     <h3 id="section-1"> ◇对于加密盘，弱密码的危害更大 </h3>
 <br /> 关于“弱密码的危害”，想必很多同学都听说过。但是有个细节，可能很多人没有意识到。那就是： <b>
   弱密码对磁盘加密的危害更加明显
  </b> 。 <br /> 咱们拿“操作系统口令”和“加密盘口令”进行对比。 <br /> 如果某个操作系统做过安全加固，通常会在系统中设置“无效登录的上限”。只要攻击者尝试的无效口令超过这个上限，该用户就会被锁定。但是对于磁盘加密工具而言，无法像操作系统那样，限制无效口令的次数。因为针对加密盘的暴力破解，前提通常是：攻击者已经拿到存储介质（比如 硬盘、U盘、等）。在这种情况下，攻击者可以使用自己的工具进行密码尝试（不会有次数限制）。 <br /> 所以，你的加密盘一旦用了弱口令，就很容易遭到暴力破解。 <br /> <br />     <h3 id="section-2"> ◇攻击者如何暴力破解密码 </h3>
 <br /> 针对加密盘的暴力破解有很多种，本小节所说的是针对"用户密码"的暴力破解。 <br /> <br /> <b>
   对于短密码
  </b> <br /> 假如你的加密盘仅仅使用口令认证，而且你的口令比较短（比如说小于6个字符）。那么攻击者只要尝试所有的6字符组合，就必然可以试出你的口令。顺便说一下，很多网友用的口令只有小写字母和数字，那么6字符的口令，只有(26+10)的6次方。这个数并不算大，可以被穷举。 <br /> <br /> <b>
   对于特定形式的密码
  </b> <br /> 所谓的“特定形式密码”，比较典型的例子就是日期（尤其是生日）。这是很多菜鸟常用的坏习惯。 <br /> 很多不懂技术的同学会有一个错觉： <b>
   误以为
  </b> 用日期做口令，好像长度还比较长（如：2000-01-01 有10个字符），似乎很保险。 <br /> 其实捏，用日期做口令是很危险的。因为常用的日期，大部分都分布在最近100年的范围内，也就是说，可能性小于 365*100；即使对每一个日期考虑不同的写法格式（比如 yyyymmdd、yyyy-mm-dd、mm/dd/yyyy、等等）顶多再乘以20倍，连一百万都不到。对于暴力穷举，基本上属于小儿科。 <br /> <br />     <h3 id="section-3"> ◇如何构造强密码 </h3>
 <br /> 要构造一个又好记又复杂的密码，简直称得上是一门艺术。这里面涉及很多技巧，并不是每个人都懂这些技巧。 <br /> 关于这方面的技巧，俺在2010年专门写过一篇《 <a href="https://program-think.blogspot.com/2010/06/howto-prevent-hacker-attack-3.html"> 如何防止黑客入侵[3]：如何构造安全的口令/密码 </a> 》。那篇旧文写得比较详细。你只要掌握其中的2到3种技巧，就可以构造出比较复杂又比较好记的密码。所以本文就不再啰嗦了，以免把篇幅拉得太长。 <br /> <br /> <br />     <h2 id="key-files--"> ★Key Files 认证的【优点】 </h2>
 <br /> 说完密码认证，再来说说 KeyFiles 认证。相对于“密码认证”，这种方式比较新颖，俺多费点口水介绍。 <br /> <br />     <h3 id="section-4"> ◇大大降低暴力破解的风险 </h3>
 <br /> 前面提到：使用密码的认证方式，如果密码太简单或太短，就是容易遭暴力破解。而 KeyFiles 认证就避免了这个风险。 <br /> <br />     <h3 id="section-5"> ◇好记 </h3>
 <br /> 对于密码认证，为了对抗暴力破解，需要把密码设置得很复杂又很长。但是万一哪天你自己忘了，那就歇菜啦。 <br /> 而使用 KeyFiles 进行认证，你只需要记住某个或某几个文件。相对而言，记忆的难度小多了。 <br /> <br />     <h3 id="section-6"> ◇可以同时设置多个 </h3>
 <br /> 针对同一个加密盘，只能设置一个密码，但可以指定【多个】KeyFile 文件。 <br /> <br />     <h3 id="section-7"> ◇小结 </h3>
 <br /> 基于上述这些优点，俺强烈建议： <b>
   能用 KeyFile 的场合，尽量用 KeyFiles
  </b> 。如果同时用 KeyFiles 和密码，当然更好。 <br /> <br /> <br />     <h2 id="key-files---1"> ★Key Files 认证的【缺点】 </h2>
 <br /> 凡事都有两面性。说完 KeyFiles 的优点，再来说说缺点。 <br /> <br />     <h3 id="keyfiles-"> ◇有些场合没法用 KeyFiles </h3>
 <br /> （在 <a href="https://program-think.blogspot.com/2013/08/truecrypt-1.html"> 前一篇博文 </a> 俺有提到）当你用 TrueCrypt 加密系统分区的时候，只能用口令，【没法】用 KeyFile 方式。 <br /> <br />     <h3 id="section-8"> ◇偷窥的风险 </h3>
 <br /> 对于传统的密码方式，当你输入密码的时候，屏幕上显示的是星号（或圆点）。这种情况下，即使有人偷看你的屏幕，也只能知道密码的长度，而无法知道密码的内容。但如果使用 KeyFiles 方式，在打开加密盘的时候就需要指定某些 KeyFiles，万一有人偷看你的屏幕，就糟糕啦。 <br /> （后面会介绍，如何降低偷窥的风险） <br /> <br /> <br />     <h2 id="key-files---2"> ★关于 Key Files 的【生成】 </h2>
 <br /> 关于 KeyFiles 的使用，可以有两种方式： <br /> 1. 选择已有的文件作为 KeyFiles <br /> 2. 让 TrueCrypt 帮你生成【纯随机】的 KeyFiles <br /> <br /> 下面分别说说这两种搞法。 <br /> <br />     <h3 id="keyfiles--1"> ◇选择“已有的文件”作为 KeyFiles </h3>
 <br /> 理论上，任何一个文件都可以拿来当 KeyFile。但是从密码学角度而言，有的文件适合拿来做 KeyFile，有的不合适。 <br /> 要达到好的加密效果，KeyFile 至少满足如下特征： <br /> 1. 文件内容最好是杂乱无规律（套用信息学的术语，“熵”要尽量大） <br /> 2. 最好是二进制文件（一般来说，“二进制”格式的杂乱度比较大） <br /> 3. 文件至少超过 1KB（TrueCrypt 的用户手册要求至少 30 字节。但是考虑到你挑选的文件，“熵”未必足够大。所以俺个人建议至少 1KB 比较保险） <br /> <br /> 虽然俺建议：用【已有】文件作 KeyFile，尺寸至少超过 1KB，但【并不是】越大越好。因为 TrueCrypt 最多只提取 KeyFile 开头一兆字节（1MB）的内容进行处理。所以用太大的文件没意义（文件尺寸在几兆左右，足矣）。 <br /> 综合考虑这几个因素，日常碰到的文件中，可以考虑用来做 KeyFile 的主要有：某些图片文件（比如 JPG、PNG、GIF、但【别】用 BMP 格式）、某些音乐文件（比如 MP3、WMA、但【别】用 WAV 格式）、各种压缩包（zip、7z、rar、gzip、bzip2、等等）。 <br /> 上述这几类文件格式，其内容都是基于压缩的，所以“熵值”足够大，适合用于作 KeyFiles；俺特别注明 BMP 和 WAV 不适合作 KeyFile，因为这两种格式通常是不压缩滴。 <br /> <br />     <h3 id="truecrypt-key-files-"> ◇让 TrueCrypt 生成【纯随机】Key Files </h3>
 <br /> 让 TrueCrypt 生成 KeyFiles，操作其实很简单——在 TrueCrypt 主菜单点“Tools”然后再点“KeyFile Generator”菜单项。会弹出一个对话框，你会看到里面有很多数字在自动变化。这时候你要【 <b>
   随机并迅速
  </b> 】地移动你的鼠标（因为 TrueCrypt 会通过鼠标位置进行采样，以增加随机性）。大约半炷香之后（时间越长，随机性越好），你就可以点对话框下面的“Generate and Save KeyFile”按钮，然后会弹出一个“文件保存对话框”，让你保存刚生成的 KeyFile 到某处。 <br /> <br /> 下面是这种方法的优缺点分析。 <br /> <br /> <b>
   优点
  </b> <br /> 它生成的 KeyFiles 必定符合刚才所说的——具备足够好的加密效果。 <br /> <br /> <b>
   缺点1
  </b> <br /> 为了让“熵值”足够大，TrueCrypt 采用某种随机算法来生成 KeyFiles（对密码学感兴趣的同学可以参见 TrueCrypt 手册的“Random Number Generator”章节）。因为是随机生成的，所以这个 KeyFiles 几乎一定是全新的。 <br /> 这里的缺点在于——如果随机生成的 KeyFile 没做备份并且搞丢了，你就惨啦。口令忘了还可以使劲回忆，KeyFile 搞丢了基本上就没辙啦——加密盘就废了，永远也打不开。 <br /> <br /> <b>
   缺点2
  </b> <br /> TrueCrypt 生成的 KeyFile 都有个特点，文件大小固定是64字节。这就不利于隐蔽（关于 KeyFiles 的隐蔽性，下面会聊到）。 <br /> <br />     <h3 id="section-9"> ◇哪种方式比较好？ </h3>
 <br /> 对于普通的网友，使用“方案1”（现有文件作 KeyFiles）是比较合适滴。再次啰嗦一下，如果你使用现有文件，一定要按照前面说的经验， <b>
   以确保你选择的 KeyFiles，其内容的“紊乱度”（熵值）足够大
  </b> 。 <br /> 对于安全性有特殊需求的同学，可以考虑使用“方案2”（让 TrueCrypt 生成 KeyFiles）。这种方式有一些特殊的用处。比如在本文末尾有提到，还可以用来对付酷刑逼供哦。 <br /> <br /> <br />     <h2 id="key-files---3"> ★关于 Key Files 的【存放】 </h2>
 <br />     <h3 id="vs--"> ◇本机存储 VS 外部存储 </h3>
 <br /> 总的来说有两种方式存放 KeyFiles： <br /> 1. KeyFiles 跟加密盘在同一个电脑中 <br /> 2. KeyFiles 跟加密盘不在同一个电脑中（比如放在外置的 U 盘） <br /> <br /> 一般来说，第二种方式虽然稍微麻烦，但安全性更好——即使攻击者偷走你的电脑也拿不到 KeyFiles。 <br /> 如果你考虑用外置存储的方式放置 KeyFiles，手机是一个不错的选择。用手机存放 KeyFiles 有如下优点： <br /> 1. 手机总是随身携带 <br /> 2. 如今大部分手机都支持 U盘模式 <br /> <br />     <h3 id="key-files---4"> ◇Key Files 的【伪装＆隐蔽】 </h3>
 <br /> 前面说了，使用现有的文件当 KeyFiles，隐蔽性比较好。而且也说了，使用手机做外部存储比较好。 <br /> 下面就来说说，这种情况下，如何增加隐蔽性。 <br /> <br /> 以音乐文件为例 <br /> 很多人的手机上都会存放一些歌曲（比如 MP3）。如今的智能手机，存储空间都以 GB 为单位，能轻松存放上千首（甚至上万首）歌曲。那么你可以从这些歌曲中挑选某几首，来作为你的 KeyFiles。挑选的歌曲最好是让你印象深刻的（可以是特别喜欢的，也可以是特别讨厌的）。这么干有如下几个优点： <br /> 1. 隐蔽性足够好（手机上存储音乐文件是很常见滴。即使你被六扇门逮捕，朝廷走狗检查你的手机，也不会起疑心） <br /> 2. 印象深刻的歌曲，不容易记错。 <br /> 3. 在成百上千首歌曲中挑选某几首歌曲做 KeyFiles，穷举的难度非常大（下面会提到）。 <br /> <br /> 虽然俺举的是音乐文件的例子，但在实际操作过程中，你可以自己变通一下——比如把音乐文件换成图片文件，效果也差不多。 <br /> <br />     <h3 id="key-files---5"> ◇Key Files 的【个数】 </h3>
 <br /> 前面说了，TrueCrypt 支持同一个加密盘用多个 KeyFiles。那么，KeyFiles 的个数设定为几个比较好捏？俺个人建议，设定为 5至10 个。 <br /> 增加 KeyFile 的个数，在某种情况下会加大攻击者的难度。还拿刚才那个例子来说事儿： <br /> 假设你的手机上有一个音乐目录，里面有300首歌曲（这不算多），然后你任意挑选其中6个做加密盘的 KeyFiles。再假设攻击者（通过某种方式）知道你用这个目录里的音乐文件作 KeyFiles。那么攻击者就企图用穷举方式，尝遍该目录下所有文件的组合。那么他/她需要尝试多少次捏？ <br /> 因为攻击者并不知道你选择了几个文件，所以要先穷举1个文件的组合、然后是2个文件的组合、3个文件的组合......（以此类推，直到穷举成功或放弃） <br /> 如果俺没记错的话，计算排列组合总数，算式大概如下 <br /> 300挑1的组合——这个不用算，就是300种 <br /> 300挑2的组合—— <code class="language-plaintext highlighter-rouge">
   (300*299)/(2*1)
  </code> <br /> 300挑3的组合—— <code class="language-plaintext highlighter-rouge">
   (300*299*298)/(3*2*1)
  </code> <br /> 300挑4的组合—— <code class="language-plaintext highlighter-rouge">
   (300*299*298*297)/(4*3*2*1)
  </code> <br /> ...... <br /> 从上面这个例子可以看出—— <br /> “KeyFiles 的数目”只是略微增加，排列组合的总数会猛增到【天文数字】。但 KeyFiles 也不是越多越好——因为还要考虑自己遗忘或记错的风险。所以俺觉得，【4至8个】是比较合适的平衡点。 <br /> <br /> <br />     <h2 id="key-files---6"> ★Key Files 的其它注意事项 </h2>
 <br />     <h3 id="key-file--"> ◇要确保 Key File 的文件内容【不变】 </h3>
 <br /> 因为 TrueCrypt 是根据 KeyFile 的内容来生成认证信息。所以你一定要确保： <b>
   每个 KeyFile 文件【内容不变】
  </b> 。如果某个 KeyFile （开头1MB）的内容被改动过，下次你用这个文件登录，就会失败。 <br /> （至于 KeyFile 的“文件名”或“存放目录”，可以随便改，没关系） <br /> <br />     <h3 id="key-files-"> ◇关于“默认 Key Files”的优缺点 </h3>
 <br /> TrueCrypt 有一个功能叫“Default KeyFiles”。使用这个功能，你可以指定某些文件作为默认的 KeyFiles。指定了之后，你每次打开某个加密盘，都会自动使用这些 KeyFiles 啦。 <br /> <br /> <b>
   优点
  </b> <br /> 1. 提供了便捷性（不用每次打开加密盘都选择 KeyFiles） <br /> 2. 防止偷窥 <br /> <br /> <b>
   缺点及解决方法
  </b> <br /> 1. 灵活性不够（所有的加密盘都会依赖于默认的 KeyFiles）。 <br /> 2. 如果攻击者通过某种方式拿到你的 TrueCrypt 配置文件（位于 <code class="language-plaintext highlighter-rouge">
   %APPDATA%\TrueCrypt
  </code> 目录下的 <code class="language-plaintext highlighter-rouge">
   Configuration.xml
  </code> ），就会知道你的默认 KeyFiles 放在哪个目录。 <br /> <br /> 要防止缺点1 <br /> TrueCrypt 的配置文件是基于当前的操作系统用户。可以通过创建多个操作系统用户，来增加灵活性。 <br /> <br /> 要防止缺点2 <br /> 你可以在“默认KeyFiles”的基础上，再为某个加密盘额外指定额外的 KeyFiles。这样一来，即使攻击者知道你的默认 KeyFiles，也无法知道额外的 KeyFiles。 <br /> <br /> <br />     <h2 id="key-files---7"> ★关于 Key Files 的【高级用法】 </h2>
 <br />     <h3 id="keyfiles--"> ◇如何用 KeyFiles 应对酷刑逼供？ </h3>
 <br /> 本来这篇博文已经写完了。但是看到某读者在 <a href="https://program-think.blogspot.com/2013/08/truecrypt-1.html"> 前一篇博文 </a> 的留言，提到说：不管 TrueCrypt 的技术有多好，都无法对付酷刑逼供。所以俺再额外补充一个小节，说说“如何用 KeyFiles 应对酷刑逼供”。 <br /> <br /> 不管哪种酷刑逼供，要想得手，都有个前提条件——受刑的人【确实知道】某些信息。 <br /> 如果你的加密盘使用 KeyFiles 认证，并且这个 KeyFiles 是由 TrueCrypt 随机生成的。那么，只要你在被捕之前，来得及【销毁】KeyFiles（包括其备份），之后的酷刑逼供对你就没有用啦！因为 TrueCrypt 随机生成的 KeyFiles，连你本人也不知道文件内容。这种情况下，酷刑逼供是没有用滴。 <br /> 这个招数的难点在于：如何能够及时销毁 KeyFiles？ <br /> 关于这方面的技术及经验，俺后来另写了一篇教程《 <a href="https://program-think.blogspot.com/2019/02/Use-Disk-Encryption-Anti-Computer-Forensics.html"> 如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧 </a> 》 <br /> <br /> <a href="https://program-think.blogspot.com/2011/05/recommend-truecrypt.html#index"> 回到本系列目录 </a> <br /> <br /> <br /> <b>
   俺博客上，和本文相关的帖子（需翻墙）
  </b> ： <br /> 《 <a href="https://program-think.blogspot.com/2011/05/recommend-truecrypt.html"> TrueCrypt——文件加密的法宝 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2015/10/VeraCrypt.html"> 扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2019/02/Use-Disk-Encryption-Anti-Computer-Forensics.html"> 如何用“磁盘加密”对抗警方的【取证软件】和【刑讯逼供】，兼谈数据删除技巧 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2011/05/file-encryption-overview.html"> 文件加密的扫盲介绍 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2013/02/file-integrity-check.html"> 扫盲文件完整性校验——关于散列值和数字签名 </a> 》     <div class="post-copyright">
<b>
    版权声明
   </b> <br /> 本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者 <a href="mailto:program.think@gmail.com"> 编程随想 </a> 和本文原始地址： <br /> <a href="https://program-think.blogspot.com/2013/08/truecrypt-2.html" id="OriginalPostUrl"> https://program-think.blogspot.com/2013/08/truecrypt-2.html </a>
    </div>
    <div style="clear: both;"></div>
  </div>
  <div class="post-footer" style="margin-bottom:50px;">
    <div class="post-footer-line post-footer-line-1" style="display:none;">
<span class="post-author vcard"> </span> <span class="reaction-buttons"> </span> <span class="star-ratings"> </span> <span class="post-icons"> </span> <span class="post-backlinks post-comment-link"> </span>
    </div>
    <div class="post-footer-line post-footer-line-2 post-toolbar"></div>
    <div class="post-footer-line post-footer-line-3">
<span class="post-location"> </span>
    </div>
  </div>
</div>


  </div>

  <hr style="border-top:1px solid #28323C;"/>

<font size=2px>
  文章版权归原作者所有。
</font>

<div style="text-align:center"><img width="1px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站" style="text-align:center"/></div>

  <div id="sametag">
    <h4 style="display: inline-block;">#编程随想 的其它文章</h4>
    <span>--<a href="https://nodebe4.github.io/opinion/2021-05-09/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-%E6%94%BF%E6%B2%BB-IT-%E7%A7%91%E6%99%AE-%E5%8E%86%E5%8F%B2-%E7%AD%89-97%E6%9C%AC/">最新</a>-</span>
    <span>-<a href="https://nodebe4.github.io/opinion/2009-01-15/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%BC%A0%E5%8F%8A%E6%9C%AC%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E7%AE%80%E4%BB%8B/">最早</a>--</span>
    
      <li>
        <time>2013-08-22</time>
        <a href="https://nodebe4.github.io/opinion/2013-08-22/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-34%E6%9C%AC/">
          分享各类电子书（34本）
        </a>
      </li>
    
    
      <li>
        <time>2013-08-16</time>
        <a href="https://nodebe4.github.io/opinion/2013-08-16/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-3-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%A0%B4%E8%A7%A3%E5%92%8C%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD/">
          TrueCrypt 使用经验[3]：关于加密盘的破解和防范措施
        </a>
      </li>
    
    
      <li>
        <time>2013-08-06</time>
        <a href="https://nodebe4.github.io/opinion/2013-08-06/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-1-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E5%92%8C%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%B1%BB%E5%9E%8B/">
          TrueCrypt 使用经验[1]：关于加密算法和加密盘的类型
        </a>
      </li>
    
    
      <li>
        <time>2013-07-31</time>
        <a href="https://nodebe4.github.io/opinion/2013-07-31/%E8%B0%88%E8%B0%88%E7%9C%9F%E7%90%86%E9%83%A8%E5%AF%B9%E6%9C%9D%E9%B2%9C%E6%88%98%E4%BA%89%E7%9A%84%E5%BF%BD%E6%82%A0/">
          谈谈真理部对朝鲜战争的忽悠
        </a>
      </li>
    
  </div>


  <hr>
  <div class="pagination">
    
      <span class="prev" >
          <a href="https://nodebe4.github.io/opinion/2013-08-09/%E7%AE%A1%E6%A8%82%E6%96%B0%E9%A2%A8%E6%83%8526-%E6%B5%B7%E9%9F%BB_%E5%AE%89%E5%8F%AF%E6%9B%B2-%E6%B5%B7%E8%BB%8D%E8%B5%B7%E9%8C%A8-%E6%B5%B7%E8%BB%8D%E8%BB%8D%E6%AD%8C/">
            前一篇：管樂新風情26-海韻_安可曲 海軍起錨、海軍軍歌
          </a>
      </span>
    
    
      <span class="next" >
          <a href="https://nodebe4.github.io/opinion/2013-08-12/%E9%92%B1%E7%92%9E%E7%BB%8F%E6%B5%8E%E9%80%82%E7%94%A8%E6%88%BF%E6%98%AF%E4%BF%9D%E9%9A%9C%E6%88%BF%E8%BF%98%E6%98%AF%E7%A6%8F%E5%88%A9%E6%88%BF/">
            後一篇：钱璞:经济适用房是保障房还是福利房
          </a>
      </span>
    

    <script>
    /* post pagination keyboard shortcuts */
    document.body.onkeyup = function(e){
      if (e.keyCode == '37') { window.location = 'https://nodebe4.github.io/opinion/2013-08-09/%E7%AE%A1%E6%A8%82%E6%96%B0%E9%A2%A8%E6%83%8526-%E6%B5%B7%E9%9F%BB_%E5%AE%89%E5%8F%AF%E6%9B%B2-%E6%B5%B7%E8%BB%8D%E8%B5%B7%E9%8C%A8-%E6%B5%B7%E8%BB%8D%E8%BB%8D%E6%AD%8C/'; } // left arrow key
      if (e.keyCode == '39') { window.location = 'https://nodebe4.github.io/opinion/2013-08-12/%E9%92%B1%E7%92%9E%E7%BB%8F%E6%B5%8E%E9%80%82%E7%94%A8%E6%88%BF%E6%98%AF%E4%BF%9D%E9%9A%9C%E6%88%BF%E8%BF%98%E6%98%AF%E7%A6%8F%E5%88%A9%E6%88%BF/'; } // right arrow key
      if (e.keyCode == '45') { window.location = 'https://nodebe4.github.io/opinion/2013-08-16/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-3-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%A0%B4%E8%A7%A3%E5%92%8C%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD/'; } // insert key
      if (e.keyCode == '46') { window.location = 'https://nodebe4.github.io/opinion/2013-08-06/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-1-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E5%92%8C%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%B1%BB%E5%9E%8B/'; } // delete key
    };
    </script>
    <link rel="stylesheet" type="text/css" href="/opinion/assets/css/fab.css" />

<div class="fab-wrapper">
  <div class="fab-wheel">
    
    
    
    <a class="fab-action fab-action-1" title="上一篇(热键 &#8594;)" href="https://nodebe4.github.io/opinion/2013-08-09/%E7%AE%A1%E6%A8%82%E6%96%B0%E9%A2%A8%E6%83%8526-%E6%B5%B7%E9%9F%BB_%E5%AE%89%E5%8F%AF%E6%9B%B2-%E6%B5%B7%E8%BB%8D%E8%B5%B7%E9%8C%A8-%E6%B5%B7%E8%BB%8D%E8%BB%8D%E6%AD%8C/">
      <i>后</i>
    </a>
    
    
    <a class="fab-action fab-action-2" title="下一篇(热键 &#8592;)" href="https://nodebe4.github.io/opinion/2013-08-12/%E9%92%B1%E7%92%9E%E7%BB%8F%E6%B5%8E%E9%80%82%E7%94%A8%E6%88%BF%E6%98%AF%E4%BF%9D%E9%9A%9C%E6%88%BF%E8%BF%98%E6%98%AF%E7%A6%8F%E5%88%A9%E6%88%BF/">
      <i>前</i>
    </a>
    
    
    <a class="fab-action fab-action-3" title="<编程随想>上一篇(热键 ins)" href="https://nodebe4.github.io/opinion/2013-08-16/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-3-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%A0%B4%E8%A7%A3%E5%92%8C%E9%98%B2%E8%8C%83%E6%8E%AA%E6%96%BD/">
      <i>左</i>
    </a>
    
    
    <a class="fab-action fab-action-4" title="<编程随想>下一篇(热键 del)" href="https://nodebe4.github.io/opinion/2013-08-06/TrueCrypt-%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C-1-%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E5%92%8C%E5%8A%A0%E5%AF%86%E7%9B%98%E7%9A%84%E7%B1%BB%E5%9E%8B/">
      <i>右</i>
    </a>
    
  </div>
</div>


  </div>


  

</article>

    </div>

    <div style="z-index:2;">
<script src="/opinion/assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  cornerOffset: 20, // px
  id: 'back-to-top',
  backgroundColor: '#ddd',
  textColor: 'red'
})</script>
</div>


    <div class="wrapper-footer" id="footer">
      <div class="container">
        <footer class="footer">
          <img width="200px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站"/>
<font size=2px>二维码分享本站</font>

<!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:beauti4@protonmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/NodeBE4/opinion" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  
  <li><a href="/opinion/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

    
</ul>





<p><span style="color:blue">内容每小时更新一次.</span> Powered by <a href="https://github.com/AWEEKJ/kiko-now">Kiko Now</a> & <a href="https://github.com/gitalk/gitalk">Gitalk</a> & <a href="https://github.com/duty-machine/news">duty-machine</a>, 站务 <a href="https://be4.herokuapp.com">NodeBE4</a>（<span style="color:red">被墙</span>）</p>





        </footer>
      </div>
    </div>

    



  </body>
</html>
