---
layout: post
title: "默认设置下的 Telegram 拨打电话会泄露IP地址 - iYouPort"
date: 2018-02-10T13:55:36+00:00
author: iYouPort
from: https://www.iyouport.org/%e9%bb%98%e8%ae%a4%e8%ae%be%e7%bd%ae%e4%b8%8b%e7%9a%84-telegram-%e6%8b%a8%e6%89%93%e7%94%b5%e8%af%9d%e4%bc%9a%e6%b3%84%e9%9c%b2ip%e5%9c%b0%e5%9d%80/
tags: [ iYouPort ]
categories: [ iYouPort ]
---

<article class="post-7967 post type-post status-publish format-standard has-post-thumbnail hentry category-knowledge-node category-289 category-54 category-67 tag-privacy tag-security tag-technology tag-telegram" id="post-7967">
 <header class="entry-header">
  <h1 class="entry-title">
   默认设置下的 Telegram 拨打电话会泄露IP地址
  </h1>
 </header>
 <div class="entry-meta">
  <span class="byline">
   <a href="https://www.iyouport.org/author/don-evans/" rel="author" title="由McCaffrey发布">
    McCaffrey
   </a>
  </span>
  <span class="cat-links">
   <a href="https://www.iyouport.org/category/knowledge-node/" rel="category tag">
    Knowledge Node
   </a>
   ,
   <a href="https://www.iyouport.org/category/%e6%8a%80%e6%9c%af/" rel="category tag">
    技术
   </a>
   ,
   <a href="https://www.iyouport.org/category/%e6%8a%80%e6%9c%af%e9%98%b2%e8%ba%ab-%e8%87%aa%e6%88%91%e4%bf%9d%e6%8a%a4%e6%96%b9%e6%b3%95/" rel="category tag">
    技术防身/自我保护方法
   </a>
   ,
   <a href="https://www.iyouport.org/category/%e7%bb%99%e8%a1%8c%e5%8a%a8%e8%80%85%e7%9a%84%e6%8a%a4%e8%ba%ab%e7%ac%a6%e5%92%8c%e6%ad%a6%e5%99%a8/" rel="category tag">
    给行动者的护身符和武器
   </a>
  </span>
  <span class="published-on">
   <time class="entry-date published" datetime="2018-02-10T21:55:36+08:00">
    2018年2月10日
   </time>
   <time class="updated" datetime="2019-08-10T22:02:37+08:00">
    2019年8月10日
   </time>
  </span>
  <span class="word-count">
   0 Minutes
  </span>
 </div>
 <div class="entry-content">
  <p>
   研究人员已经证明，在默认配置中，Telegram 在拨打电话时会泄露用户的 IP 地址。这里是详细介绍
  </p>
  <p>
   <img alt="" class="aligncenter size-full wp-image-7968 jetpack-lazy-image" data-lazy-sizes="(max-width: 956px) 100vw, 956px" data-lazy-src="https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=956%2C336&amp;is-pending-load=1#038;ssl=1" data-lazy-srcset="https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?w=956&amp;ssl=1 956w, https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=300%2C105&amp;ssl=1 300w, https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=768%2C270&amp;ssl=1 768w" data-recalc-dims="1" height="336" src="https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=956%2C336&amp;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="956"/>
   <noscript>
    <img alt="" class="aligncenter size-full wp-image-7968" data-recalc-dims="1" height="336" sizes="(max-width: 956px) 100vw, 956px" src="https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=956%2C336&amp;ssl=1" srcset="https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?w=956&amp;ssl=1 956w, https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=300%2C105&amp;ssl=1 300w, https://i2.wp.com/www.iyouport.org/wp-content/uploads/2019/08/00-34.png?resize=768%2C270&amp;ssl=1 768w" width="956"/>
   </noscript>
  </p>
  <p>
   我们曾经表示了不信任 Telegram（
   <a href="https://www.iyouport.org/%e5%ae%89%e5%85%a8%e6%89%8b%e5%86%8c%ef%bc%9a%e8%bf%99%e9%87%8c%e6%98%af%e4%bd%a0%e9%9c%80%e8%a6%81%e7%9a%84%e5%87%a0%e4%b9%8e%e6%89%80%e6%9c%89%e5%ae%89%e5%85%a8%e4%b8%8a%e7%bd%91%e5%b7%a5%e5%85%b7/" rel="nofollow noopener" title="This link will take you away from steemit.com">
    在这里
   </a>
   看到详细说明，还有我们推荐的可信应用），该程序将自己描述为一个安全的私人通信应用程序，但现在研究人员已经证明，在默认配置中，在拨打电话时它会泄露用户的 IP 地址。
  </p>
  <p>
   <em>
    延伸阅读：
   </em>
   <a href="https://www.patreon.com/posts/telegram-qu-gong-24623197" rel="nofollow noopener" title="This link will take you away from steemit.com">
    <em>
     俄罗斯采购中国的破解加密消息应用的技术 —— 中国监视技术公司美亚柏科生产的取证魔方可检测和解码消息应用 Telegram、Skype 和 Viber 等的存档
    </em>
   </a>
  </p>
  <p>
   这是由 Telegram 中的默认设置引起的，其语音呼叫通过 P2P 进行。但是，当使用 P2P 发起 Telegram 呼叫时，通话另一方的 IP 地址将显示在 Telegram 控制台日志中。并非所有版本都包含控制台日志。例如，在我们的测试中 Windows 版本不显示控制台日志，而 Linux 版本则显示。
  </p>
  <p>
   Telegram 应用程序确实表明用户可以通过更改 Settings -&gt; Private and Security -&gt; Voice Calls -&gt; Peer-To-Peer 为 Never 或 Nobody 来阻止他们的IP地址被泄露。执行此操作将导致用户的呼叫通过 Telegram 的服务器进行路由，这将隐藏 IP 地址，但代价是音频质量会下降。
  </p>
  <p>
   <img alt="" class="aligncenter size-full wp-image-7969 jetpack-lazy-image" data-lazy-sizes="(max-width: 820px) 100vw, 820px" data-lazy-src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=820%2C1101&amp;is-pending-load=1#038;ssl=1" data-lazy-srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?w=820&amp;ssl=1 820w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=223%2C300&amp;ssl=1 223w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=768%2C1031&amp;ssl=1 768w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=763%2C1024&amp;ssl=1 763w" data-recalc-dims="1" height="1101" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=820%2C1101&amp;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="820"/>
   <noscript>
    <img alt="" class="aligncenter size-full wp-image-7969" data-recalc-dims="1" height="1101" sizes="(max-width: 820px) 100vw, 820px" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=820%2C1101&amp;ssl=1" srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?w=820&amp;ssl=1 820w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=223%2C300&amp;ssl=1 223w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=768%2C1031&amp;ssl=1 768w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/2-19.png?resize=763%2C1024&amp;ssl=1 763w" width="820"/>
   </noscript>
  </p>
  <p>
   问题是，虽然可以在 iOS 和 Android 中禁用 P2P 呼叫和相关的 IP 地址泄漏，但安全研究人员 Dhiraj 发现
   <strong>
    官方的 Telegram for Desktop（tdesktop）和
   </strong>
   <a href="https://www.microsoft.com/en-us/p/telegram-messenger/9wzdncrdzhs0#activetab=pivot:overviewtab" rel="nofollow noopener" title="This link will take you away from steemit.com">
    <strong>
     Telegram Messenger for Windows
    </strong>
   </a>
   <strong>
    应用程序无法禁用 P2P 通话
   </strong>
   。
  </p>
  <p>
   这意味着只要用户使用 Telegram 拨打电话，这些用户的IP地址就会泄露。 可以在 Ubuntu 上看到 Telegram for Desktop 控制台中泄露的 IP 地址示例。
  </p>
  <p>
   <img alt="" class="aligncenter size-full wp-image-7970 jetpack-lazy-image" data-lazy-sizes="(max-width: 958px) 100vw, 958px" data-lazy-src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=958%2C546&amp;is-pending-load=1#038;ssl=1" data-lazy-srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?w=958&amp;ssl=1 958w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=300%2C171&amp;ssl=1 300w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=768%2C438&amp;ssl=1 768w" data-recalc-dims="1" height="546" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=958%2C546&amp;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="958"/>
   <noscript>
    <img alt="" class="aligncenter size-full wp-image-7970" data-recalc-dims="1" height="546" sizes="(max-width: 958px) 100vw, 958px" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=958%2C546&amp;ssl=1" srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?w=958&amp;ssl=1 958w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=300%2C171&amp;ssl=1 300w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/3-18.png?resize=768%2C438&amp;ssl=1 768w" width="958"/>
   </noscript>
  </p>
  <p>
   在与 Dhiraj 的对话中，研究人员与 BleepingComputer 分享了一个 PoC 视频，说明了 IP 地址是如何泄露的。
  </p>
  <p>
   Dhiraj 解释道,
  </p>
  <blockquote>
   <p>
    在我的视频 PoC 中可以看到3个IP泄漏：1.Telegram 服务器 IP。2.你自己的 IP。3.最终用户的 IP。
   </p>
  </blockquote>
  <p>
   在向 Telegram 警告有关 Telegram for Desktop 和 Telegram for Windows 缺失该设置后，Dhiraj 获得了 2,000 欧元的奖金，他的报告漏洞被分配了ID号 CVE-2018-17780。
  </p>
  <p>
   此问题已在
   <a href="https://github.com/telegramdesktop/tdesktop/releases/tag/v1.3.17" rel="nofollow noopener" title="This link will take you away from steemit.com">
    1.3.17
   </a>
   测试版和
   <a href="https://github.com/telegramdesktop/tdesktop/releases/tag/v1.4.0" rel="nofollow noopener" title="This link will take you away from steemit.com">
    1.4.0
   </a>
   版本的 Telegram for Desktop 中得到修复，其中有一个设置可以禁用添加到程序中的 P2P 调用。
  </p>
  <p>
   <img alt="" class="aligncenter size-full wp-image-7971 jetpack-lazy-image" data-lazy-sizes="(max-width: 970px) 100vw, 970px" data-lazy-src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=970%2C462&amp;is-pending-load=1#038;ssl=1" data-lazy-srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?w=970&amp;ssl=1 970w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=300%2C143&amp;ssl=1 300w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=768%2C366&amp;ssl=1 768w" data-recalc-dims="1" height="462" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=970%2C462&amp;ssl=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="970"/>
   <noscript>
    <img alt="" class="aligncenter size-full wp-image-7971" data-recalc-dims="1" height="462" sizes="(max-width: 970px) 100vw, 970px" src="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=970%2C462&amp;ssl=1" srcset="https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?w=970&amp;ssl=1 970w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=300%2C143&amp;ssl=1 300w, https://i1.wp.com/www.iyouport.org/wp-content/uploads/2019/08/4-11.png?resize=768%2C366&amp;ssl=1 768w" width="970"/>
   </noscript>
  </p>
  <p>
   为什么 Telegram 一个以安全性和隐私为傲的应用程序，默认情况下会启用 P2P 调用？当 BleepingComputer 向 Dhiraj 询问 Telegram 是否有理由这样做时，他告诉我们“不就此事提供任何评论。”
  </p>
  <p>
   BleepingComputer 已联系 Telegram 征求意见，但尚未收到回复。
  </p>
  <p>
   即便能解决这个问题我们依旧不想推荐 Telegram，该应用程序在两个月前
   <a href="https://steigerlegal.ch/2018/09/11/telegram-datenschutzerklaerung/" rel="nofollow noopener" title="This link will take you away from steemit.com">
    作出的隐私政策变更
   </a>
   允许他们提供用户信息给任何怀疑其用户是“恐怖分子”的政府。如你所知，很多政府当局将他们不喜欢的反对者都称为“恐怖分子”，于是这一政策是潜在的危险因素。
  </p>
  <div id="atatags-1611829871-5f402ef9065d9">
  </div>
  <div class="sharedaddy sd-sharing-enabled">
   <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
    <h3 class="sd-title">
     共享此文章：
    </h3>
    <div class="sd-content">
     <ul>
      <li class="share-twitter">
       <a class="share-twitter sd-button share-icon no-text" data-shared="sharing-twitter-7967" href="https://www.iyouport.org/%e9%bb%98%e8%ae%a4%e8%ae%be%e7%bd%ae%e4%b8%8b%e7%9a%84-telegram-%e6%8b%a8%e6%89%93%e7%94%b5%e8%af%9d%e4%bc%9a%e6%b3%84%e9%9c%b2ip%e5%9c%b0%e5%9d%80/?share=twitter" rel="nofollow noopener noreferrer" target="_blank" title="点击以在 Twitter 上共享">
        <span>
        </span>
        <span class="sharing-screen-reader-text">
         点击以在 Twitter 上共享（在新窗口中打开）
        </span>
       </a>
      </li>
      <li class="share-facebook">
       <a class="share-facebook sd-button share-icon no-text" data-shared="sharing-facebook-7967" href="https://www.iyouport.org/%e9%bb%98%e8%ae%a4%e8%ae%be%e7%bd%ae%e4%b8%8b%e7%9a%84-telegram-%e6%8b%a8%e6%89%93%e7%94%b5%e8%af%9d%e4%bc%9a%e6%b3%84%e9%9c%b2ip%e5%9c%b0%e5%9d%80/?share=facebook" rel="nofollow noopener noreferrer" target="_blank" title="点击以在 Facebook 上共享">
        <span>
        </span>
        <span class="sharing-screen-reader-text">
         点击以在 Facebook 上共享（在新窗口中打开）
        </span>
       </a>
      </li>
      <li class="share-end">
      </li>
     </ul>
    </div>
   </div>
  </div>
  <div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" data-name="like-post-frame-161182987-7967-5f402ef906d3a" data-src="https://widgets.wp.com/likes/#blog_id=161182987&amp;post_id=7967&amp;origin=www.iyouport.org&amp;obj_id=161182987-7967-5f402ef906d3a" id="like-post-wrapper-161182987-7967-5f402ef906d3a">
   <h3 class="sd-title">
    赞过：
   </h3>
   <div class="likes-widget-placeholder post-likes-widget-placeholder" style="height: 55px;">
    <span class="button">
     <span>
      赞
     </span>
    </span>
    <span class="loading">
     正在加载……
    </span>
   </div>
   <span class="sd-text-color">
   </span>
   <a class="sd-link-color">
   </a>
  </div>
  <div class="jp-relatedposts" id="jp-relatedposts">
   <h3 class="jp-relatedposts-headline">
    <em>
     相关
    </em>
   </h3>
  </div>
 </div>
 <div class="entry-footer">
  <ul class="post-tags light-text">
   <li>
    Tagged
   </li>
   <li>
    <a href="https://www.iyouport.org/tag/privacy/" rel="tag">
     privacy
    </a>
   </li>
   <li>
    <a href="https://www.iyouport.org/tag/security/" rel="tag">
     Security
    </a>
   </li>
   <li>
    <a href="https://www.iyouport.org/tag/technology/" rel="tag">
     Technology
    </a>
   </li>
   <li>
    <a href="https://www.iyouport.org/tag/telegram/" rel="tag">
     telegram
    </a>
   </li>
  </ul>
 </div>
 <div class="entry-author-wrapper">
  <div class="site-posted-on">
   <strong>
    Published
   </strong>
   <time class="entry-date published" datetime="2018-02-10T21:55:36+08:00">
    2018年2月10日
   </time>
   <time class="updated" datetime="2019-08-10T22:02:37+08:00">
    2019年8月10日
   </time>
  </div>
 </div>
</article>

