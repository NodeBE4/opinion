<!DOCTYPE html>
<html>
  <head>
  <title>聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？ – 觀點 – 從草根到大師 git.io/JJCxS</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="

      聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？  
  
    
      
    
  
  
已经13天没有发博文了 :( 最近比较忙，列位看官，请多包涵。        ★引子 
  最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。  （注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰）   如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（  中文  ，  洋文  ）。另外，还可以看看俺写的扫盲教程（  在这里  ）。 
       
  俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇：  《  “对抗专制、捍卫自由”的 N 种技术力量  》         ★BTsync 如何实现【节点发现】？ 
  为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。  大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。  BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。  BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招：        ◇Tracker Server（追踪服务器） 
  BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。  那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法：  
   方法1
    客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。  
   方法2
    客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 IP 地址和端口。比如下面这个网址，就是某些版本的 BTsync 用来获取配置文件的网址。  
   https://config.resilio.com/sync.conf
          ◇DHT 网络 
  DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》）。  简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。  当然啦， 
   【这是有前提滴】——你要先连上 DHT 网络的某个节点
   。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人）  怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。  如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。        ◇Predefined Hosts（预定义主机） 
  所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。  这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊）        ◇这几种方式的优缺点对比 
  
   Tracker Server（追踪服务器）
    这个机制最傻瓜化，完全无需用户干预。  但是这个机制也是【最容易被封杀】的。   
   DHT 网络
    在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络）  但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。  一旦实现了 bootstrap，DHT 很难被封杀。   
   Predefined Hosts（预定义主机）
    这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。  其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及）         ★GFW 如何封杀 BTsync？ 
  看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。  要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》。   刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。  说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。  那么，咋办捏？         ★为啥 GFW 难以封杀 DHT 网络？ 
  综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。  相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点：        ◇难点1 
  因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。        ◇难点2 
  从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。  但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。  所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点）        ◇难点3 
  在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。        ◇补充说明 
  虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。  如果你想对 DHT 有更多了解，请看：  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》         ★如何让你的 BTsync 客户端使用 DHT 网络？ 
       ◇首先，要选择【正确的】客户端版本？ 
  刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是：      
1.3.x（同步目录数无限制，但【不】支持“选择性同步”）  1.4.x（同步目录数无限制，但【不】支持“选择性同步”）  2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）  2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）    
 如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。  除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q &amp; A】章节，破解时间限制。  （本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本）   根据某些读者反馈： 
   1.4.x 版本尚未被彻底封杀，可以【直接使用】
   （提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。  虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。        ◇如何加入到 DHT 网络？ 
  前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。   
   步骤1
    由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。  BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化）  对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。  对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。 
   设置完 proxy 要记得重启 BTsync。
            （在界面右上方的工具条，点击最右边那个按钮，打开菜单） 
         （在全局设置中填写代理的“类型、地址、端口”） 
  
   步骤2
    添加一个同步目录的密钥（如何添加同步密钥，请参见  扫盲教程  ），然后设置这个新加目录。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）  
         （要记得勾选【DHT】这项） 
 等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。   
   步骤3
    为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。  
   然后重启 BTsync。
   等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。          （去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项） 
  
   步骤4
    到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。  对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启；  对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。        ◇如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？ 
  BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。  但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。        ◇如何避免客户端脱离组织？ 
  刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招：   
   招数1：经常运行/始终运行
    如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录）  在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。   
   招数2：用“预定义主机”的方式添加固定节点
    要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。  假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） 
         （勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”） 
  完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。  有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。  最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。  如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。  再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。         ★常见问题解答（FAQ） 
  在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。        ◇读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？ 
  从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。  俺个人的猜测是（纯属个人猜测）：  BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。  而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。  举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作）        ◇读者提问：BT sync 会暴露公网 IP 吗？ 
  如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。        ◇读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？ 
  BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？        ◇读者提问：用 BT sync 同步翻墙工具会被跨省吗？ 
  维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。  以翻墙来举例：  六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。  对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你； 
   但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。
   所以，俺作为 BT sync 的发布源，一直是采用【 
   基于 TOR 的多重代理
   】来运行 BT sync。        ◇读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？ 
  （先声明：这招是网上看来的，俺【没】尝试过）  在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。  等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。        ◇读者提问：为啥【不用】  Syncthing  来替代 BTsync 作为分布式网盘？ 
  首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。  但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。        ◇读者提问：能否提供 BTsync 的校验码？ 
  先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】）  （俺手头这几个软件包是当年从 BT 官网下载并保存至今）      483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638  Windows/BTSync-1.4.111.exe
f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3  Linux/btsync_i386-1.4.111.tar.gz
6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f  Linux/btsync_x64-1.4.111.tar.gz
758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c  Linux/btsync_glibc23_i386-1.4.111.tar.gz
921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc  Linux/btsync_glibc23_x64-1.4.111.tar.gz
1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4  MacOS/BTSync-1.4.111.dmg
c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f  Android/btsync_android-1.4.65.apk    
        ★结尾 
  今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。  与 GFW 斗争，需要群策群力。（套用我党的一句口号） 
   要让 GFW 陷入到人民战争的汪洋大海！
      
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘  》  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》  《  “对抗专制、捍卫自由”的 N 种技术力量  》  《  提供“博客离线浏览”和“电子书制作脚本”——用 BT Sync【免翻墙】自动同步  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》  《  如何让【不支持】代理的网络软件，通过代理进行联网（不同平台的 N 种方法）  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    <meta property="og:description" content="

      聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？  
  
    
      
    
  
  
已经13天没有发博文了 :( 最近比较忙，列位看官，请多包涵。        ★引子 
  最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。  （注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰）   如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（  中文  ，  洋文  ）。另外，还可以看看俺写的扫盲教程（  在这里  ）。 
       
  俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇：  《  “对抗专制、捍卫自由”的 N 种技术力量  》         ★BTsync 如何实现【节点发现】？ 
  为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。  大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。  BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。  BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招：        ◇Tracker Server（追踪服务器） 
  BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。  那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法：  
   方法1
    客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。  
   方法2
    客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 IP 地址和端口。比如下面这个网址，就是某些版本的 BTsync 用来获取配置文件的网址。  
   https://config.resilio.com/sync.conf
          ◇DHT 网络 
  DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》）。  简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。  当然啦， 
   【这是有前提滴】——你要先连上 DHT 网络的某个节点
   。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人）  怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。  如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。        ◇Predefined Hosts（预定义主机） 
  所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。  这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊）        ◇这几种方式的优缺点对比 
  
   Tracker Server（追踪服务器）
    这个机制最傻瓜化，完全无需用户干预。  但是这个机制也是【最容易被封杀】的。   
   DHT 网络
    在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络）  但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。  一旦实现了 bootstrap，DHT 很难被封杀。   
   Predefined Hosts（预定义主机）
    这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。  其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及）         ★GFW 如何封杀 BTsync？ 
  看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。  要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》。   刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。  说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。  那么，咋办捏？         ★为啥 GFW 难以封杀 DHT 网络？ 
  综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。  相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点：        ◇难点1 
  因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。        ◇难点2 
  从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。  但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。  所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点）        ◇难点3 
  在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。        ◇补充说明 
  虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。  如果你想对 DHT 有更多了解，请看：  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》         ★如何让你的 BTsync 客户端使用 DHT 网络？ 
       ◇首先，要选择【正确的】客户端版本？ 
  刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是：      
1.3.x（同步目录数无限制，但【不】支持“选择性同步”）  1.4.x（同步目录数无限制，但【不】支持“选择性同步”）  2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）  2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）    
 如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。  除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q &amp; A】章节，破解时间限制。  （本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本）   根据某些读者反馈： 
   1.4.x 版本尚未被彻底封杀，可以【直接使用】
   （提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。  虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。        ◇如何加入到 DHT 网络？ 
  前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。   
   步骤1
    由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。  BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化）  对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。  对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。 
   设置完 proxy 要记得重启 BTsync。
            （在界面右上方的工具条，点击最右边那个按钮，打开菜单） 
         （在全局设置中填写代理的“类型、地址、端口”） 
  
   步骤2
    添加一个同步目录的密钥（如何添加同步密钥，请参见  扫盲教程  ），然后设置这个新加目录。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）  
         （要记得勾选【DHT】这项） 
 等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。   
   步骤3
    为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。  
   然后重启 BTsync。
   等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。          （去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项） 
  
   步骤4
    到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。  对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启；  对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。        ◇如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？ 
  BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。  但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。        ◇如何避免客户端脱离组织？ 
  刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招：   
   招数1：经常运行/始终运行
    如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录）  在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。   
   招数2：用“预定义主机”的方式添加固定节点
    要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。  假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） 
         （勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”） 
  完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。  有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。  最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。  如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。  再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。         ★常见问题解答（FAQ） 
  在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。        ◇读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？ 
  从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。  俺个人的猜测是（纯属个人猜测）：  BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。  而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。  举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作）        ◇读者提问：BT sync 会暴露公网 IP 吗？ 
  如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。        ◇读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？ 
  BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？        ◇读者提问：用 BT sync 同步翻墙工具会被跨省吗？ 
  维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。  以翻墙来举例：  六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。  对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你； 
   但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。
   所以，俺作为 BT sync 的发布源，一直是采用【 
   基于 TOR 的多重代理
   】来运行 BT sync。        ◇读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？ 
  （先声明：这招是网上看来的，俺【没】尝试过）  在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。  等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。        ◇读者提问：为啥【不用】  Syncthing  来替代 BTsync 作为分布式网盘？ 
  首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。  但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。        ◇读者提问：能否提供 BTsync 的校验码？ 
  先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】）  （俺手头这几个软件包是当年从 BT 官网下载并保存至今）      483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638  Windows/BTSync-1.4.111.exe
f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3  Linux/btsync_i386-1.4.111.tar.gz
6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f  Linux/btsync_x64-1.4.111.tar.gz
758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c  Linux/btsync_glibc23_i386-1.4.111.tar.gz
921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc  Linux/btsync_glibc23_x64-1.4.111.tar.gz
1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4  MacOS/BTSync-1.4.111.dmg
c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f  Android/btsync_android-1.4.65.apk    
        ★结尾 
  今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。  与 GFW 斗争，需要群策群力。（套用我党的一句口号） 
   要让 GFW 陷入到人民战争的汪洋大海！
      
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘  》  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》  《  “对抗专制、捍卫自由”的 N 种技术力量  》  《  提供“博客离线浏览”和“电子书制作脚本”——用 BT Sync【免翻墙】自动同步  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》  《  如何让【不支持】代理的网络软件，通过代理进行联网（不同平台的 N 种方法）  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html 
    
    
  
  
    
         
    
    
    
 
    
  

" />
    
    <meta name="author" content="觀點" />

    
    <meta property="og:title" content="聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？" />
    <meta property="twitter:title" content="聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？" />
    

  <link rel="stylesheet" type="text/css" href="/opinion/style.css" />
  <link rel="alternate" type="application/rss+xml" title="觀點 - 從草根到大師 git.io/JJCxS" href="/opinion/feed.xml" />

  <!-- Social Share Kit CSS -->
  <link rel="stylesheet" href="/opinion/assets/css/social-share-kit.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="/opinion/assets/css/bootstrap.min.css" type="text/css">
  <script type="text/javascript" src="/opinion/assets/js/jquery-3.5.1.js"></script>
  <script type="text/javascript" src="/opinion/assets/js/page.js"></script>

</head>

  <body>
    <div class="wrapper-masthead">
  <div class="container">
    <header class="masthead clearfix">
      

      <div class="site-info">
        <h1 class="site-name" style="display: inline-block;"><a href="/opinion/">觀點</a></h1>
        <i class="site-description" style="font-size: 12px;">從草根到大師 git.io/JJCxS</i>
      </div>

      <nav>
        <span id="search-container" >
          <a href="/opinion/tools"><i class="fa fa-bookmark twitter" title="百宝箱"></i></a>
        <a><i class="fa fa-search" title="限前100結果"></i></a><input type="text" id="search-input" placeholder="標題 作者 來源 日期 (17499)"
          style="margin: 10px 0px 0px 0px; height: 30px;width: auto" title="本站最正確的打開方式">
        </span>
        
        
        <a href="/opinion/categories" style="color: Tomato;"><i class="fa fa-tags" title="分类"></i></a>
        
        
        
        <a href="https://be4.herokuapp.com/" style="color: #003366;"><i class="fa fa-comments" title="论坛"></i></a>
        
        
        
        <a href="/opinion/about"><i class="fa fa-info-circle" title="关于"></i></a>
        
        
        <a title="电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇，del同来源旧一篇" onclick="toggle_visibility('help')"><i class="fa fa-question-circle"></i></a>
        <a id="fa-home" href="https://nodebe4.github.io" title="BE4服务列表" onclick="//toggle_visibility('site-list')"><i class="fa fa-home" aria-hidden="true"></i></a>
      </nav>

    </header>
    <div id="site-list" class="tags" style="display: block;text-align: right;border-bottom: 1px solid lightGray;"><noscript><span style="background-color: #e8e8e8;color: #d10000;font-size: 14px;">开启浏览器JavaScript以获取搜索功能和更好的浏览体验</span></noscript></div>
    <p id="help" style="font-size: 14px;display: none;text-align: right;"><span style="color:green;">电脑热键：&larr;上一篇(页), &rarr;下一篇(页), ins同来源新一篇, del同来源旧一篇</span>; <span style="color:orange">对应触屏FAB：上下右左</span>; 轉Markdown<a href="https://euangoddard.github.io/clipboard2markdown/"><i class="fa fa-file-text-o"></i></a></p>
  </div>
</div>

<script type="text/javascript" >
  function toggle_visibility(id){
    var help = document.getElementById(id)
    if (help.style.display=='none'){
      help.style.display='block';
    }else{
      help.style.display='none';
    }
  }

  const url = "https://nodebe4.github.io/sitelist.json"

  document.addEventListener("DOMContentLoaded", function(event){
    // var homebtn = document.getElementById("fa-home")
    // homebtn.removeAttribute("href")
    var content = document.getElementById("site-list");
    content.innerHTML = ''
    var ul = document.createElement("ul")
    ul.classList.add("label")
    content.appendChild(ul)
    var cnt = 0

    $.getJSON(url, function(allsites) {

      allsites.map(item =>{
        var li = document.createElement('li')
        li.classList.add("tag")
        li.id = 'site-' + cnt
        ul.appendChild(li)
        var a0 = document.createElement('a')
        li.appendChild(a0)
        a0.href = item.url[0]
        var span = document.createElement('span')
        a0.appendChild(span)
        span.innerText = item['name']
        // span.style.backgroundColor = item['background-color']
        // span.style.color='#E4CBC3'
        span.style.color = item['background-color']
        span.style['font-size'] = '14px'
        cnt += 1
        // test_alive(li.id, a0.href)
      })
    })
  })

function test_alive(id, url){
  var divstatus = document.getElementById(id)
  const base = 'https://textance.herokuapp.com/title/'
  var fullurl = base + url
  $.ajax({
      url: fullurl,
      complete: function(data) {
        if (data.responseText.includes('502')){
          // divstatus.style.color='#FBB7B7'
          // divstatus.style.color='gray'
          // divstatus.title = "服务器无响应"
          divstatus.parentNode.removeChild(divstatus)
        }else{
          // divstatus.style.color='#B6FAC8'
          divstatus.title = data.responseText
        }
      }
  });
  return divstatus
}
</script>



    <!-- Left & centered positioning -->

<div class="ssk-sticky ssk-right ssk-center ssk-sticky-hide-xs ssk-group ssk-round">
  
    <a href="https://be4news.pythonanywhere.com/archivenow/ia/https%3A%2F%2Fprogram-think.blogspot.com%2F2017%2F08%2FGFW-Resilio-Sync.html" class="ssk ssk-link" title="存到互联网档案馆" target="_blank"></a>
    <a href="https://www.facebook.com/sharer.php?u=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html" class="ssk ssk-facebook"></a>
    <a href="https://twitter.com/intent/tweet?url=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html&text=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？&hashtags=觀點" class="ssk ssk-twitter"></a>
    <a href="https://reddit.com/submit?url=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html&title=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？" class="ssk ssk-reddit"></a>
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html&title=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？" class="ssk ssk-linkedin"></a>
    <a href="mailto:{email_address}?subject=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？&body=

      聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？  
  
    
      
    
  
  
已经13天没有发博文了 :( 最近比较忙，列位看官，请多包涵。        ★引子 
  最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。  （注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰）   如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（  中文  ，  洋文  ）。另外，还可以看看俺写的扫盲教程（  在这里  ）。 
       
  俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇：  《  “对抗专制、捍卫自由”的 N 种技术力量  》         ★BTsync 如何实现【节点发现】？ 
  为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。  大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。  BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。  BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招：        ◇Tracker Server（追踪服务器） 
  BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。  那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法：  
   方法1
    客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。  
   方法2
    客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 IP 地址和端口。比如下面这个网址，就是某些版本的 BTsync 用来获取配置文件的网址。  
   https://config.resilio.com/sync.conf
          ◇DHT 网络 
  DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》）。  简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。  当然啦， 
   【这是有前提滴】——你要先连上 DHT 网络的某个节点
   。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人）  怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。  如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。        ◇Predefined Hosts（预定义主机） 
  所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。  这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊）        ◇这几种方式的优缺点对比 
  
   Tracker Server（追踪服务器）
    这个机制最傻瓜化，完全无需用户干预。  但是这个机制也是【最容易被封杀】的。   
   DHT 网络
    在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络）  但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。  一旦实现了 bootstrap，DHT 很难被封杀。   
   Predefined Hosts（预定义主机）
    这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。  其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及）         ★GFW 如何封杀 BTsync？ 
  看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。  要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》。   刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。  说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。  那么，咋办捏？         ★为啥 GFW 难以封杀 DHT 网络？ 
  综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。  相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点：        ◇难点1 
  因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。        ◇难点2 
  从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。  但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。  所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点）        ◇难点3 
  在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。        ◇补充说明 
  虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。  如果你想对 DHT 有更多了解，请看：  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》         ★如何让你的 BTsync 客户端使用 DHT 网络？ 
       ◇首先，要选择【正确的】客户端版本？ 
  刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是：      
1.3.x（同步目录数无限制，但【不】支持“选择性同步”）  1.4.x（同步目录数无限制，但【不】支持“选择性同步”）  2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）  2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）    
 如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。  除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q &amp; A】章节，破解时间限制。  （本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本）   根据某些读者反馈： 
   1.4.x 版本尚未被彻底封杀，可以【直接使用】
   （提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。  虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。        ◇如何加入到 DHT 网络？ 
  前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。   
   步骤1
    由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。  BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化）  对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。  对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。 
   设置完 proxy 要记得重启 BTsync。
            （在界面右上方的工具条，点击最右边那个按钮，打开菜单） 
         （在全局设置中填写代理的“类型、地址、端口”） 
  
   步骤2
    添加一个同步目录的密钥（如何添加同步密钥，请参见  扫盲教程  ），然后设置这个新加目录。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）  
         （要记得勾选【DHT】这项） 
 等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。   
   步骤3
    为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。  
   然后重启 BTsync。
   等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。          （去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项） 
  
   步骤4
    到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。  对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启；  对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。        ◇如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？ 
  BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。  但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。        ◇如何避免客户端脱离组织？ 
  刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招：   
   招数1：经常运行/始终运行
    如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录）  在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。   
   招数2：用“预定义主机”的方式添加固定节点
    要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。  假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） 
         （勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”） 
  完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。  有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。  最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。  如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。  再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。         ★常见问题解答（FAQ） 
  在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。        ◇读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？ 
  从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。  俺个人的猜测是（纯属个人猜测）：  BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。  而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。  举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作）        ◇读者提问：BT sync 会暴露公网 IP 吗？ 
  如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。        ◇读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？ 
  BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？        ◇读者提问：用 BT sync 同步翻墙工具会被跨省吗？ 
  维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。  以翻墙来举例：  六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。  对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你； 
   但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。
   所以，俺作为 BT sync 的发布源，一直是采用【 
   基于 TOR 的多重代理
   】来运行 BT sync。        ◇读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？ 
  （先声明：这招是网上看来的，俺【没】尝试过）  在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。  等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。        ◇读者提问：为啥【不用】  Syncthing  来替代 BTsync 作为分布式网盘？ 
  首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。  但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。        ◇读者提问：能否提供 BTsync 的校验码？ 
  先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】）  （俺手头这几个软件包是当年从 BT 官网下载并保存至今）      483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638  Windows/BTSync-1.4.111.exe
f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3  Linux/btsync_i386-1.4.111.tar.gz
6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f  Linux/btsync_x64-1.4.111.tar.gz
758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c  Linux/btsync_glibc23_i386-1.4.111.tar.gz
921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc  Linux/btsync_glibc23_x64-1.4.111.tar.gz
1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4  MacOS/BTSync-1.4.111.dmg
c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f  Android/btsync_android-1.4.65.apk    
        ★结尾 
  今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。  与 GFW 斗争，需要群策群力。（套用我党的一句口号） 
   要让 GFW 陷入到人民战争的汪洋大海！
      
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘  》  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》  《  “对抗专制、捍卫自由”的 N 种技术力量  》  《  提供“博客离线浏览”和“电子书制作脚本”——用 BT Sync【免翻墙】自动同步  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》  《  如何让【不支持】代理的网络软件，通过代理进行联网（不同平台的 N 种方法）  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html 
    
    
  
  
    
         
    
    
    
 
    
  

" class="ssk ssk-email"></a>
    <a href="http://pinterest.com/pin/create/link/?url=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html" class="ssk ssk-pinterest"></a>
    <a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html&title=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？&caption=

      聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？  
  
    
      
    
  
  
已经13天没有发博文了 :( 最近比较忙，列位看官，请多包涵。        ★引子 
  最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。  （注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰）   如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（  中文  ，  洋文  ）。另外，还可以看看俺写的扫盲教程（  在这里  ）。 
       
  俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇：  《  “对抗专制、捍卫自由”的 N 种技术力量  》         ★BTsync 如何实现【节点发现】？ 
  为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。  大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。  BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。  BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招：        ◇Tracker Server（追踪服务器） 
  BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。  那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法：  
   方法1
    客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。  
   方法2
    客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 IP 地址和端口。比如下面这个网址，就是某些版本的 BTsync 用来获取配置文件的网址。  
   https://config.resilio.com/sync.conf
          ◇DHT 网络 
  DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》）。  简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。  当然啦， 
   【这是有前提滴】——你要先连上 DHT 网络的某个节点
   。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人）  怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。  如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。        ◇Predefined Hosts（预定义主机） 
  所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。  这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊）        ◇这几种方式的优缺点对比 
  
   Tracker Server（追踪服务器）
    这个机制最傻瓜化，完全无需用户干预。  但是这个机制也是【最容易被封杀】的。   
   DHT 网络
    在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络）  但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。  一旦实现了 bootstrap，DHT 很难被封杀。   
   Predefined Hosts（预定义主机）
    这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。  其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及）         ★GFW 如何封杀 BTsync？ 
  看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。  要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》。   刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。  说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。  那么，咋办捏？         ★为啥 GFW 难以封杀 DHT 网络？ 
  综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。  相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点：        ◇难点1 
  因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。        ◇难点2 
  从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。  但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。  所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点）        ◇难点3 
  在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。        ◇补充说明 
  虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。  如果你想对 DHT 有更多了解，请看：  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》         ★如何让你的 BTsync 客户端使用 DHT 网络？ 
       ◇首先，要选择【正确的】客户端版本？ 
  刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是：      
1.3.x（同步目录数无限制，但【不】支持“选择性同步”）  1.4.x（同步目录数无限制，但【不】支持“选择性同步”）  2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）  2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）    
 如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。  除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q &amp; A】章节，破解时间限制。  （本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本）   根据某些读者反馈： 
   1.4.x 版本尚未被彻底封杀，可以【直接使用】
   （提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。  虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。        ◇如何加入到 DHT 网络？ 
  前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。   
   步骤1
    由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。  BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化）  对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。  对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。 
   设置完 proxy 要记得重启 BTsync。
            （在界面右上方的工具条，点击最右边那个按钮，打开菜单） 
         （在全局设置中填写代理的“类型、地址、端口”） 
  
   步骤2
    添加一个同步目录的密钥（如何添加同步密钥，请参见  扫盲教程  ），然后设置这个新加目录。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”）  
         （要记得勾选【DHT】这项） 
 等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。   
   步骤3
    为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。  
   然后重启 BTsync。
   等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。          （去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项） 
  
   步骤4
    到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。  对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启；  对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。        ◇如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？ 
  BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。  但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。        ◇如何避免客户端脱离组织？ 
  刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招：   
   招数1：经常运行/始终运行
    如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录）  在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。   
   招数2：用“预定义主机”的方式添加固定节点
    要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。  假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。          （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） 
         （勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”） 
  完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。  有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。  最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。  如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。  再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。         ★常见问题解答（FAQ） 
  在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。        ◇读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？ 
  从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。  俺个人的猜测是（纯属个人猜测）：  BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。  而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。  举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作）        ◇读者提问：BT sync 会暴露公网 IP 吗？ 
  如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。        ◇读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？ 
  BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？        ◇读者提问：用 BT sync 同步翻墙工具会被跨省吗？ 
  维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。  以翻墙来举例：  六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。  对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你； 
   但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。
   所以，俺作为 BT sync 的发布源，一直是采用【 
   基于 TOR 的多重代理
   】来运行 BT sync。        ◇读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？ 
  （先声明：这招是网上看来的，俺【没】尝试过）  在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。  等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。        ◇读者提问：为啥【不用】  Syncthing  来替代 BTsync 作为分布式网盘？ 
  首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。  但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。        ◇读者提问：能否提供 BTsync 的校验码？ 
  先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】）  （俺手头这几个软件包是当年从 BT 官网下载并保存至今）      483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638  Windows/BTSync-1.4.111.exe
f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3  Linux/btsync_i386-1.4.111.tar.gz
6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f  Linux/btsync_x64-1.4.111.tar.gz
758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c  Linux/btsync_glibc23_i386-1.4.111.tar.gz
921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc  Linux/btsync_glibc23_x64-1.4.111.tar.gz
1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4  MacOS/BTSync-1.4.111.dmg
c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f  Android/btsync_android-1.4.65.apk    
        ★结尾 
  今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。  与 GFW 斗争，需要群策群力。（套用我党的一句口号） 
   要让 GFW 陷入到人民战争的汪洋大海！
      
   俺博客上，和本文相关的帖子（需翻墙）
   ：  《  扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘  》  《  聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例  》  《  “对抗专制、捍卫自由”的 N 种技术力量  》  《  提供“博客离线浏览”和“电子书制作脚本”——用 BT Sync【免翻墙】自动同步  》  《  扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染”  》  《  多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法  》  《  如何让【不支持】代理的网络软件，通过代理进行联网（不同平台的 N 种方法）  》     

    版权声明
     本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者  编程随想  和本文原始地址：   https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html 
    
    
  
  
    
         
    
    
    
 
    
  

&tags=觀點" class="ssk ssk-tumblr"></a>
    <a href="https://buffer.com/add?text=聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？&url=https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html" class="ssk ssk-buffer"></a>
</div>


    <div id="main" role="main" class="container">
      
  <!-- Html Elements for Search -->
  <ul id="results-container" class="searched" style="color: #2980B9;"></ul>

  <script src="/opinion/assets/js/simple-jekyll-search.min.js"></script>

  <!-- Configuration -->
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/opinion/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a><time>{date}</time><a class="tag">{category}</a></li>',
    noResultsText: '没找到',
    limit: 100,
    fuzzy: false,
    exclude: ['Welcome']
  })

  </script>

      







  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    


  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
  
  

  
    



<article class="post">
  <h1>聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？</h1>
  <!-- Look the author details up from the site config. -->
  

  <div>
    <span class="date">
      2017-08-30
    </span>

    <!-- Output author details if some exist. -->
    
      
    


    <ul class="tag">
      <li>
        <a href="https://nodebe4.github.io/opinion/categories/#编程随想">
          编程随想
        </a>
      </li>
    </ul>

    
        <span>
            <!-- Personal Info. -->
            <a href="https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html" style="font-size:14px;">原文</a>
        </span>
    

    <span style="float: right;" title="编程随想的其它文章">
      <a style="font-size: 14px;" rel="nofollow" href="#sametag" class="tags">#编程随想 的其它文章</a>
    </span>

  </div>

  <div class="entry">
    
    
    
    <div class="post hentry uncustomized-post-template">
<a name="939363630793388292">
 </a>   <h1 class="post-title entry-title" id="gfw--resilio-syncbtsync--"> <a href="https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html"> 聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？ </a> </h1>
  <div class="post-header">
    <div class="post-header-line-1">
      <div class="post-inner-index"></div>
    </div>
  </div>
  <div class="post-body entry-content">
已经13天没有发博文了 :( 最近比较忙，列位看官，请多包涵。 <br /> <br />     <h2 id="section"> ★引子 </h2>
 <br /> 最近一个多月，有好些读者抱怨 Resilio Sync（原名叫做“BitTorrent Sync”，简称“BTsync”）无法正常使用。所以俺一直打算写一篇来谈谈这个事情。顺便也分享一下：如何继续【免翻墙】使用 Resilio Sync。 <br /> （注：为了打字省力，本文以下部分使用“BTsync”来表示“Resilio Sync”。请原谅俺的懒惰） <br /> <br /> 如果你从来没有听说过 BTsync 这个玩意儿，建议先看看维基百科（ <a href="https://zh.wikipedia.org/wiki/Resilio_Sync" rel="nofollow" target="_blank"> 中文 </a> ， <a href="https://en.wikipedia.org/wiki/Resilio_Sync" rel="nofollow" target="_blank"> 洋文 </a> ）。另外，还可以看看俺写的扫盲教程（ <a href="https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html"> 在这里 </a> ）。 <a name="more">
  </a>     <!--program-think-->
 <br /> 俺之所以大力普及该软件，关键在于：任何人都能用它来搭建一个【分布式】的网盘。关于【分布式】的重要性，俺已经唠叨过很多次了。对这个话题感兴趣的同学可以看下面这篇： <br /> 《 <a href="https://program-think.blogspot.com/2015/08/Technology-and-Freedom.html"> “对抗专制、捍卫自由”的 N 种技术力量 </a> 》 <br /> <br /> <br />     <h2 id="btsync--"> ★BTsync 如何实现【节点发现】？ </h2>
 <br /> 为了聊今天的话题，需要先介绍一点点基础知识——BTsync 的“节点发现”机制。 <br /> 大伙儿应该都知道：BT Sync 是一款点对点（P2P）的工具，用来进行文件共享和文件同步。对于任何一款 P2P 软件，其关键的机制是【节点发现】（洋文叫做“peer discovery”）。 <br /> BTsync 有两种完全不同的使用场景，分别是：局域网 和 公网。今天这篇只讨论 BTsync 在【公网】的使用。 <br /> BTsync 要想在【公网】上找到其它节点（peer），大致通过如下几招： <br /> <br />     <h3 id="tracker-server-"> ◇Tracker Server（追踪服务器） </h3>
 <br /> BT 下载的老用户应该听说过 Tracker 这个概念。打个比方，Tracker Server 类似于节点（peer）之间的中介，互不认识的节点通过 Tracker Server 来获得对方的信息（IP 和端口）。 <br /> 那么，BTsync 的客户端是如何知道 Tracker Server 的 IP 地址捏？通常有两种方法： <br /> <b>
   方法1
  </b> <br /> 客户端软件本身已经内置了若干个 Tracker Server 的 IP 地址和端口。 <br /> <b>
   方法2
  </b> <br /> 客户端软件先连上 BTsync 公司官方的某个网站（通过域名的方式），然后得到某个配置文件，这个配置文件中会包含 Tracker Server 的 IP 地址和端口。比如下面这个网址，就是某些版本的 BTsync 用来获取配置文件的网址。 <br /> <code class="language-plaintext highlighter-rouge">
   https://config.resilio.com/sync.conf
  </code> <br /> <br />     <h3 id="dht--"> ◇DHT 网络 </h3>
 <br /> DHT 是个啥玩意儿捏？这个说来话长，今天就不展开细谈了（此文发出后不久，俺又写了一篇 DHT 的扫盲：《 <a href="https://program-think.blogspot.com/2017/09/Introduction-DHT-Kademlia-Chord.html"> 聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例 </a> 》）。 <br /> 简而言之，你可以通俗的理解为：DHT 是用来弥补 Tracker Server 的局限性的。有了 DHT 这个机制，【不】需要依赖 Tracker Server 也可以做到【节点发现】。 <br /> 当然啦， <b>
   【这是有前提滴】——你要先连上 DHT 网络的某个节点
  </b> 。然后就可以通过你的第一个接入节点，逐步找到 DHT 网络中的其它节点，并且还能找到你想要获取的数据位于哪些节点。（这就好比你要想加入某个封闭的社团，先要得到社团中的某个人作为你的引荐人） <br /> 怎样找到 DHT 网络中的某个节点并与之建立连接，用技术行话称之为“bootstrap”。显然，bootstrap 是 DHT 的关键。 <br /> 如果 BTsync 客户端支持 DHT 并启用了 DHT，客户端通常是先连接到 Tracker Server，然后就可以通过 Tracker Server 获得某个 DHT 网络的节点，于是就实现了 DHT 的 bootstrap。 <br /> <br />     <h3 id="predefined-hosts-"> ◇Predefined Hosts（预定义主机） </h3>
 <br /> 所谓的“预定义主机”，说白了就是：用户自己在 BTsync 客户端的配置界面输入其它节点的 IP 和端口。 <br /> 这个功能用得不多，但在某些情况下很有用。比如前面提到 DHT 的 bootstrap。在某些特殊环境中（比如墙内），你可以通过“预定义主机”这个功能添加某个 DHT 网络中的节点，然后你的 BTsync 客户端就可以实现 bootstrap 并加入到 DHT 中（关于这点，待会儿俺还会细聊） <br /> <br />     <h3 id="section-1"> ◇这几种方式的优缺点对比 </h3>
 <br /> <b>
   Tracker Server（追踪服务器）
  </b> <br /> 这个机制最傻瓜化，完全无需用户干预。 <br /> 但是这个机制也是【最容易被封杀】的。 <br /> <br /> <b>
   DHT 网络
  </b> <br /> 在没有“墙”的网络环境中，这个机制同样也是很傻瓜化的（客户端会自动通过 Tracker 找到 DHT 网络） <br /> 但如果是在【墙内】，Tracker 已经被屏蔽，需要手动实现 DHT 的 bootstrap（具体如何做，待会儿俺细聊）。 <br /> 一旦实现了 bootstrap，DHT 很难被封杀。 <br /> <br /> <b>
   Predefined Hosts（预定义主机）
  </b> <br /> 这个机制的操作门槛最高。被 GFW 封锁的难度与 DHT 相当。 <br /> 其门槛在于——你需要找到【IP 地址固定不变】的 BTsync 节点（至于如何找到这种节点，在本文后续部分会提及） <br /> <br /> <br />     <h2 id="gfw--btsync-"> ★GFW 如何封杀 BTsync？ </h2>
 <br /> 看完上面的介绍，聪明的同学已经猜到 GFW 是如何封杀 BTsync 的。其实很简单，只要封锁 Tracker Server（追踪服务器）就可以让绝大部分客户端失效。因为绝大部分客户端都需要依赖 Tracker Server 来实现“节点发现”。 <br /> 要封锁 Tracker Server，GFW 可以有两种方法：其一是“域名污染”，其二是“IP 黑名单”。（关于“域名污染”这个概念，可以参见俺之前的扫盲教程——《 <a href="https://program-think.blogspot.com/2014/01/dns.html"> 扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染” </a> 》。 <br /> <br /> 刚开始的时候，GFW 采用“域名污染”的方式。所以网上也相应出现了一些文章，介绍若干招数，用来对抗域名污染，以便继续使用 BTsync。这些招数，无非就是：“修改 hosts 文件” 或 “加密 DNS 传输”。 <br /> 说到这儿，俺要稍微泼点冷水。不论你是“修改 hosts”还是“用 dnscrypt 加密域名解析的传输”，都只能用来对付“域名污染”，但却【无法】对付“IP 黑名单”。由于 BTsync 官方提供的 Tracker Server，数量很有限（通常只有4个，2个是 IPv4，2个是 IPv6），而且这4个服务器的 IP 地址相对固定（不会经常变）。所以 GFW【很容易】就可以封掉这几个 IP 地址（简直可以说是“易如反掌”）。 <br /> 那么，咋办捏？ <br /> <br /> <br />     <h2 id="gfw--dht--"> ★为啥 GFW 难以封杀 DHT 网络？ </h2>
 <br /> 综上所述，要想让 BTsync 可以【免翻墙】使用，就不要再指望 Tracker Server 这种“节点发现”的机制了。因为这种机制太容易被封杀。 <br /> 相比之下，GFW 要想封杀 DHT 就会困难得多（不是不可能，而是难度急剧增大）。为啥捏？主要有如下几个难点： <br /> <br />     <h3 id="section-2"> ◇难点1 </h3>
 <br /> 因为 BTsync 的 DHT 网络中会有很多节点，而且这些节点是【动态变化】的——每时每刻都有老的节点下线并且有新的节点上线。要想通过“IP 黑名单”的手段来屏蔽 DHT 网络中的所有节点，（对 GFW 维护人员来说）工作量会变得很大。 <br /> <br />     <h3 id="section-3"> ◇难点2 </h3>
 <br /> 从技术上讲，GFW 的开发团队也可以做一些伪装成 BTsync 客户端的 agent，用这些 agent 来探测由 BTsync 客户端所构成的 DHT 网络中的节点信息。 <br /> 但是，每个 DHT 节点并【不能】得到 DHT 网络中【所有节点】的信息，而只能得到其中一个很小的子集（只占整体的一小部分）。 <br /> 所以，如果要用这招，GFW 开发团队需要构造足够多的 agent。（即便这样，这招也【无法解决】下面的第三个难点） <br /> <br />     <h3 id="section-4"> ◇难点3 </h3>
 <br /> 在 BTsync 的 DHT 网络中，有些节点位于【墙内】。GFW 对这些墙内节点是【无可奈何】的。因为 GFW 部属的位置在天朝公网的【国际出口】。通俗地说，GFW 只能屏蔽流经国际出口的流量。如果有两个节点【都在墙内】，那么这两个节点之间的流量是不会被 GFW 检测到的，GFW 也无法屏蔽这种【墙内流量】。 <br /> <br />     <h3 id="section-5"> ◇补充说明 </h3>
 <br /> 虽然这个章节讲的是：BTsync 客户端构成的 DHT 网络。但其它形式的 DHT 网络，原理也是类似的，它们也会让 GFW 头疼。 <br /> 如果你想对 DHT 有更多了解，请看： <br /> 《 <a href="https://program-think.blogspot.com/2017/09/Introduction-DHT-Kademlia-Chord.html"> 聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例 </a> 》 <br /> <br /> <br />     <h2 id="btsync--dht--"> ★如何让你的 BTsync 客户端使用 DHT 网络？ </h2>
 <br />     <h3 id="section-6"> ◇首先，要选择【正确的】客户端版本？ </h3>
 <br /> 刚才提到了 DHT 的重要性。对于 BTsync 而言，只有4个大版本支持 DHT，分别是： <br />     <blockquote>
1.3.x（同步目录数无限制，但【不】支持“选择性同步”） <br /> 1.4.x（同步目录数无限制，但【不】支持“选择性同步”） <br /> 2.0.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录） <br /> 2.1.x（免费试用30天，30天之后如果不付费，最多只能同步10个目录）    </blockquote>
 如果你不需要“选择性同步”这个功能，就选 1.4.x 版本。 <br /> 除非你极其需要“选择性同步”这个功能，才去选 2.1.x 版本，然后参考本文后续的【Q &amp; A】章节，破解时间限制。 <br /> （本文后续部分的示意图会用 1.4.111 的界面进行截图，这个版本不仅是 1.4.x 的最后一个版本，也是 1.x.x 的最后一个版本） <br /> <br /> 根据某些读者反馈： <b>
   1.4.x 版本尚未被彻底封杀，可以【直接使用】
  </b> （提醒：在每个同步目录的“偏好设定”选项中，要记得勾选 DHT）。 <br /> 虽然 1.4.x 目前是直接可用，但说不定过了几天就会出问题。所以大伙儿要重点阅读下面这个章节。 <br /> <br />     <h3 id="dht---1"> ◇如何加入到 DHT 网络？ </h3>
 <br /> 前面说了：接入 DHT 网络的关键是——找到 DHT 网络中的某个节点并与之建立连接（行话叫“bootstrap”）。下面要介绍的就是——如何在【墙内】实现 bootstrap。 <br /> <br /> <b>
   步骤1
  </b> <br /> 由于 GFW 封锁了官方的“追踪服务器”，你的客户端第一次运行时多半找不到任何 DHT 的节点。这时候你要先让 BTsync 走翻墙通道。 <br /> BTsync 翻墙可归纳为两种：其一是 VPN，其二是 proxy。（对于技术菜鸟，俺建议用 VPN，比较傻瓜化） <br /> 对于 VPN 方式：你需要在系统中运行 VPN 软件并正常连接到 VPN 服务器，然后在这个系统中运行 BTsync，BTsync 本身【无需】额外设置，就能自动通过 VPN 翻墙了。 <br /> 对于 proxy 方式：你需要进入 BTsync 的“偏好设定”界面，找到 proxy 选项，正确填写。 <b>
   设置完 proxy 要记得重启 BTsync。
  </b> <br /> <br />     <center> <img alt="不见图 请翻墙" src="https://lh5.googleusercontent.com/uEnved4XKtgOAUwcJIxywMsagZAGi0DW6AJG83Ezt7jdr8ril_kNG5q_QAEUQHoU0JOweML8vE6iPD6KMWJ3ZC9ypBc-JyXSzFeHx0Rq2lOsY4mVxSRhR17c12WRjDJflgQFUU5Hmc4" /> <br /> （在界面右上方的工具条，点击最右边那个按钮，打开菜单） </center>
 <br />     <center> <img alt="不见图 请翻墙" src="https://lh4.googleusercontent.com/LvhpHsVnBCs8LxhsmSRWJ_anjXAl29RRXpvortuW-XDBuDrEMcoDykgFSai36UKUj9LNNeooMYmSd52YLm9dYWyzbi19swSzljfba6BU7HLj3iXflnnQ6AUMhF8c9U7w9soyfqoWs14" /> <br /> （在全局设置中填写代理的“类型、地址、端口”） </center>
 <br /> <b>
   步骤2
  </b> <br /> 添加一个同步目录的密钥（如何添加同步密钥，请参见 <a href="https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html"> 扫盲教程 </a> ），然后设置这个新加目录。 <br /> <br />     <center> <img alt="不见图 请翻墙" src="https://lh5.googleusercontent.com/Cl-5bZ_Q7ytzrqUPNJa86fmPsVaHM2gJdPafYtLdRgw2asQgP-5fzLDdeKt2lMLXxvOZUE4fN-BVjl3pfipZRR1t7xmxVMhzgXwXwqAZBlq1dlFnOYqU0l51_ZTwbrVJFfaHI8NQ1hw" /> <br /> （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） <br /> </center>
 <br />     <center> <img alt="不见图 请翻墙" src="https://lh5.googleusercontent.com/7sMs8YW_7w8mvc_ax0MLJDASzpp7JsxCMBtxGJb9P5kvPLvclRTlHFvY1WAsUfevPnTqtYCZB7DF-IvBduYMruUc-hw_SVMApeOYQ2DY9RuxjVQEAlglMv1mCJSDWGBVNsw6DYSz4dA" /> <br /> （要记得勾选【DHT】这项） </center>
 等待一段时间（具体多长，视情况而定）。你要一直等，直到客户端界面上已经显示出若干节点数，并且已经开始进行同步。 <br /> <br /> <b>
   步骤3
  </b> <br /> 为了保险起见，你再次进入【每个同步目录】的“偏好设定”界面，【确保勾选 DHT】，同时把“追踪服务器”和“中继服务器”这2个选项【都去掉】。 <br /> <b>
   然后重启 BTsync。
  </b> 等待它进入正常工作状态（找到其它节点并正常同步）。当它能正常工作，就说明 BTsync 已经基于 DHT 而【不再依赖】Tracker 了。 <br /> <br />     <center> <img alt="不见图 请翻墙" src="https://lh6.googleusercontent.com/-cFGvcnC7zrtdb3gJ2ZF0ACD7jzAIvr2KnLJbGXD2r9TmFIi03iRNL10Rh1a3OdHn0Bcv9pfLVWAtlaQ4GIAQRdoEDUaRNW_rjJcUqfY2FZ2R2ww1Qui97f4_3Oco_LIXOC1WJkWIkQ" /> <br /> （去掉“中继服务器”和“追踪程序服务器”这2项，但要记得保留 DHT 这项） </center>
 <br /> <b>
   步骤4
  </b> <br /> 到了这最后一步，你可以把翻墙通道关掉，测试 BTsync 是否能【免翻墙】正常同步。 <br /> 对于 VPN 翻墙，你只需要关闭/退出 VPN 软件，BTsync 不用重启； <br /> 对于 proxy 翻墙，你需要进入 BTsync【全局】的“偏好设定”界面，去掉所有 proxy 的设置（地址、端口），然后记得要【重启】BTsync（重启后，proxy 设置的改变才会生效）。 <br /> <br />     <h3 id="btsync-dht-"> ◇如果你很久【没有】运行 BTsync，导致再也连不上 DHT，如何复活？ </h3>
 <br /> BTsync 一旦接入了 DHT 网络，会把它得到的 DHT 网络的节点信息（地址、端口）保存在本地的某个文件中。那么当它下次启动的时候，就不用再费劲地去搞 bootstrap 了。 <br /> 但是，假如你已经很长时间（比如超过一周）没有运行 BTsync，这时候本地保存的那些节点信息可能已经过时（请记住：DHT 网络的节点是在动态变化中的）。于是你的 BTsync 客户端又处于“脱离组织”的状态。这时候你需要再次重复前一个小节的那几个步骤，再来一次 bootstrap 操作流程。 <br /> <br />     <h3 id="section-7"> ◇如何避免客户端脱离组织？ </h3>
 <br /> 刚才俺说了：如果你在墙内并且长时间没有运行 BTsync，那么将来再次启动 BTsync 会找不到 DHT 网络（脱离组织）。如何避免这种情况捏？俺简单介绍几招： <br /> <br /> <b>
   招数1：经常运行/始终运行
  </b> <br /> 如果你是在 PC 上运行 BTsync，并且你的 PC 具备互联网的宽带接入。那么你干脆就让这个 BTsync 一直运行（提醒：在 BTsync 客户端上【至少添加一个】同步目录） <br /> 在这种状态下，你这个客户端始终是 DHT 网络这个组织的一份子，它可以持续得到 DHT 网络中节点变化的信息。这样就可以避免脱离组织。 <br /> <br /> <b>
   招数2：用“预定义主机”的方式添加固定节点
  </b> <br /> 要玩招数2，要求比较高，需要一个前提——你知道某个【地址/端口都相对固定】的 DHT 节点。 <br /> 假设你知道了这种节点，那么你就可以进入【每个同步目录】的“偏好设定”界面，把这些 DHT 节点的“地址/端口”填写到“预定义主机”中。 <br /> <br />     <center> <img alt="不见图 请翻墙" src="https://lh5.googleusercontent.com/Cl-5bZ_Q7ytzrqUPNJa86fmPsVaHM2gJdPafYtLdRgw2asQgP-5fzLDdeKt2lMLXxvOZUE4fN-BVjl3pfipZRR1t7xmxVMhzgXwXwqAZBlq1dlFnOYqU0l51_ZTwbrVJFfaHI8NQ1hw" /> <br /> （选中这个同步目录，点最右边那三个点的按钮，打开菜单，然后点“偏好设定”） </center>
 <br />     <center> <img alt="不见图 请翻墙" src="https://lh3.googleusercontent.com/_dk3Rz7R1k3oGI0LqnYFtpyr93P0MHPKAUHAK-BX6hJ14SfJaz99Mqm1Hw34eR69OWi4apfYZqTmbYc8nqq_LGp0nkS9XXyYWscwmqzCfRSnrKJTdJ4XPPE7aOq_JTQPGRqSeBWG07Y" /> <br /> （勾选“使用预定义主机”，然后填写主机的“IP 地址、端口”） </center>
 <br /> 完成上述设置后，客户端在每次运行时都会去找你添加的这几个节点，然后通过这些节点找到 DHT 网络的其它节点。 <br /> 有的同学肯定要问了：这种“固定地址的 BTsync 节点”是怎么来的。 <br /> 最直接的办法是：你自己买一个 VPS，并且这个 VPS 的地址【尚未】被 GFW 封杀。然后你在这个 VPS 上【长时间运行】BTsync，并且这个 BTsync 要记得使用 DHT 网络。那么这个 VPS 上的 BTsync 就会成为 DHT 网络中的一个稳定节点。然后你就可以让自己手机端或 PC 端的 BTsync 首先通过这个 VPS 节点进行 DHT 联网。 <br /> 如果你自己懒得搭建 VPS，也可以通过你朋友或同事搭建的 VPS 来这么干。 <br /> 再不济，你还可以去某些论坛或聊天群里面打听，或许也能了解到这种固定地址的 DHT 节点。 <br /> <br /> <br />     <h2 id="faq-"> ★常见问题解答（FAQ） </h2>
 <br /> 在文本结束前，补充一个问答时间。下面是一些经常被提及的问题。 <br /> <br />     <h3 id="btsyncresilio-sync-dht--"> ◇读者提问：为啥新版本的 BTsync（Resilio Sync）反而没有 DHT 功能？ </h3>
 <br /> 从前面的介绍中可以看出：早期版本是支持 DHT 的，从 2.2.x 开始就去掉了 DHT。 <br /> 俺个人的猜测是（纯属个人猜测）： <br /> BT 公司（BitTorrent, Inc.）是一直想通过 BTsync 来赚钱的。比如说：2.0 和 2.1 版本搞了一个“同步目录数限制”，用户要付费才能取消限制（这种伎俩引发众怒，所以官方被迫在 2.2.x 版本又去掉了限制）。再比如说：BT 公司后来剥离出一家 Resilio 公司单独运营 BTsync，并把 BTsync 重新包装成 Resilio Sync，这些也都是为了商业营销方面的考虑。 <br /> 而去掉 DHT 的关键性在于——没有 DHT，所有的客户端都需要先连接到官方提供的 Tracker Server（追踪服务器）才能工作。这样一来，BT 官方（Resilio 公司）就可以对客户端软件具有【更多的控制力度】。 <br /> 举个例子：从 2.2.x 开始的版本都需要依赖 Tracker Server。对这些版本的客户端，（从技术上讲）BT 公司有办法强迫它们升级版本（不升级就使之无法工作） <br /> <br />     <h3 id="bt-sync--ip--"> ◇读者提问：BT sync 会暴露公网 IP 吗？ </h3>
 <br /> 如果你的 BTsync 客户端【没有】通过代理或 VPN 的方式，而是直接联网，那么与你连接的其它节点【可能会】看到你的公网 IP。 <br /> <br />     <h3 id="isp-btsync--"> ◇读者提问：对于电信运营商（ISP）或者公司网管，能监控到我的 BTsync 流量吗？ </h3>
 <br /> BTsync 传输的数据是【强加密】的。所以，监控网络流量的人（Sniffer）最多只能猜测出你在用 BTsync，但是【无法知道】你正在同步的文件名和文件内容？ <br /> <br />     <h3 id="bt-sync--"> ◇读者提问：用 BT sync 同步翻墙工具会被跨省吗？ </h3>
 <br /> 维稳系统的人力（比如说网警）是有限的，他们的精力也是有限的。所以他们会重点搜捕敏感信息的【发布源头】（比如像俺这种大坏蛋）。对于【获取】敏感信息的普通网民，他们才没空搭理你。 <br /> 以翻墙来举例： <br /> 六扇门（公安、国安）是不会去抓翻墙的网民（太多了，抓不过来，而且法不责众）。相比之下，网警会想办法去定位翻墙工具的作者。 <br /> 对于 BT sync 也类似。如果你通过 BT sync【获取】敏感内容，六扇门才懒得理你； <b>
   但如果你通过 BT sync【发布】敏感内容，就要小心被六扇门的人盯上。
  </b> 所以，俺作为 BT sync 的发布源，一直是采用【 <b>
   基于 TOR 的多重代理
  </b> 】来运行 BT sync。 <br /> <br />     <h3 id="section-8"> ◇读者提问：在【不付费】的情况下，如何去掉 2.1 和 2.2 的限制？ </h3>
 <br /> （先声明：这招是网上看来的，俺【没】尝试过） <br /> 在安装前，先把系统时间调到若干年之后（比如2020年或2030年），然后再安装。 <br /> 等到你用了超过30天，试用期结束了，你把系统事件调回正常的。这时候 BTsync 会以为还在试用期内。 <br /> <br />     <h3 id="syncthing---btsync--"> ◇读者提问：为啥【不用】 <a href="https://en.wikipedia.org/wiki/Syncthing" rel="nofollow" target="_blank"> Syncthing </a> 来替代 BTsync 作为分布式网盘？ </h3>
 <br /> 首先俺承认：Syncthing 作为开源软件，在“开源”这点上明显好于闭源的 BTsync。 <br /> 但是，Syncthing 的问题在于——更适合用于【私有分享】，而【不】适合用于【公有分享】。也就是说，你个人用它在多台设备之间同步，是没啥问题滴；但像俺这样用来搞一个面向成千上万网民的分布式网盘，Syncthing 就显得不合适了。 <br /> <br />     <h3 id="btsync---1"> ◇读者提问：能否提供 BTsync 的校验码？ </h3>
 <br /> 先分享俺手头已有的 1.4.111 版本在各个平台下的软件包的哈希散列值（考虑到 MD5 和 SHA1 已经不够严密，下面使用【SHA256】） <br /> （俺手头这几个软件包是当年从 BT 官网下载并保存至今） <br />     <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>483a8203d11053fe18f89bb4d95aaf97c4d6e4203a546d0f81efe19c5b221638  Windows/BTSync-1.4.111.exe
f3b3095d5b7021157ada032040144e715621585864e979ba53a4697be8918ae3  Linux/btsync_i386-1.4.111.tar.gz
6ea03cd2f60177baca58c701b80e1abf44b7c42fc4ec5b8bcfd3b266876e832f  Linux/btsync_x64-1.4.111.tar.gz
758cb2e3b21a21297a6fc46ca36999b2c7c170939b366e012af62a2ca953179c  Linux/btsync_glibc23_i386-1.4.111.tar.gz
921c47be0f60a3c88e8452a1de5252b2cbf1c8280d57a011f400d3cb9df676cc  Linux/btsync_glibc23_x64-1.4.111.tar.gz
1c7df900e4a64d7f349605b3406c183399fb09a6b96278ae04817e2fcce0acf4  MacOS/BTSync-1.4.111.dmg
c29133157b30ffbfb940a1c24da658779a35ed3e50b69c21b3d911a66434aa6f  Android/btsync_android-1.4.65.apk</code></pre></div>    </div>
 <br /> <br />     <h2 id="section-9"> ★结尾 </h2>
 <br /> 今天先聊到这儿。关于本文介绍的这些，需要大伙儿多反馈，多分享经验。 <br /> 与 GFW 斗争，需要群策群力。（套用我党的一句口号） <b>
   要让 GFW 陷入到人民战争的汪洋大海！
  </b> <br /> <br /> <br /> <b>
   俺博客上，和本文相关的帖子（需翻墙）
  </b> ： <br /> 《 <a href="https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html"> 扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2017/09/Introduction-DHT-Kademlia-Chord.html"> 聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2015/08/Technology-and-Freedom.html"> “对抗专制、捍卫自由”的 N 种技术力量 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2015/03/blog-sync.html"> 提供“博客离线浏览”和“电子书制作脚本”——用 BT Sync【免翻墙】自动同步 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2014/01/dns.html"> 扫盲 DNS 原理，兼谈“域名劫持”和“域名欺骗/域名污染” </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2013/01/cross-host-use-gfw-tool.html"> 多台电脑如何【共享】翻墙通道——兼谈【端口转发】的几种方法 </a> 》 <br /> 《 <a href="https://program-think.blogspot.com/2019/04/Proxy-Tricks.html"> 如何让【不支持】代理的网络软件，通过代理进行联网（不同平台的 N 种方法） </a> 》     <div class="post-copyright">
<b>
    版权声明
   </b> <br /> 本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者 <a href="mailto:program.think@gmail.com"> 编程随想 </a> 和本文原始地址： <br /> <a href="https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html" id="OriginalPostUrl"> https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html </a>
    </div>
    <div style="clear: both;"></div>
  </div>
  <div class="post-footer" style="margin-bottom:50px;">
    <div class="post-footer-line post-footer-line-1" style="display:none;">
<span class="post-author vcard"> </span> <span class="reaction-buttons"> </span> <span class="star-ratings"> </span> <span class="post-icons"> </span> <span class="post-backlinks post-comment-link"> </span>
    </div>
    <div class="post-footer-line post-footer-line-2 post-toolbar"></div>
    <div class="post-footer-line post-footer-line-3">
<span class="post-location"> </span>
    </div>
  </div>
</div>


  </div>

  <hr style="border-top:1px solid #28323C;"/>

<font size=2px>
  文章版权归原作者所有。
</font>

<div style="text-align:center"><img width="1px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站" style="text-align:center"/></div>

  <div id="sametag">
    <h4 style="display: inline-block;">#编程随想 的其它文章</h4>
    <span>--<a href="https://nodebe4.github.io/opinion/2021-05-09/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-%E6%94%BF%E6%B2%BB-IT-%E7%A7%91%E6%99%AE-%E5%8E%86%E5%8F%B2-%E7%AD%89-97%E6%9C%AC/">最新</a>-</span>
    <span>-<a href="https://nodebe4.github.io/opinion/2009-01-15/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%BC%A0%E5%8F%8A%E6%9C%AC%E5%8D%9A%E5%AE%A2%E5%86%85%E5%AE%B9%E7%AE%80%E4%BB%8B/">最早</a>--</span>
    
      <li>
        <time>2017-09-21</time>
        <a href="https://nodebe4.github.io/opinion/2017-09-21/%E8%81%8A%E8%81%8A%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%A3%E5%88%97%E8%A1%A8-DHT-%E7%9A%84%E5%8E%9F%E7%90%86-%E4%BB%A5-Kademlia-Kad-%E5%92%8C-Chord-%E4%B8%BA%E4%BE%8B/">
          聊聊分布式散列表（DHT）的原理——以 Kademlia（Kad） 和 Chord 为例
        </a>
      </li>
    
    
      <li>
        <time>2017-09-11</time>
        <a href="https://nodebe4.github.io/opinion/2017-09-11/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E6%9C%9D%E9%B2%9C%E8%AF%95%E7%88%86%E6%B0%A2%E5%BC%B9-%E5%90%84%E6%96%B9%E7%9A%84%E6%8A%A5%E9%81%93%E5%8F%8A%E8%AF%84%E8%AE%BA/">
          每周转载：朝鲜试爆氢弹（各方的报道及评论）
        </a>
      </li>
    
    
      <li>
        <time>2017-08-17</time>
        <a href="https://nodebe4.github.io/opinion/2017-08-17/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-IT-%E5%86%9B%E4%BA%8B-%E5%8E%86%E5%8F%B2-%E7%AD%89-43%E6%9C%AC/">
          分享各类电子书（IT 、军事、历史 等，43本）
        </a>
      </li>
    
    
      <li>
        <time>2017-08-04</time>
        <a href="https://nodebe4.github.io/opinion/2017-08-04/%E4%B8%BA%E5%95%A5%E4%BF%BA%E5%BE%88%E5%B0%91%E7%9C%8B%E8%A7%86%E9%A2%91-%E5%85%BC%E8%B0%88-%E8%A7%86%E9%A2%91-%E4%B8%8E-%E6%96%87%E6%9C%AC-%E5%9C%A8%E8%AE%A4%E7%9F%A5%E5%BF%83%E7%90%86%E5%AD%A6%E6%96%B9%E9%9D%A2%E7%9A%84%E5%B7%AE%E5%BC%82/">
          为啥俺很少看视频？——兼谈“视频”与“文本”在认知心理学方面的差异
        </a>
      </li>
    
  </div>


  <hr>
  <div class="pagination">
    
      <span class="prev" >
          <a href="https://nodebe4.github.io/opinion/2017-08-30/%E9%BE%99%E5%A6%88%E5%AE%B6%E7%9A%84%E9%BE%99%E5%B0%B1%E6%98%AF%E7%8E%B0%E5%AE%9E%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E6%A0%B8%E6%AD%A6%E5%99%A8/">
            前一篇：龙妈家的龙就是现实世界中的核武器
          </a>
      </span>
    
    
      <span class="next" >
          <a href="https://nodebe4.github.io/opinion/2017-08-31/%E7%BE%8E%E5%9B%BD%E7%90%86%E6%80%A7%E8%A1%B0%E5%BE%AE%E5%8F%B2-%E5%A4%A7%E8%A5%BF%E6%B4%8B%E6%9C%88%E5%88%8A%E8%AF%91%E6%96%87/">
            後一篇：美国理性衰微史｜大西洋月刊译文
          </a>
      </span>
    

    <script>
    /* post pagination keyboard shortcuts */
    document.body.onkeyup = function(e){
      if (e.keyCode == '37') { window.location = 'https://nodebe4.github.io/opinion/2017-08-30/%E9%BE%99%E5%A6%88%E5%AE%B6%E7%9A%84%E9%BE%99%E5%B0%B1%E6%98%AF%E7%8E%B0%E5%AE%9E%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E6%A0%B8%E6%AD%A6%E5%99%A8/'; } // left arrow key
      if (e.keyCode == '39') { window.location = 'https://nodebe4.github.io/opinion/2017-08-31/%E7%BE%8E%E5%9B%BD%E7%90%86%E6%80%A7%E8%A1%B0%E5%BE%AE%E5%8F%B2-%E5%A4%A7%E8%A5%BF%E6%B4%8B%E6%9C%88%E5%88%8A%E8%AF%91%E6%96%87/'; } // right arrow key
      if (e.keyCode == '45') { window.location = 'https://nodebe4.github.io/opinion/2017-09-11/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E6%9C%9D%E9%B2%9C%E8%AF%95%E7%88%86%E6%B0%A2%E5%BC%B9-%E5%90%84%E6%96%B9%E7%9A%84%E6%8A%A5%E9%81%93%E5%8F%8A%E8%AF%84%E8%AE%BA/'; } // insert key
      if (e.keyCode == '46') { window.location = 'https://nodebe4.github.io/opinion/2017-08-17/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-IT-%E5%86%9B%E4%BA%8B-%E5%8E%86%E5%8F%B2-%E7%AD%89-43%E6%9C%AC/'; } // delete key
    };
    </script>
    <link rel="stylesheet" type="text/css" href="/opinion/assets/css/fab.css" />

<div class="fab-wrapper">
  <div class="fab-wheel">
    
    
    
    <a class="fab-action fab-action-1" title="上一篇(热键 &#8594;)" href="https://nodebe4.github.io/opinion/2017-08-30/%E9%BE%99%E5%A6%88%E5%AE%B6%E7%9A%84%E9%BE%99%E5%B0%B1%E6%98%AF%E7%8E%B0%E5%AE%9E%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E6%A0%B8%E6%AD%A6%E5%99%A8/">
      <i>后</i>
    </a>
    
    
    <a class="fab-action fab-action-2" title="下一篇(热键 &#8592;)" href="https://nodebe4.github.io/opinion/2017-08-31/%E7%BE%8E%E5%9B%BD%E7%90%86%E6%80%A7%E8%A1%B0%E5%BE%AE%E5%8F%B2-%E5%A4%A7%E8%A5%BF%E6%B4%8B%E6%9C%88%E5%88%8A%E8%AF%91%E6%96%87/">
      <i>前</i>
    </a>
    
    
    <a class="fab-action fab-action-3" title="<编程随想>上一篇(热键 ins)" href="https://nodebe4.github.io/opinion/2017-09-11/%E6%AF%8F%E5%91%A8%E8%BD%AC%E8%BD%BD-%E6%9C%9D%E9%B2%9C%E8%AF%95%E7%88%86%E6%B0%A2%E5%BC%B9-%E5%90%84%E6%96%B9%E7%9A%84%E6%8A%A5%E9%81%93%E5%8F%8A%E8%AF%84%E8%AE%BA/">
      <i>左</i>
    </a>
    
    
    <a class="fab-action fab-action-4" title="<编程随想>下一篇(热键 del)" href="https://nodebe4.github.io/opinion/2017-08-17/%E5%88%86%E4%BA%AB%E5%90%84%E7%B1%BB%E7%94%B5%E5%AD%90%E4%B9%A6-IT-%E5%86%9B%E4%BA%8B-%E5%8E%86%E5%8F%B2-%E7%AD%89-43%E6%9C%AC/">
      <i>右</i>
    </a>
    
  </div>
</div>


  </div>


  

</article>

    </div>

    <div style="z-index:2;">
<script src="/opinion/assets/js/vanilla-back-to-top.min.js"></script>
<script>addBackToTop({
  diameter: 56,
  cornerOffset: 20, // px
  id: 'back-to-top',
  backgroundColor: '#ddd',
  textColor: 'red'
})</script>
</div>


    <div class="wrapper-footer" id="footer">
      <div class="container">
        <footer class="footer">
          <img width="200px" src="https://i.imgur.com/HSw56Ez.png" alt="二维码分享本站"/>
<font size=2px>二维码分享本站</font>

<!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  

  

  
  <li><a href="mailto:beauti4@protonmail.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/NodeBE4/opinion" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  

  
  <li><a href="/opinion/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M201.8 347.2c0 20.3-16.5 36.8-36.8 36.8 -20.3 0-36.8-16.5-36.8-36.8s16.5-36.8 36.8-36.8C185.3 310.4 201.8 326.8 201.8 347.2zM128.2 204.7v54.5c68.5 0.7 124 56.3 124.7 124.7h54.5C306.7 285.3 226.9 205.4 128.2 204.7zM128.2 166.6c57.9 0.3 112.3 22.9 153.2 63.9 41 41 63.7 95.5 63.9 153.5h54.5c-0.3-149.9-121.7-271.4-271.6-271.9V166.6L128.2 166.6z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

    
</ul>





<p><span style="color:blue">内容每小时更新一次.</span> Powered by <a href="https://github.com/AWEEKJ/kiko-now">Kiko Now</a> & <a href="https://github.com/gitalk/gitalk">Gitalk</a> & <a href="https://github.com/duty-machine/news">duty-machine</a>, 站务 <a href="https://be4.herokuapp.com">NodeBE4</a>（<span style="color:red">被墙</span>）</p>





        </footer>
      </div>
    </div>

    



  </body>
</html>
